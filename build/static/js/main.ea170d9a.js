/*! For license information please see main.ea170d9a.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case I:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,ke=null,Ee=null;function Se(e){if(e=_i(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ie(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==ke||null!==Ee)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,It,kt,Et,St,Tt=!1,Ct=[],xt=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==xt&&jt(xt)&&(xt=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Bt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Kt(e,t,n,r){var i=_t,s=Bt.transition;Bt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,Bt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Er={};function Sr(e){if(kr[e])return kr[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var Tr=Sr("animationend"),Cr=Sr("animationiteration"),xr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case xr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Wn(a))if($n)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(v=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(y=Kr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=zn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ii=[],ki=-1;function Ei(e){return{current:e}}function Si(e){0>ki||(e.current=Ii[ki],Ii[ki]=null,ki--)}function Ti(e,t){ki++,Ii[ki]=e.current,e.current=t}var Ci={},xi=Ei(Ci),Ni=Ei(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));Ti(xi,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,Ti(xi,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(xi),Ti(xi,e)):Si(Ni),Ti(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=_t;try{var n=ji;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,qi),i}finally{_t=t,Vi=!1}}return null}var Bi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){Bi[Wi++]=Ki,Bi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Bi[--Wi],Bi[Wi]=null,Ki=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case I:return(t=jc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case I:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=_s(!0),bs=_s(!1),Is=Ei(null),ks=null,Es=null,Ss=null;function Ts(){Ss=Es=ks=null}function Cs(e){var t=Is.current;Si(Is),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ks=e,Ss=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===ks)throw Error(s(308));Es=e,ks.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Hs=Ei(Ws),Ks=Ei(Ws),Gs=Ei(Ws);function Qs(e){if(e===Ws)throw Error(s(174));return e}function Ys(e,t){switch(Ti(Gs,t),Ti(Ks,e),Ti(Hs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Hs),Ti(Hs,t)}function Js(){Si(Hs),Si(Ks),Si(Gs)}function $s(e){Qs(Gs.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(Ti(Ks,e),Ti(Hs,n))}function Xs(e){Ks.current===e&&(Si(Hs),Si(Ks))}var Zs=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function Eo(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&No(e)}function Co(e,t,n){return n((function(){xo(t)&&No(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Ao(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return _o().memoizedState}function Do(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function jo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function zo(){}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ho(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function Ko(){return _o().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Jo(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),$o(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:qo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:Bo,useReducer:bo,useRef:Ro,useState:function(){return bo(wo)},useDebugValue:zo,useDeferredValue:function(e){return Wo(_o(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:qo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:Bo,useReducer:Io,useRef:Ro,useState:function(){return Io(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[Io(wo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Ri(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Ri(t)?Ai:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,_a=!1;function wa(e,t,n,r){t.child=null===e?bs(t,null,n,r):ws(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||_a?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ta(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Rl),Rl|=r;return wa(e,t,i,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Ri(n)?Ai:xi.current;return s=Pi(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||_a?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)Ba(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pi(t,c=Ri(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,qs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=Ri(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,qs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Sa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ys(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Ra,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ka(t),null;case 3:return r=t.stateNode,Js(),Si(Ni),Si(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Ka(t),null;case 5:Xs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Qs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(Si(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Js(),Ra(e,t),null===e&&qr(t.stateNode.containerInfo),Ka(t),null;case 10:return Cs(t.type._context),Ka(t),null;case 19:if(Si(Zs),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ql&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*$e()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Si(Ni),Si(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Si(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Zs),null;case 4:return Js(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,dl(e,t,n),Ja=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Xa=p):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Xa=l):Il(i);for(;null!==s;)Xa=s,_l(s,t,n),s=s.sibling;Xa=i,Ya=a,Ja=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function bl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Il(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ec(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var kl,El=Math.ceil,Sl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,xl=0,Nl=null,Al=null,Pl=0,Rl=0,Dl=Ei(0),Ol=0,Ll=null,Ml=0,Fl=0,jl=0,Ul=null,Vl=null,zl=0,ql=1/0,Bl=null,Wl=!1,Hl=null,Kl=null,Gl=!1,Ql=null,Yl=0,Jl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&xl)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&xl)&&e===Nl||(e===Nl&&(0===(2&xl)&&(Fl|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===xl&&0===(1&t.mode)&&(ql=$e()+500,Ui&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&xl)&&qi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&xl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=xl;xl|=2;var o=pc();for(Nl===e&&Pl===t||(Bl=null,ql=$e()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ts(),Sl.current=o,xl=i,null!==Al?t=0:(Nl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,$e()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Vl,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vl,Bl),t);break}bc(e,Vl,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vl,Bl),r);break}bc(e,Vl,Bl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&xl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vl,Bl),rc(e,$e()),null}function cc(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(ql=$e()+500,Ui&&qi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&xl)&&Ic();var t=xl;xl|=1;var n=Cl.transition,r=_t;try{if(Cl.transition=null,_t=1,e)return e()}finally{_t=r,Cl.transition=n,0===(6&(xl=t))&&qi()}}function hc(){Rl=Dl.current,Si(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),Si(Ni),Si(xi),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:Si(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Al=e=Dc(e.current,null),Pl=Rl=t,Ol=0,Ll=null,jl=Fl=Ml=0,Vl=Ul=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ts(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Ol=1,Ll=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Xo,null===e?Xo:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Nl||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Nl,Pl)}function gc(e,t){var n=xl;xl|=2;var r=pc();for(Nl===e&&Pl===t||(Bl=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ts(),xl=n,Sl.current=r,null!==Al)throw Error(s(261));return Nl=null,Pl=0,Ol}function yc(){for(;null!==Al;)_c(Al)}function vc(){for(;null!==Al&&!Ye();)_c(Al)}function _c(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function bc(e,t,n){var r=_t,i=Cl.transition;try{Cl.transition=null,_t=1,function(e,t,n,r){do{Ic()}while(null!==Ql);if(0!==(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Al=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=_t;_t=1;var l=xl;xl|=4,Tl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),xl=l,_t=a,Cl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,qi()}(e,t,n,r)}finally{Cl.transition=i,_t=r}return null}function Ic(){if(null!==Ql){var e=wt(Yl),t=Cl.transition,n=_t;try{if(Cl.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var _=e.current;for(Xa=_;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=_;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(I){Ec(l,l.return,I)}if(l===a){Xa=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Xa=b;break e}Xa=l.return}}if(xl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{_t=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>$e()-zl?dc(e,0):jl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,i,o,t);case E:a=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return Ci;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=js(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:$s(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Is,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Sa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Is,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ia(e,t,r,i=na(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ba(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Bc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,qr(8===e.nodeType?e.parentNode:e),uc((function(){Bc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Bc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&xl)&&(ql=$e()+500,qi()))}break;case 13:uc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},It=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Et=function(){return _t},St=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ie=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[_i,wi,bi,Te,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,m(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,I=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(I);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,S=null,T=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==S){var e=t.unstable_now();x=e;var n=!0;try{n=S(!0,e)}finally{n?k():(E=!1,S=null)}}else E=!1}if("function"===typeof _)k=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,k=function(){R.postMessage(null)}}else k=function(){y(A,0)};function D(e){S=e,E||(E=!0,k())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(b,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(I))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>nt,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>Pn,_addComponent:()=>Mn,_addOrOverwriteComponent:()=>Fn,_apps:()=>Dn,_clearComponents:()=>Bn,_components:()=>Ln,_getProvider:()=>Un,_isFirebaseApp:()=>zn,_isFirebaseServerApp:()=>qn,_registerComponent:()=>jn,_removeServiceInstance:()=>Vn,_serverApps:()=>On,deleteApp:()=>Xn,getApp:()=>Jn,getApps:()=>$n,initializeApp:()=>Qn,initializeServerApp:()=>Yn,onLog:()=>er,registerVersion:()=>Zn,setLogLevel:()=>tr});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:h,location:w.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let w={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(w.location,e,n);r&&r(i,e),g=y()+1;let l=d(i,g),c=w.createHref(i);try{a.pushState(l,"",c)}catch(Cb){if(Cb instanceof DOMException&&"DataCloneError"===Cb.name)throw Cb;s.location.assign(c)}o&&m&&m({action:h,location:w.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(w.location,e,n);r&&r(i,e),g=y();let s=d(i,g),l=w.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=P(r);s=N(i[o],e)}return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,I=3,k=2,E=1,S=10,T=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=T),t&&(r+=k),n.filter((e=>!C(e))).reduce(((e,t)=>e+(b.test(t)?I:""===t?E:S)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:F([i,c.pathname]),pathnameBase:j(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Cb){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Cb+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],B=(new Set(q),["get",...q]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const H=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function $(){return null!=r.useContext(Q)}function X(){return $()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(G).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);return Z((()=>{n.current=!0})),r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t])}():function(){$()||u(!1);let e=r.useContext(H),{basename:t,future:n,navigator:i}=r.useContext(G),{matches:s}=r.useContext(Y),{pathname:o}=X(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(G),{matches:s}=r.useContext(Y),{pathname:o}=X(),a=JSON.stringify(L(s,i.v7_relativeSplatPath));return r.useMemo((()=>M(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function re(e,n,i,s){$()||u(!1);let{navigator:o}=r.useContext(G),{matches:a}=r.useContext(Y),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",y=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=v(e,{pathname:y});let w=le(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&w?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function ie(){let e=function(){var e;let t=r.useContext(J),n=de(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const se=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function le(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||se,c&&(h<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(H);return t||u(!1),t}function de(e){let t=r.useContext(K);return t||u(!1),t}function fe(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};i.startTransition;function me(e){u(!1)}function ge(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;$()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=s,_=r.useMemo((()=>{let e=R(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:o}}),[h,f,p,g,y,v,o]);return null==_?null:r.createElement(G.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:_}))}function ye(e){let{children:t,location:n}=e;return re(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(YP){}new Map;const Ie=i.startTransition;a.flushSync,i.useId;function ke(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&Ie?Ie((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=we(e,be),{basename:g}=r.useContext(G),y=!1;if("string"===typeof h&&Se.test(h)&&(n=h,Ee))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(YP){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;$()||u(!1);let{basename:i,navigator:s}=r.useContext(G),{hash:o,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),_=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),h=ne(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",_e({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:t,target:c}))}));var Ce,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));const Ne=!1,Ae=!1,Pe="${JSCORE_VERSION}",Re=function(e,t){if(!e)throw De(t)},De=function(e){return new Error("Firebase Database ("+Pe+") INTERNAL ASSERT FAILED: "+e)},Oe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Oe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Me;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){const t=Oe(e);return Le.encodeByteArray(t,!0)},je=function(e){return Fe(e).replace(/\./g,"")},Ue=function(e){try{return Le.decodeString(e,!0)}catch(YP){console.error("base64Decode failed: ",YP)}return null};function Ve(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ve(e[n],t[n]));return e}const ze=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,qe=()=>{try{return ze()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(YP){return}const t=e&&Ue(e[1]);return t&&JSON.parse(t)})()}catch(YP){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(YP))}},Be=()=>{var e;return null===(e=qe())||void 0===e?void 0:e.config};class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function He(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(s)),""].join(".")}function Ke(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Qe(){var e;const t=null===(e=qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(YP){return!1}}function Ye(){return"object"===typeof self&&self.self===self}function Je(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function $e(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Xe(){const e=Ke();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ze(){return!0===Ne||!0===Ae}function et(){return!Qe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tt(){try{return"object"===typeof indexedDB}catch(YP){return!1}}class nt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}}class rt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(it,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new nt(n,s,t)}}const it=/\{\$([^}]+)}/g;function st(e){return JSON.parse(e)}function ot(e){return JSON.stringify(e)}const at=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=st(Ue(s[0])||""),n=st(Ue(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(YP){}return{header:t,claims:n,data:r,signature:i}};function lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ut(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ht(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function dt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ft(n)&&ft(s)){if(!dt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ft(e){return null!==e&&"object"===typeof e}function pt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function mt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function gt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class yt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function vt(e,t){const n=new _t(e,t);return n.subscribe.bind(n)}class _t{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=wt),void 0===r.error&&(r.error=wt),void 0===r.complete&&(r.complete=wt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(YP){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(YP){"undefined"!==typeof console&&console.error&&console.error(YP)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function wt(){}const bt=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function It(e,t){return"".concat(e," failed: ").concat(t," argument ")}function kt(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(It(e,t)+"must be a valid function.")}function Et(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(It(e,t)+"must be a valid context object.")}const St=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Tt(e){return e&&e._delegate?e._delegate:e}class Ct{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xt="[DEFAULT]";class Nt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new We;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(YP){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(YP){if(r)return null;throw YP}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xt})}catch(YP){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(YP){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===xt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.component?this.component.multipleInstances?e:xt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class At{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Nt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Pt=[];var Rt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Rt||(Rt={}));const Dt={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},Ot=Rt.INFO,Lt={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},Mt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Lt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Ft{constructor(e){this.name=e,this._logLevel=Ot,this._logHandler=Mt,this._userLogHandler=null,Pt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Dt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...t),this._logHandler(this,Rt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...t),this._logHandler(this,Rt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...t),this._logHandler(this,Rt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...t),this._logHandler(this,Rt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...t),this._logHandler(this,Rt.ERROR,...t)}}const jt=(e,t)=>t.some((t=>e instanceof t));let Ut,Vt;const zt=new WeakMap,qt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Ht=new WeakMap;let Kt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Bt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Gt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vt||(Vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jt(this),n),Yt(zt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yt(e.apply(Jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Jt(this),t,...r);return Bt.set(s,t.sort?t.sort():[t]),Yt(s)}}function Qt(e){return"function"===typeof e?Gt(e):(e instanceof IDBTransaction&&function(e){if(qt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));qt.set(e,t)}(e),jt(e,Ut||(Ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Kt):e)}function Yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Yt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&zt.set(t,e)})).catch((()=>{})),Ht.set(t,e),t}(e);if(Wt.has(e))return Wt.get(e);const t=Qt(e);return t!==e&&(Wt.set(e,t),Ht.set(t,e)),t}const Jt=e=>Ht.get(e);const $t=["get","getKey","getAll","getAllKeys","count"],Xt=["put","add","delete","clear"],Zt=new Map;function en(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Zt.get(t))return Zt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Xt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$t.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Zt.set(t,s),s}Kt=(e=>({...e,get:(t,n,r)=>en(t,n)||e.get(t,n,r),has:(t,n)=>!!en(t,n)||e.has(t,n)}))(Kt);class tn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const nn="@firebase/app",rn="0.10.5",sn=new Ft("@firebase/app"),on="@firebase/app-compat",an="@firebase/analytics-compat",ln="@firebase/analytics",cn="@firebase/app-check-compat",un="@firebase/app-check",hn="@firebase/auth",dn="@firebase/auth-compat",fn="@firebase/database",pn="@firebase/database-compat",mn="@firebase/functions",gn="@firebase/functions-compat",yn="@firebase/installations",vn="@firebase/installations-compat",_n="@firebase/messaging",wn="@firebase/messaging-compat",bn="@firebase/performance",In="@firebase/performance-compat",kn="@firebase/remote-config",En="@firebase/remote-config-compat",Sn="@firebase/storage",Tn="@firebase/storage-compat",Cn="@firebase/firestore",xn="@firebase/vertexai-preview",Nn="@firebase/firestore-compat",An="firebase",Pn="[DEFAULT]",Rn={[nn]:"fire-core",[on]:"fire-core-compat",[ln]:"fire-analytics",[an]:"fire-analytics-compat",[un]:"fire-app-check",[cn]:"fire-app-check-compat",[hn]:"fire-auth",[dn]:"fire-auth-compat",[fn]:"fire-rtdb",[pn]:"fire-rtdb-compat",[mn]:"fire-fn",[gn]:"fire-fn-compat",[yn]:"fire-iid",[vn]:"fire-iid-compat",[_n]:"fire-fcm",[wn]:"fire-fcm-compat",[bn]:"fire-perf",[In]:"fire-perf-compat",[kn]:"fire-rc",[En]:"fire-rc-compat",[Sn]:"fire-gcs",[Tn]:"fire-gcs-compat",[Cn]:"fire-fst",[Nn]:"fire-fst-compat",[xn]:"fire-vertex","fire-js":"fire-js",[An]:"fire-js-all"},Dn=new Map,On=new Map,Ln=new Map;function Mn(e,t){try{e.container.addComponent(t)}catch(YP){sn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),YP)}}function Fn(e,t){e.container.addOrOverwriteComponent(t)}function jn(e){const t=e.name;if(Ln.has(t))return sn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ln.set(t,e);for(const n of Dn.values())Mn(n,e);for(const n of On.values())Mn(n,e);return!0}function Un(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pn;Un(e,t).clearInstance(n)}function zn(e){return void 0!==e.options}function qn(e){return void 0!==e.settings}function Bn(){Ln.clear()}const Wn=new rt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Hn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ct("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}class Kn extends Hn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Zn(nn,rn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Xn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Wn.create("server-app-deleted")}}const Gn="10.12.2";function Qn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wn.create("bad-app-name",{appName:String(i)});if(n||(n=Be()),!n)throw Wn.create("no-options");const s=Dn.get(i);if(s){if(dt(n,s.options)&&dt(r,s.config))return s;throw Wn.create("duplicate-app",{appName:i})}const o=new At(i);for(const l of Ln.values())o.addComponent(l);const a=new Hn(n,r,o);return Dn.set(i,a),a}function Yn(e,t){if(Ye())throw Wn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=zn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Wn.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=On.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new At(i);for(const c of Ln.values())a.addComponent(c);const l=new Kn(n,t,i,a);return On.set(i,l),l}function Jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;const t=Dn.get(e);if(!t&&e===Pn&&Be())return Qn();if(!t)throw Wn.create("no-app",{appName:e});return t}function $n(){return Array.from(Dn.values())}async function Xn(e){let t=!1;const n=e.name;if(Dn.has(n))t=!0,Dn.delete(n);else if(On.has(n)){e.decRefCount()<=0&&(On.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zn(e,t,n){var r;let i=null!==(r=Rn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void sn.warn(e.join(" "))}jn(new Ct("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function er(e,t){if(null!==e&&"function"!==typeof e)throw Wn.create("invalid-log-argument");!function(e,t){for(const n of Pt){let r=null;t&&t.level&&(r=Dt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Rt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function tr(e){var t;t=e,Pt.forEach((e=>{e.setLogLevel(t)}))}const nr="firebase-heartbeat-database",rr=1,ir="firebase-heartbeat-store";let sr=null;function or(){return sr||(sr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Yt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Yt(o.result),e.oldVersion,e.newVersion,Yt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(nr,rr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ir)}catch(YP){console.warn(YP)}}}).catch((e=>{throw Wn.create("idb-open",{originalErrorMessage:e.message})}))),sr}async function ar(e,t){try{const n=(await or()).transaction(ir,"readwrite"),r=n.objectStore(ir);await r.put(t,lr(e)),await n.done}catch(YP){if(YP instanceof nt)sn.warn(YP.message);else{const t=Wn.create("idb-set",{originalErrorMessage:null===YP||void 0===YP?void 0:YP.message});sn.warn(t.message)}}}function lr(e){return"".concat(e.name,"!").concat(e.options.appId)}class cr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ur();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ur(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),dr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=je(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ur(){return(new Date).toISOString().substring(0,10)}class hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!tt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Cb){t(Cb)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await or()).transaction(ir),n=await t.objectStore(ir).get(lr(e));return await t.done,n}catch(YP){if(YP instanceof nt)sn.warn(YP.message);else{const t=Wn.create("idb-get",{originalErrorMessage:null===YP||void 0===YP?void 0:YP.message});sn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dr(e){return je(JSON.stringify({version:2,heartbeats:e})).length}var fr;fr="",jn(new Ct("platform-logger",(e=>new tn(e)),"PRIVATE")),jn(new Ct("heartbeat",(e=>new cr(e)),"PRIVATE")),Zn(nn,rn,fr),Zn(nn,rn,"esm2017"),Zn("fire-js","");class pr{constructor(e,t){this._delegate=e,this.firebase=t,Mn(e,new Ct("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Xn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Mn(this._delegate,e)}_addOrOverwriteComponent(e){Fn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mr=new rt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const gr=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Qn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(lt(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Zn,setLogLevel:tr,onLog:er,apps:null,SDK_VERSION:Gn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(jn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw mr.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ve(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!lt(n,e=e||Pn))throw mr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(pr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ve(n,e)},createSubscribe:vt,ErrorFactory:rt,deepExtend:Ve}),n}(),yr=new Ft("@firebase/app-compat");if(Ye()&&void 0!==self.firebase){yr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&yr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vr=gr;!function(e){Zn("@firebase/app-compat","0.2.35",e)}();vr.registerVersion("firebase","10.12.2","app-compat");function _r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const wr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},br="EMAIL_SIGNIN",Ir="PASSWORD_RESET",kr="RECOVER_EMAIL",Er="REVERT_SECOND_FACTOR_ADDITION",Sr="VERIFY_AND_CHANGE_EMAIL",Tr="VERIFY_EMAIL";function Cr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xr=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Nr=Cr,Ar=new rt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pr=new Ft("@firebase/auth");function Rr(e){if(Pr.logLevel<=Rt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pr.error("Auth (".concat(Gn,"): ").concat(e),...n)}}function Dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jr(e,...n)}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jr(e,...n)}function Lr(e,t,n){const r=Object.assign(Object.assign({},Nr()),{[t]:n});return new rt("auth","Firebase",r).create(t,{appName:e.name})}function Mr(e){return Lr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Dr(e,"argument-error"),Lr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ar.create(e,...n)}function Ur(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jr(t,...r)}}function Vr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Rr(t),new Error(t)}function zr(e,t){e||Vr(t)}function qr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Br(){return"http:"===Wr()||"https:"===Wr()}function Wr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Hr{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ge()||$e()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Br()||Je()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kr(e,t){zr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yr=new Hr(3e4,6e4);function Jr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $r(e,t,n,r){return Xr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=pt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Gr.fetch()(ei(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Xr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Qr),t);try{const t=new ni(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ri(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ri(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ri(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ri(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Lr(e,a,o);Dr(e,a)}}catch(YP){if(YP instanceof nt)throw YP;Dr(e,"network-request-failed",{message:String(YP)})}}async function Zr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await $r(e,t,n,r,i);return"mfaPendingCredential"in s&&Dr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ei(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Kr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function ti(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ni{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Or(this.auth,"network-request-failed"))),Yr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ri(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Or(e,t,r);return i.customData._tokenResponse=n,i}function ii(e){return void 0!==e&&void 0!==e.getResponse}function si(e){return void 0!==e&&void 0!==e.enterprise}class oi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ti(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ai(e,t){return $r(e,"GET","/v2/recaptchaConfig",Jr(e,t))}async function li(e,t){return $r(e,"POST","/v1/accounts:lookup",t)}function ci(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(YP){}}function ui(e){return 1e3*Number(e)}function hi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ue(n);return e?JSON.parse(e):(Rr("Failed to decode base64 JWT payload"),null)}catch(YP){return Rr("Caught error parsing JWT payload as JSON",null===YP||void 0===YP?void 0:YP.toString()),null}}function di(e){const t=hi(e);return Ur(t,"internal-error"),Ur("undefined"!==typeof t.exp,"internal-error"),Ur("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function fi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(YP){throw YP instanceof nt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(YP)&&e.auth.currentUser===e&&await e.auth.signOut(),YP}}class pi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(YP){return void((null===YP||void 0===YP?void 0:YP.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class mi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await fi(e,li(n,{idToken:r}));Ur(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?yi(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mi(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function yi(e){return e.map((e=>{var{providerId:t}=e,n=_r(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ur(e.idToken,"internal-error"),Ur("undefined"!==typeof e.idToken,"internal-error"),Ur("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):di(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ur(0!==e.length,"internal-error");const t=di(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ur(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Xr(e,{},(async()=>{const n=pt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ei(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Gr.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new vi;return n&&(Ur("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ur("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ur("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function _i(e,t){Ur("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wi{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=_r(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await fi(this,this.stsTokenManager.getToken(this.auth,e));return Ur(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Tt(e),r=await n.getIdToken(t),i=hi(r);Ur(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ci(ui(i.auth_time)),issuedAtTime:ci(ui(i.iat)),expirationTime:ci(ui(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Tt(e);await gi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ur(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ur(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await gi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await fi(this,async function(e,t){return $r(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:I}=t;Ur(v&&I,e,"internal-error");const k=vi.fromJSON(this.name,I);Ur("string"===typeof v,e,"internal-error"),_i(u,e.name),_i(h,e.name),Ur("boolean"===typeof _,e,"internal-error"),Ur("boolean"===typeof w,e,"internal-error"),_i(d,e.name),_i(f,e.name),_i(p,e.name),_i(m,e.name),_i(g,e.name),_i(y,e.name);const E=new wi({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(E.providerData=b.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new vi;r.updateFromServerResponse(t);const i=new wi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await gi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ur(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?yi(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new vi;o.updateFromIdToken(n);const a=new wi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new mi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const bi=new Map;function Ii(e){zr(e instanceof Function,"Expected a class definition");let t=bi.get(e);return t?(zr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bi.set(e,t),t)}class ki{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ki.type="NONE";const Ei=ki;function Si(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ti{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Si(this.userKey,r.apiKey,i),this.fullPersistenceKey=Si("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ti(Ii(Ei),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ii(Ei);const s=Si(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=wi._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Ti(i,e,n)):new Ti(i,e,n)}}function Ci(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Di(t))return"Blackberry";if(Oi(t))return"Webos";if(Ni(t))return"Safari";if((t.includes("chrome/")||Ai(t))&&!t.includes("edge/"))return"Chrome";if(Ri(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/firefox\//i.test(e)}function Ni(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/crios\//i.test(e)}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iemobile/i.test(e)}function Ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/android/i.test(e)}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/blackberry/i.test(e)}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/webos/i.test(e)}function Li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return Li(e)||Ri(e)||Oi(e)||Di(e)||/windows phone/i.test(e)||Pi(e)}function Fi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ci(Ke());break;case"Worker":t="".concat(Ci(Ke()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Gn,"/").concat(r)}class ji{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(YP){r(YP)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(YP){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===YP||void 0===YP?void 0:YP.message})}}}class Ui{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Vi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new ji(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ar,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ti.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(YP){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await li(this,{idToken:e}),n=await wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(YP){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(YP)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ur(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(YP){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gi(e)}catch(YP){if((null===YP||void 0===YP?void 0:YP.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(Mr(this));const t=e?Tt(e):null;return t&&Ur(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ur(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return qn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(Mr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ii(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return $r(e,"GET","/v2/passwordPolicy",Jr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ui(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return $r(e,"POST","/v2/accounts:revokeToken",Jr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ii(e)||this._popupRedirectResolver;Ur(t,this,"argument-error"),this.redirectPersistenceManager=await Ti.create(this,[Ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ur(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ur(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Pr.logLevel<=Rt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pr.warn("Auth (".concat(Gn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function zi(e){return Tt(e)}class qi{constructor(e){this.auth=e,this.observer=null,this.addObserver=vt((e=>this.observer=e))}get next(){return Ur(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wi(e){return Bi.loadJS(e)}function Hi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ki{constructor(e){this.type="recaptcha-enterprise",this.auth=zi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;si(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ai(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new oi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&si(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Bi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Wi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Gi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Ki(e);let s;try{s=await i.verify(n)}catch(Cb){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qi(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Gi(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Gi(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Yi(e,t,n){const r=zi(e);Ur(r._canInitEmulator,r,"emulator-config-failed"),Ur(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ji(t),{host:o,port:a}=function(e){const t=Ji(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:$i(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:$i(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ji(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $i(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function Zi(e,t){return $r(e,"POST","/v1/accounts:resetPassword",Jr(e,t))}async function es(e,t){return $r(e,"POST","/v1/accounts:signUp",t)}async function ts(e,t){return Zr(e,"POST","/v1/accounts:signInWithPassword",Jr(e,t))}async function ns(e,t){return $r(e,"POST","/v1/accounts:sendOobCode",Jr(e,t))}async function rs(e,t){return ns(e,t)}async function is(e,t){return ns(e,t)}class ss extends Xi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ss(e,t,"password")}static _fromEmailAndCode(e,t){return new ss(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Qi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ts);case"emailLink":return async function(e,t){return Zr(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Qi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",es);case"emailLink":return async function(e,t){return Zr(e,"POST","/v1/accounts:signInWithEmailLink",Jr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function os(e,t){return Zr(e,"POST","/v1/accounts:signInWithIdp",Jr(e,t))}class as extends Xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=_r(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new as(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return os(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,os(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,os(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pt(t)}return e}}const ls={USER_NOT_FOUND:"user-not-found"};class cs extends Xi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Zr(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Zr(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,t));if(n.temporaryProof)throw ri(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Zr(e,"POST","/v1/accounts:signInWithPhoneNumber",Jr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ls)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new cs({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class us{constructor(e){var t,n,r,i,s,o;const a=mt(gt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ur(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=mt(gt(e)).link,n=t?mt(gt(t)).deep_link_id:null,r=mt(gt(e)).deep_link_id;return(r?mt(gt(r)).link:null)||r||n||t||e}(e);try{return new us(t)}catch(n){return null}}}class hs{constructor(){this.providerId=hs.PROVIDER_ID}static credential(e,t){return ss._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=us.parseLink(t);return Ur(n,"argument-error"),ss._fromEmailAndCode(e,n.code,n.tenantId)}}hs.PROVIDER_ID="password",hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ds{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fs extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends fs{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Ur("providerId"in t&&"signInMethod"in t,"argument-error"),as._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ur(e.idToken||e.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ps.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ps.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new ps(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(YP){return null}}}class ms extends fs{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ms.credential(t.oauthAccessToken)}catch(n){return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com",ms.PROVIDER_ID="facebook.com";class gs extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return as._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gs.credential(n,r)}catch(i){return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com",gs.PROVIDER_ID="google.com";class ys extends fs{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ys.credential(t.oauthAccessToken)}catch(n){return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com",ys.PROVIDER_ID="github.com";class vs extends Xi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return os(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,os(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,os(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new vs(n,i):null}static _create(e,t){return new vs(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _s extends ds{constructor(e){Ur(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return _s.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return _s.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vs.fromJSON(e);return Ur(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return vs._create(r,n)}catch(YP){return null}}}class ws extends fs{constructor(){super("twitter.com")}static credential(e,t){return as._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ws.credential(n,r)}catch(i){return null}}}async function bs(e,t){return Zr(e,"POST","/v1/accounts:signUp",Jr(e,t))}ws.TWITTER_SIGN_IN_METHOD="twitter.com",ws.PROVIDER_ID="twitter.com";class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await wi._fromIdTokenResponse(e,n,r),s=ks(n);return new Is({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ks(n);return new Is({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ks(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Es extends nt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Es.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Es(e,t,n,r)}}function Ss(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Es._fromErrorAndOperation(e,n,t,r);throw n}))}function Ts(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Cs(e,t){const n=Tt(e);await Ns(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return $r(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ts(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await fi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Is._forOperation(e,"link",r)}async function Ns(e,t,n){await gi(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ur(Ts(t.providerData).has(n)===e,t.auth,r)}async function As(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qn(r.app))return Promise.reject(Mr(r));const i="reauthenticate";try{const s=await fi(e,Ss(r,i,t,e),n);Ur(s.idToken,r,"internal-error");const o=hi(s.idToken);Ur(o,r,"internal-error");const{sub:a}=o;return Ur(e.uid===a,r,"user-mismatch"),Is._forOperation(e,i,s)}catch(YP){throw(null===YP||void 0===YP?void 0:YP.code)==="auth/".concat("user-not-found")&&Dr(r,"user-mismatch"),YP}}async function Ps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qn(e.app))return Promise.reject(Mr(e));const r="signIn",i=await Ss(e,r,t),s=await Is._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Rs(e,t){return Ps(zi(e),t)}async function Ds(e,t){const n=Tt(e);return await Ns(!1,n,t.providerId),xs(n,t)}async function Os(e,t){return As(Tt(e),t)}async function Ls(e,t){if(qn(e.app))return Promise.reject(Mr(e));const n=zi(e),r=await async function(e,t){return Zr(e,"POST","/v1/accounts:signInWithCustomToken",Jr(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Is._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Ms{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Fs._fromServerResponse(e,t):"totpInfo"in t?js._fromServerResponse(e,t):Dr(e,"internal-error")}}class Fs extends Ms{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Fs(t)}}class js extends Ms{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new js(t)}}function Us(e,t,n){var r;Ur((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ur("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ur(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ur(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Vs(e){const t=zi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zs(e,t){await async function(e,t){return $r(e,"POST","/v1/accounts:update",Jr(e,t))}(Tt(e),{oobCode:t})}async function qs(e,t){const n=Tt(e),r=await Zi(n,{oobCode:t}),i=r.requestType;switch(Ur(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ur(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ur(r.mfaInfo,n,"internal-error");default:Ur(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ms._fromServerResponse(zi(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Bs(e,t){const n={identifier:t,continueUri:Br()?qr():"http://localhost"},{signinMethods:r}=await async function(e,t){return $r(e,"POST","/v1/accounts:createAuthUri",Jr(e,t))}(Tt(e),n);return r||[]}async function Ws(e,t){const n=Tt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Us(n.auth,r,t);const{email:i}=await async function(e,t){return ns(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Hs(e,t,n){const r=Tt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Us(r.auth,i,n);const{email:s}=await async function(e,t){return ns(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Ks(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Tt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await fi(i,async function(e,t){return $r(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Gs(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await fi(e,async function(e,t){return $r(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Qs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ys extends Qs{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Js extends Qs{constructor(e,t){super(e,"facebook.com",t)}}class $s extends Ys{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Xs extends Qs{constructor(e,t){super(e,"google.com",t)}}class Zs extends Ys{constructor(e,t,n){super(e,"twitter.com",t,n)}}function eo(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=hi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Qs(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Js(s,i);case"github.com":return new $s(s,i);case"google.com":return new Xs(s,i);case"twitter.com":return new Zs(s,i,e.screenName||null);case"custom":case"anonymous":return new Qs(s,null);default:return new Qs(s,r,i)}}(n)}class to{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new to("enroll",e,t)}static _fromMfaPendingCredential(e){return new to("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return to._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return to._fromIdtoken(e.multiFactorSession.idToken)}return null}}class no{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=zi(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Ms._fromServerResponse(n,e)));Ur(r.mfaPendingCredential,n,"internal-error");const s=to._fromMfaPendingCredential(r.mfaPendingCredential);return new no(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Is._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Ur(t.user,n,"internal-error"),Is._forOperation(t.user,t.operationType,o);default:Dr(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class ro{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Ms._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new ro(e)}async getSession(){return to._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await fi(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await fi(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},$r(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Jr(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(YP){throw YP}var r,i}}const io=new WeakMap;const so="__sak";class oo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(so,"1"),this.storage.removeItem(so),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ao extends oo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ke();return Ni(e)||Li(e)}()&&function(){try{return!(!window||window===window.top)}catch(YP){return!1}}(),this.fallbackToPolling=Mi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Xe()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ao.type="LOCAL";const lo=ao;class co extends oo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}co.type="SESSION";const uo=co;class ho{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ho(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ho.receivers=[];class po{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=fo("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function mo(){return window}function go(){return"undefined"!==typeof mo().WorkerGlobalScope&&"function"===typeof mo().importScripts}const yo="firebaseLocalStorageDb",vo="firebaseLocalStorage",_o="fbase_key";class wo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function bo(e,t){return e.transaction([vo],t?"readwrite":"readonly").objectStore(vo)}function Io(){const e=indexedDB.open(yo,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(vo,{keyPath:_o})}catch(YP){n(YP)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(vo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(yo);return new wo(e).toPromise()}(),t(await Io()))}))}))}async function ko(e,t,n){const r=bo(e,!0).put({[_o]:t,value:n});return new wo(r).toPromise()}function Eo(e,t){const n=bo(e,!0).delete(t);return new wo(n).toPromise()}class So{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Io()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(YP){if(t++>3)throw YP;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return go()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ho._getInstance(go()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new po(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Io();return await ko(e,so,"1"),await Eo(e,so),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ko(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=bo(e,!1).get(t),r=await new wo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Eo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=bo(e,!1).getAll();return new wo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}So.type="LOCAL";const To=So;const Co=1e12;class xo{constructor(e){this.auth=e,this.counter=Co,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new No(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Co;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Co;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Co;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class No{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Ur(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(YP){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(YP){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ao=Hi("rcb"),Po=new Hr(3e4,6e4);class Ro{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mo().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ur(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ii(mo().grecaptcha)?Promise.resolve(mo().grecaptcha):new Promise(((n,r)=>{const i=mo().setTimeout((()=>{r(Or(e,"network-request-failed"))}),Po.get());mo()[Ao]=()=>{mo().clearTimeout(i),delete mo()[Ao];const s=mo().grecaptcha;if(!s||!ii(s))return void r(Or(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Wi("".concat(Bi.recaptchaV2Script,"?").concat(pt({onload:Ao,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Or(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Do{async load(e){return new xo(e)}clearedOneInstance(){}}const Oo="recaptcha",Lo={theme:"light",type:"image"};class Mo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Lo);this.parameters=n,this.type=Oo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zi(e),this.isInvisible="invisible"===this.parameters.size,Ur("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Ur(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Do:new Ro,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(YP){return Promise.reject(YP)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Ur(!this.parameters.sitekey,this.auth,"argument-error"),Ur(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ur("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=mo()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Ur(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ur(Br()&&!go(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await $r(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Ur(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ur(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fo{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=cs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function jo(e,t,n){var r;const i=await n.verify();try{let s;if(Ur("string"===typeof i,e,"argument-error"),Ur(n.type===Oo,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ur("enroll"===t.type,e,"internal-error");const n=await function(e,t){return $r(e,"POST","/v2/accounts/mfaEnrollment:start",Jr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ur("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ur(n,e,"missing-multi-factor-info");const o=await function(e,t){return $r(e,"POST","/v2/accounts/mfaSignIn:start",Jr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return $r(e,"POST","/v1/accounts:sendVerificationCode",Jr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Uo{constructor(e){this.providerId=Uo.PROVIDER_ID,this.auth=zi(e)}verifyPhoneNumber(e,t){return jo(this.auth,e,Tt(t))}static credential(e,t){return cs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Uo.credentialFromTaggedObject(t)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?cs._fromTokenResponse(n,r):null}}function Vo(e,t){return t?Ii(t):(Ur(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Uo.PROVIDER_ID="phone",Uo.PHONE_SIGN_IN_METHOD="phone";class zo extends Xi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return os(e,this._buildIdpRequest())}_linkToIdToken(e,t){return os(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return os(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qo(e){return Ps(e.auth,new zo(e),e.bypassAuthState)}function Bo(e){const{auth:t,user:n}=e;return Ur(n,t,"internal-error"),As(n,new zo(e),e.bypassAuthState)}async function Wo(e){const{auth:t,user:n}=e;return Ur(n,t,"internal-error"),xs(n,new zo(e),e.bypassAuthState)}class Ho{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(YP){this.reject(YP)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(YP){this.reject(YP)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qo;case"linkViaPopup":case"linkViaRedirect":return Wo;case"reauthViaPopup":case"reauthViaRedirect":return Bo;default:Dr(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ko=new Hr(2e3,1e4);class Go extends Ho{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ur(e,this.auth,"internal-error"),e}async onExecution(){zr(1===this.filter.length,"Popup operations only handle one event");const e=fo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Or(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ko.get())};e()}}Go.currentPopupAction=null;const Qo="pendingRedirect",Yo=new Map;class Jo extends Ho{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Yo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ea(t),r=Zo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(YP){e=()=>Promise.reject(YP)}Yo.set(this.auth._key(),e)}return this.bypassAuthState||Yo.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function $o(e,t){return Zo(e)._set(ea(t),"true")}function Xo(e,t){Yo.set(e._key(),t)}function Zo(e){return Ii(e._redirectPersistence)}function ea(e){return Si(Qo,e.config.apiKey,e.name)}function ta(e,t,n){return async function(e,t,n){if(qn(e.app))return Promise.reject(Mr(e));const r=zi(e);Fr(e,t,ds),await r._initializationPromise;const i=Vo(r,n);return await $o(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function na(e,t,n){return async function(e,t,n){const r=Tt(e);if(Fr(r.auth,t,ds),qn(r.auth.app))return Promise.reject(Mr(r.auth));await r.auth._initializationPromise;const i=Vo(r.auth,n);await $o(i,r.auth);const s=await sa(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function ra(e,t,n){return async function(e,t,n){const r=Tt(e);Fr(r.auth,t,ds),await r.auth._initializationPromise;const i=Vo(r.auth,n);await Ns(!1,r,t.providerId),await $o(i,r.auth);const s=await sa(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qn(e.app))return Promise.reject(Mr(e));const r=zi(e),i=Vo(r,t),s=new Jo(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function sa(e){const t=fo("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class oa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return la(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!la(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Or(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(e))}saveEventToCache(e){this.cachedEventUids.add(aa(e)),this.lastProcessedEventTime=Date.now()}}function aa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function la(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ca(e){return $r(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const ua=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ha=/^https?/;function da(e){const t=qr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ha.test(n))return!1;if(ua.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const fa=new Hr(3e4,6e4);function pa(){const e=mo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ma(e){return new Promise(((t,n)=>{var r,i,s;function o(){pa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pa(),n(Or(e,"network-request-failed"))},timeout:fa.get()})}if(null===(i=null===(r=mo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=mo().gapi)||void 0===s?void 0:s.load)){const t=Hi("iframefcb");return mo()[t]=()=>{gapi.load?o():n(Or(e,"network-request-failed"))},Wi("".concat(Bi.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ga=null,e}))}let ga=null;const ya=new Hr(5e3,15e3),va="__/auth/iframe",_a="emulator/auth/iframe",wa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ba=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ia(e){const t=e.config;Ur(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kr(t,_a):"https://".concat(e.config.authDomain,"/").concat(va),r={apiKey:t.apiKey,appName:e.name,v:Gn},i=ba.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(pt(r).slice(1))}async function ka(e){const t=await function(e){return ga=ga||ma(e),ga}(e),n=mo().gapi;return Ur(n,e,"internal-error"),t.open({where:document.body,url:Ia(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Or(e,"network-request-failed"),s=mo().setTimeout((()=>{r(i)}),ya.get());function o(){mo().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ea={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(YP){}}}function Ta(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ea),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ke().toLowerCase();n&&(a=Ai(c)?"_blank":n),xi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Li(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Sa(null);const h=window.open(t||"",a,u);Ur(h,e,"popup-blocked");try{h.focus()}catch(YP){}return new Sa(h)}const Ca="__/auth/handler",xa="emulator/auth/handler",Na=encodeURIComponent("fac");async function Aa(e,t,n,r,i,s){Ur(e.config.authDomain,e,"auth-domain-config-required"),Ur(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gn,eventId:i};if(t instanceof ds){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ut(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof fs){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Na,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ca);return Kr(t,xa)}(e),"?").concat(pt(a).slice(1)).concat(c)}const Pa="webStorageSupport";const Ra=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=ia,this._overrideRedirectResult=Xo}async _openPopup(e,t,n,r){var i;zr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ta(e,await Aa(e,t,n,qr(),r),fo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mo().location.href=e}(await Aa(e,t,n,qr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ka(e),n=new oa(e);return t.register("authEvent",(t=>{Ur(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pa,{type:Pa},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Pa];void 0!==i&&t(!!i),Dr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ca(e);for(const r of t)try{if(da(r))return}catch(n){}Dr(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mi()||Ni()||Li()}};class Da{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vr("unexpected MultiFactorSessionType")}}}class Oa extends Da{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Oa(e)}_finalizeEnroll(e,t,n){return function(e,t){return $r(e,"POST","/v2/accounts/mfaEnrollment:finalize",Jr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return $r(e,"POST","/v2/accounts/mfaSignIn:finalize",Jr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class La{constructor(){}static assertion(e){return Oa._fromCredential(e)}}La.FACTOR_ID="phone";var Ma="@firebase/auth",Fa="1.7.4";class ja{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ur(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=qe())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Ua;function Va(){return window}!function(e){Bi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Or("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ua="Browser",jn(new Ct("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ur(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fi(Ua)},c=new Vi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ii);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),jn(new Ct("auth-internal",(e=>(e=>new ja(e))(zi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(Ma,Fa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ua)),Zn(Ma,Fa,"esm2017");async function za(e,t,n){var r;const{BuildInfo:i}=Va();zr(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(zr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Li()?o.ibi=i.packageName:Ri()?o.apn=i.packageName:Dr(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Aa(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function qa(e){const{cordova:t}=Va();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ba=20;class Wa extends oa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ha(e){const t=await Qa()._get(Ya(e));return t&&await Qa()._remove(Ya(e)),t}function Ka(e,t){var n,r;const i=function(e){const t=Ja(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ja(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ja(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ja(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(YP){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Or(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ga(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ba;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Qa(){return Ii(lo)}function Ya(e){return Si("authEvent",e.config.apiKey,e.name)}function Ja(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return mt(n.join("?"))}const $a=class{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ia,this._overrideRedirectResult=Xo}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Wa(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Dr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Va();Ur("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ur("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ur("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ur("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ur("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Yo.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Ga(),postBody:null,tenantId:e.tenantId,error:Or(e,"no-auth-event")}}(e,n,r);await function(e,t){return Qa()._set(Ya(e),t)}(e,s);const o=await za(e,s,t);return async function(e,t,n){const{cordova:r}=Va();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Or(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ri()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await qa(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Va(),n={};Li()?n.iosBundleId=t.packageName:Ri()?n.androidPackageName=t.packageName:Dr(e,"operation-not-supported-in-this-environment"),await ca(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Va(),s=setTimeout((async()=>{await Ha(e),t.onEvent(Xa())}),500),o=async n=>{clearTimeout(s);const r=await Ha(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Ka(r,n.url)),t.onEvent(i||Xa())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Va().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(YP){console.error(YP)}}}};function Xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Or("no-auth-event")}}function Za(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function el(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return!("file:"!==Za()&&"ionic:"!==Za()&&"capacitor:"!==Za()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function tl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return Xe()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/Edge\/\d+/.test(e)}(e)}function nl(){try{const e=self.localStorage,t=fo();if(e)return e.setItem(t,"1"),e.removeItem(t),!tl()||tt()}catch(YP){return rl()&&tt()}return!1}function rl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function il(){return("http:"===Za()||"https:"===Za()||Je()||el())&&!($e()||Qe())&&nl()&&!rl()}function sl(){return el()&&"undefined"!==typeof document}const ol={LOCAL:"local",NONE:"none",SESSION:"session"},al=Ur,ll="persistence";async function cl(e){await e._initializationPromise;const t=ul(),n=Si(ll,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ul(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(YP){return null}}const hl=Ur;class dl{constructor(){this.browserResolver=Ii(Ra),this.cordovaResolver=Ii($a),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=ia,this._overrideRedirectResult=Xo}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hl(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!sl()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function fl(e){return e.unwrap()}function pl(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new vl(e,function(e,t){var n;const r=Tt(e),i=t;return Ur(t.customData.operationType,r,"argument-error"),Ur(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),no._fromError(r,i)}(e,t))}else if(r){const e=ml(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function ml(e){const{_tokenResponse:t}=e instanceof nt?e.customData:e;if(!t)return null;if(!(e instanceof nt)&&"temporaryProof"in t&&"phoneNumber"in t)return Uo.credentialFromResult(e);const n=t.providerId;if(!n||n===wr.PASSWORD)return null;let r;switch(n){case wr.GOOGLE:r=gs;break;case wr.FACEBOOK:r=ms;break;case wr.GITHUB:r=ys;break;case wr.TWITTER:r=ws;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?vs._create(n,o):as._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ps(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof nt?r.credentialFromError(e):r.credentialFromResult(e)}function gl(e,t){return t.catch((t=>{throw t instanceof nt&&pl(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,ml(r)),additionalUserInfo:eo(e),user:_l.getOrCreate(n)};var r}))}async function yl(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>gl(e,n.confirm(t))}}class vl{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gl(fl(this.auth),this.resolver.resolveSignIn(e))}}class _l{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Tt(e);return io.has(t)||io.set(t,ro._fromUser(t)),io.get(t)}(e)}static getOrCreate(e){return _l.USER_MAP.has(e)||_l.USER_MAP.set(e,new _l(e)),_l.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gl(this.auth,Ds(this._delegate,e))}async linkWithPhoneNumber(e,t){return yl(this.auth,async function(e,t,n){const r=Tt(e);await Ns(!1,r,"phone");const i=await jo(r.auth,t,Tt(n));return new Fo(i,(e=>Ds(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return gl(this.auth,async function(e,t,n){const r=Tt(e);Fr(r.auth,t,ds);const i=Vo(r.auth,n);return new Go(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dl))}async linkWithRedirect(e){return await cl(zi(this.auth)),ra(this._delegate,e,dl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gl(this.auth,Os(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return yl(this.auth,async function(e,t,n){const r=Tt(e);if(qn(r.auth.app))return Promise.reject(Mr(r.auth));const i=await jo(r.auth,t,Tt(n));return new Fo(i,(e=>Os(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return gl(this.auth,async function(e,t,n){const r=Tt(e);if(qn(r.auth.app))return Promise.reject(Or(r.auth,"operation-not-supported-in-this-environment"));Fr(r.auth,t,ds);const i=Vo(r.auth,n);return new Go(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dl))}async reauthenticateWithRedirect(e){return await cl(zi(this.auth)),na(this._delegate,e,dl)}sendEmailVerification(e){return Ws(this._delegate,e)}async unlink(e){return await Cs(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Tt(e);return qn(n.auth.app)?Promise.reject(Mr(n.auth)):Gs(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Gs(Tt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Tt(e);if(qn(n.auth.app))return Promise.reject(Mr(n.auth));await xs(n,t)}(this._delegate,e)}updateProfile(e){return Ks(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Hs(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_l.USER_MAP=new WeakMap;const wl=Ur;class bl{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;wl(n,"invalid-api-key",{appName:e.name}),wl(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?dl:void 0;this._delegate=t.initialize({options:{persistence:kl(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(xr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_l.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Yi(this._delegate,e,t)}applyActionCode(e){return zs(this._delegate,e)}checkActionCode(e){return qs(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Zi(Tt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vs(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gl(this._delegate,async function(e,t,n){if(qn(e.app))return Promise.reject(Mr(e));const r=zi(e),i=Qi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bs),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vs(e),t})),o=await Is._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Bs(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=us.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){wl(il(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await zi(e)._initializationPromise,ia(e,t,!1)}(this._delegate,dl);return e?gl(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){zi(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Il(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Il(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=zi(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Ur(t.handleCodeInApp,r,"argument-error"),t&&Us(r,e,t)}(i,n),await Qi(r,i,"getOobCode",is)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=zi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Us(r,i,n),await Qi(r,i,"getOobCode",rs)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){al(Object.values(ol).includes(t),e,"invalid-persistence-type"),$e()?al(t!==ol.SESSION,e,"unsupported-persistence-type"):Qe()?al(t===ol.NONE,e,"unsupported-persistence-type"):rl()?al(t===ol.NONE||t===ol.LOCAL&&tt(),e,"unsupported-persistence-type"):al(t===ol.NONE||nl(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ol.SESSION:t=uo;break;case ol.LOCAL:t=await Ii(To)._isAvailable()?To:lo;break;case ol.NONE:t=Ei;break;default:return Dr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gl(this._delegate,async function(e){var t;if(qn(e.app))return Promise.reject(Mr(e));const n=zi(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Is({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bs(n,{returnSecureToken:!0}),i=await Is._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return gl(this._delegate,Rs(this._delegate,e))}signInWithCustomToken(e){return gl(this._delegate,Ls(this._delegate,e))}signInWithEmailAndPassword(e,t){return gl(this._delegate,function(e,t,n){return qn(e.app)?Promise.reject(Mr(e)):Rs(Tt(e),hs.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vs(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return gl(this._delegate,async function(e,t,n){if(qn(e.app))return Promise.reject(Mr(e));const r=Tt(e),i=hs.credentialWithLink(t,n||qr());return Ur(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Rs(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return yl(this._delegate,async function(e,t,n){if(qn(e.app))return Promise.reject(Mr(e));const r=zi(e),i=await jo(r,t,Tt(n));return new Fo(i,(e=>Rs(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return wl(il(),this._delegate,"operation-not-supported-in-this-environment"),gl(this._delegate,async function(e,t,n){if(qn(e.app))return Promise.reject(Or(e,"operation-not-supported-in-this-environment"));const r=zi(e);Fr(e,t,ds);const i=Vo(r,n);return new Go(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,dl))}async signInWithRedirect(e){return wl(il(),this._delegate,"operation-not-supported-in-this-environment"),await cl(this._delegate),ta(this._delegate,e,dl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await qs(Tt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Il(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&_l.getOrCreate(e)),error:t,complete:n}}function kl(e,t){const n=function(e,t){const n=ul();if(!n)return[];const r=Si(ll,e,t);switch(n.getItem(r)){case ol.NONE:return[Ei];case ol.LOCAL:return[To,uo];case ol.SESSION:return[uo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(To)||n.push(To),"undefined"!==typeof window)for(const r of[lo,uo])n.includes(r)||n.push(r);return n.includes(Ei)||n.push(Ei),n}bl.Persistence=ol;class El{constructor(){this.providerId="phone",this._delegate=new Uo(fl(vr.auth()))}static credential(e,t){return Uo.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}El.PHONE_SIGN_IN_METHOD=Uo.PHONE_SIGN_IN_METHOD,El.PROVIDER_ID=Uo.PROVIDER_ID;const Sl=Ur;class Tl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr.app();var r;Sl(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Mo(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Cl;(Cl=vr).INTERNAL.registerComponent(new Ct("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new bl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:br,PASSWORD_RESET:Ir,RECOVER_EMAIL:kr,REVERT_SECOND_FACTOR_ADDITION:Er,VERIFY_AND_CHANGE_EMAIL:Sr,VERIFY_EMAIL:Tr}},EmailAuthProvider:hs,FacebookAuthProvider:ms,GithubAuthProvider:ys,GoogleAuthProvider:gs,OAuthProvider:ps,SAMLAuthProvider:_s,PhoneAuthProvider:El,PhoneMultiFactorGenerator:La,RecaptchaVerifier:Tl,TwitterAuthProvider:ws,Auth:bl,AuthCredential:Xi,Error:nt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Cl.registerVersion("@firebase/auth-compat","0.5.9");var xl,Nl,Al="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Nl=Pl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},xl=Pl.Integer=r}).apply("undefined"!==typeof Al?Al:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Rl,Dl,Ol,Ll,Ml,Fl,jl,Ul,Vl,zl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ql={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zl&&zl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){k(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function $(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;b(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function _e(){D.call(this,"c")}h(ve,D),h(_e,D);var we={},be=null;function Ie(){return be=be||new ne}function ke(e){D.call(this,we.La,e)}function Ee(e){const t=Ie();re(t,new ke(t))}function Se(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ie();re(t,new Se(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(ke,D),we.STAT_EVENT="statevent",h(Se,D),we.Ma="timingevent",h(Ce,D),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},je={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),Be(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Ee(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==je){4==d&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=I(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(hN){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),Ge(this),this.s=2,Ke(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(It(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,_t)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,_t=/[#\?@]/g,wt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function It(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){It(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return It(e),t=Tt(e,t),e.g.has(t)}function St(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(YP){throw t.push(r+"type="+encodeURIComponent("_badmap")),YP}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){It(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){It(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){It(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){It(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return It(this),this.i=null,Et(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Pt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var jt=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Bt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(YP){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Hl){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch($x){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),x||(C(),x=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Nt(a,e,"req"+n+"_")}catch(hN){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),x||(C(),x=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ie(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new At({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,_e),h(_n,pn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new yn(e))},_n.prototype.sa=function(e){re(this.g,new vn)},_n.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Vl=ql.createWebChannelTransport=function(){return new mn},Ul=ql.getStatEventTarget=function(){return Ie()},jl=ql.Event=we,Fl=ql.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Ml=ql.ErrorCode=Re,De.COMPLETE="complete",Ll=ql.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ol=ql.WebChannel=ge,Dl=ql.FetchXmlHttpFactory=At,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Rl=ql.XhrIo=Ft}).apply("undefined"!==typeof zl?zl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Bl="@firebase/firestore";class Wl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wl.UNAUTHENTICATED=new Wl(null),Wl.GOOGLE_CREDENTIALS=new Wl("google-credentials-uid"),Wl.FIRST_PARTY=new Wl("first-party-uid"),Wl.MOCK_USER=new Wl("mock-user");let Hl="10.12.1";const Kl=new Ft("@firebase/firestore");function Gl(){return Kl.logLevel}function Ql(e){if(Kl.logLevel<=Rt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($l);Kl.debug("Firestore (".concat(Hl,"): ").concat(e),...i)}}function Yl(e){if(Kl.logLevel<=Rt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($l);Kl.error("Firestore (".concat(Hl,"): ").concat(e),...i)}}function Jl(e){if(Kl.logLevel<=Rt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($l);Kl.warn("Firestore (".concat(Hl,"): ").concat(e),...i)}}function $l(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Hl,") INTERNAL ASSERTION FAILED: ")+e;throw Yl(t),new Error(t)}function Zl(e,t){e||Xl()}function ec(e,t){return e}const tc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nc extends nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class rc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ic{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class sc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wl.UNAUTHENTICATED)))}shutdown(){}}class oc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ac{constructor(e){this.t=e,this.currentUser=Wl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new rc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ql("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ql("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ql("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zl("string"==typeof t.accessToken),new ic(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zl(null===e||"string"==typeof e),new Wl(e)}}class lc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Wl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new lc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Wl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ql("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ql("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ql("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ql("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zl("string"==typeof e.token),this.R=e.token,new uc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class fc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=dc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function pc(e,t){return e<t?-1:e>t?1:0}function mc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gc(e){return e+"\0"}class yc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nc(tc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nc(tc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nc(tc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nc(tc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yc.fromMillis(Date.now())}static fromDate(e){return yc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pc(this.nanoseconds,e.nanoseconds):pc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vc(e)}static min(){return new vc(new yc(0,0))}static max(){return new vc(new yc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _c{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xl(),void 0===n?n=e.length-t:n>e.length-t&&Xl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_c.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _c?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wc extends _c{construct(e,t,n){return new wc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new nc(tc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new wc(e)}static emptyPath(){return new wc([])}}const bc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ic extends _c{construct(e,t,n){return new Ic(e,t,n)}static isValidIdentifier(e){return bc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ic.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ic(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new nc(tc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new nc(tc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nc(tc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new nc(tc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ic(t)}static emptyPath(){return new Ic([])}}class kc{constructor(e){this.path=e}static fromPath(e){return new kc(wc.fromString(e))}static fromName(e){return new kc(wc.fromString(e).popFirst(5))}static empty(){return new kc(wc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kc(new wc(e.slice()))}}class Ec{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sc(e){return e.fields.find((e=>2===e.kind))}function Tc(e){return e.fields.filter((e=>2!==e.kind))}Ec.UNKNOWN_ID=-1;class Cc{constructor(e,t){this.fieldPath=e,this.kind=t}}class xc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xc(0,Pc.min())}}function Nc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vc.fromTimestamp(1e9===r?new yc(n+1,0):new yc(n,r));return new Pc(i,kc.empty(),t)}function Ac(e){return new Pc(e.readTime,e.key,-1)}class Pc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Pc(vc.min(),kc.empty(),-1)}static max(){return new Pc(vc.max(),kc.empty(),-1)}}function Rc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=kc.comparator(e.documentKey,t.documentKey),0!==n?n:pc(e.largestBatchId,t.largestBatchId))}const Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Lc(e){if(e.code!==tc.FAILED_PRECONDITION||e.message!==Dc)throw e;Ql("LocalStore","Unexpectedly lost primary lease")}class Mc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Mc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Mc?t:Mc.resolve(t)}catch(e){return Mc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Mc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Mc.reject(t)}static resolve(e){return new Mc(((t,n)=>{t(e)}))}static reject(e){return new Mc(((t,n)=>{n(e)}))}static waitFor(e){return new Mc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Mc.resolve(!1);for(const n of e)t=t.next((e=>e?Mc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Mc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Mc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Fc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Kc(t.target.error);this.V.reject(new zc(e,n))}}static open(e,t,n,r){try{return new Fc(t,e.transaction(r,n))}catch(e){throw new zc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ql("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bc(t)}}class jc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===jc.S(Ke())&&Yl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ql("SimpleDb","Removing database:",e),Wc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!tt())return!1;if(jc.C())return!0;const e=Ke(),t=jc.S(e),n=0<t&&t<10,r=Uc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ql("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new nc(tc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new nc(tc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new zc(e,r))},r.onupgradeneeded=e=>{Ql("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Ql("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Fc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Mc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ql("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Uc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Vc{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wc(this.B.delete())}}class zc extends nc{constructor(e,t){super(tc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function qc(e){return"IndexedDbTransactionError"===e.name}class Bc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ql("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ql("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Wc(n)}add(e){return Ql("SimpleDb","ADD",this.store.name,e,e),Wc(this.store.add(e))}get(e){return Wc(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ql("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ql("SimpleDb","DELETE",this.store.name,e),Wc(this.store.delete(e))}count(){return Ql("SimpleDb","COUNT",this.store.name),Wc(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Mc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Mc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Ql("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Mc(((n,r)=>{t.onerror=e=>{const t=Kc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Mc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Vc(i),o=t(i.primaryKey,i.value,s);if(o instanceof Mc){const e=o.catch((e=>(s.done(),Mc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Mc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wc(e){return new Mc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Kc(e.target.error);n(t)}}))}let Hc=!1;function Kc(e){const t=jc.S(Ke());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new nc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Hc||(Hc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Gc{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Ql("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ql("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){qc(e)?Ql("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Lc(e)}await this.X(6e4)}))}}class Qc{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Mc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ql("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Ql("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ac(t);Rc(r,n)>0&&(n=r)})),new Pc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Yc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Jc(e){return null==e}function $c(e){return 0===e&&1/e==-1/0}function Xc(e){return"number"==typeof e&&Number.isInteger(e)&&!$c(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Zc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=tu(t)),t=eu(e.get(n),t);return tu(t)}function eu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function tu(e){return e+"\x01\x01"}function nu(e){const t=e.length;if(Zl(t>=2),2===t)return Zl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),wc.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Xl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Xl()}s=t+2}return new wc(r)}Yc.oe=-1;const ru=["userId","batchId"];function iu(e,t){return[e,Zc(t)]}function su(e,t,n){return[e,Zc(t),n]}const ou={},au=["prefixPath","collectionGroup","readTime","documentId"],lu=["prefixPath","collectionGroup","documentId"],cu=["collectionGroup","readTime","prefixPath","documentId"],uu=["canonicalId","targetId"],hu=["targetId","path"],du=["path","targetId"],fu=["collectionId","parent"],pu=["indexId","uid"],mu=["uid","sequenceNumber"],gu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yu=["indexId","uid","orderedDocumentKey"],vu=["userId","collectionPath","documentId"],_u=["userId","collectionPath","largestBatchId"],wu=["userId","collectionGroup","largestBatchId"],bu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Iu=[...bu,"documentOverlays"],ku=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Eu=ku,Su=[...Eu,"indexConfiguration","indexState","indexEntries"],Tu=Su;class Cu extends Oc{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function xu(e,t){const n=ec(e);return jc.F(n._e,t)}function Nu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Au(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ru{constructor(e,t){this.comparator=e,this.root=t||Ou.EMPTY}insert(e,t){return new Ru(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ou.BLACK,null,null))}remove(e){return new Ru(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ou.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ou{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ou.RED,this.left=null!=r?r:Ou.EMPTY,this.right=null!=i?i:Ou.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ou(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ou.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ou.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ou.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ou.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xl();if(this.right.isRed())throw Xl();const e=this.left.check();if(e!==this.right.check())throw Xl();return e+(this.isRed()?0:1)}}Ou.EMPTY=null,Ou.RED=!0,Ou.BLACK=!1,Ou.EMPTY=new class{constructor(){this.size=0}get key(){throw Xl()}get value(){throw Xl()}get color(){throw Xl()}get left(){throw Xl()}get right(){throw Xl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ou(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lu{constructor(e){this.comparator=e,this.data=new Ru(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mu(this.data.getIterator())}getIteratorFrom(e){return new Mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Lu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lu(this.comparator);return t.data=e,t}}class Mu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fu(e){return e.hasNext()?e.getNext():void 0}class ju{constructor(e){this.fields=e,e.sort(Ic.comparator)}static empty(){return new ju([])}unionWith(e){let t=new Lu(Ic.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ju(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Uu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uu("Invalid base64 string: "+e):e}}(e);return new Vu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Vu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vu.EMPTY_BYTE_STRING=new Vu("");const zu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qu(e){if(Zl(!!e),"string"==typeof e){let t=0;const n=zu.exec(e);if(Zl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Bu(e.seconds),nanos:Bu(e.nanos)}}function Bu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wu(e){return"string"==typeof e?Vu.fromBase64String(e):Vu.fromUint8Array(e)}function Hu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ku(e){const t=e.mapValue.fields.__previous_value__;return Hu(t)?Ku(t):t}function Gu(e){const t=qu(e.mapValue.fields.__local_write_time__.timestampValue);return new yc(t.seconds,t.nanos)}class Qu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}const Ju={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$u={nullValue:"NULL_VALUE"};function Xu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hu(e)?4:dh(e)?9007199254740991:10:Xl()}function Zu(e,t){if(e===t)return!0;const n=Xu(e);if(n!==Xu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gu(e).isEqual(Gu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=qu(e.timestampValue),r=qu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wu(e.bytesValue).isEqual(Wu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bu(e.geoPointValue.latitude)===Bu(t.geoPointValue.latitude)&&Bu(e.geoPointValue.longitude)===Bu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bu(e.integerValue)===Bu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Bu(e.doubleValue),r=Bu(t.doubleValue);return n===r?$c(n)===$c(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return mc(e.arrayValue.values||[],t.arrayValue.values||[],Zu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Nu(n)!==Nu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zu(n[i],r[i])))return!1;return!0}(e,t);default:return Xl()}}function eh(e,t){return void 0!==(e.values||[]).find((e=>Zu(e,t)))}function th(e,t){if(e===t)return 0;const n=Xu(e),r=Xu(t);if(n!==r)return pc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Bu(e.integerValue||e.doubleValue),r=Bu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nh(e.timestampValue,t.timestampValue);case 4:return nh(Gu(e),Gu(t));case 5:return pc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Wu(e),r=Wu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=pc(n[i],r[i]);if(0!==e)return e}return pc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pc(Bu(e.latitude),Bu(t.latitude));return 0!==n?n:pc(Bu(e.longitude),Bu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=th(n[i],r[i]);if(e)return e}return pc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ju.mapValue&&t===Ju.mapValue)return 0;if(e===Ju.mapValue)return 1;if(t===Ju.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=pc(r[o],s[o]);if(0!==e)return e;const t=th(n[r[o]],i[s[o]]);if(0!==t)return t}return pc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Xl()}}function nh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pc(e,t);const n=qu(e),r=qu(t),i=pc(n.seconds,r.seconds);return 0!==i?i:pc(n.nanos,r.nanos)}function rh(e){return ih(e)}function ih(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=qu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Wu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return kc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ih(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ih(e.fields[i]));return n+"}"}(e.mapValue):Xl()}function sh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function oh(e){return!!e&&"integerValue"in e}function ah(e){return!!e&&"arrayValue"in e}function lh(e){return!!e&&"nullValue"in e}function ch(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uh(e){return!!e&&"mapValue"in e}function hh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Au(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=hh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=hh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function dh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function fh(e){return"nullValue"in e?$u:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sh(Yu.empty(),kc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xl()}function ph(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sh(Yu.empty(),kc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ju:Xl()}function mh(e,t){const n=th(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gh(e,t){const n=th(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class yh{constructor(e){this.value=e}static empty(){return new yh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hh(t)}setAll(e){let t=Ic.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=hh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];uh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Au(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new yh(hh(this.value))}}function vh(e){const t=[];return Au(e.fields,((e,n)=>{const r=new Ic([e]);if(uh(n)){const e=vh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ju(t)}class _h{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new _h(e,0,vc.min(),vc.min(),vc.min(),yh.empty(),0)}static newFoundDocument(e,t,n,r){return new _h(e,1,t,vc.min(),n,r,0)}static newNoDocument(e,t){return new _h(e,2,t,vc.min(),vc.min(),yh.empty(),0)}static newUnknownDocument(e,t){return new _h(e,3,t,vc.min(),vc.min(),yh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _h&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _h(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wh{constructor(e,t){this.position=e,this.inclusive=t}}function bh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?kc.comparator(kc.fromName(o.referenceValue),n.key):th(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ih(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zu(e.position[n],t.position[n]))return!1;return!0}class kh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Eh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Sh{}class Th extends Sh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Mh(e,t,n):"array-contains"===t?new Vh(e,n):"in"===t?new zh(e,n):"not-in"===t?new qh(e,n):"array-contains-any"===t?new Bh(e,n):new Th(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Fh(e,n):new jh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(th(t,this.value)):null!==t&&Xu(this.value)===Xu(t)&&this.matchesComparison(th(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ch extends Sh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ch(e,t)}matches(e){return xh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xh(e){return"and"===e.op}function Nh(e){return"or"===e.op}function Ah(e){return Ph(e)&&xh(e)}function Ph(e){for(const t of e.filters)if(t instanceof Ch)return!1;return!0}function Rh(e){if(e instanceof Th)return e.field.canonicalString()+e.op.toString()+rh(e.value);if(Ah(e))return e.filters.map((e=>Rh(e))).join(",");{const t=e.filters.map((e=>Rh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Dh(e,t){return e instanceof Th?function(e,t){return t instanceof Th&&e.op===t.op&&e.field.isEqual(t.field)&&Zu(e.value,t.value)}(e,t):e instanceof Ch?function(e,t){return t instanceof Ch&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Dh(n,t.filters[r])),!0)}(e,t):void Xl()}function Oh(e,t){const n=e.filters.concat(t);return Ch.create(n,e.op)}function Lh(e){return e instanceof Th?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(rh(e.value))}(e):e instanceof Ch?function(e){return e.op.toString()+" {"+e.getFilters().map(Lh).join(" ,")+"}"}(e):"Filter"}class Mh extends Th{constructor(e,t,n){super(e,t,n),this.key=kc.fromName(n.referenceValue)}matches(e){const t=kc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fh extends Th{constructor(e,t){super(e,"in",t),this.keys=Uh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jh extends Th{constructor(e,t){super(e,"not-in",t),this.keys=Uh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Uh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>kc.fromName(e.referenceValue)))}class Vh extends Th{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ah(t)&&eh(t.arrayValue,this.value)}}class zh extends Th{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eh(this.value.arrayValue,t)}}class qh extends Th{constructor(e,t){super(e,"not-in",t)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eh(this.value.arrayValue,t)}}class Bh extends Th{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>eh(this.value.arrayValue,e)))}}class Wh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Hh(e){return new Wh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Kh(e){const t=ec(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Rh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Jc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>rh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>rh(e))).join(",")),t.ue=e}return t.ue}function Gh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Eh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Dh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ih(e.startAt,t.startAt)&&Ih(e.endAt,t.endAt)}function Qh(e){return kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Yh(e,t){return e.filters.filter((e=>e instanceof Th&&e.field.isEqual(t)))}function Jh(e,t,n){let r=$u,i=!0;for(const s of Yh(e,t)){let e=$u,t=!0;switch(s.op){case"<":case"<=":e=fh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=$u}mh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];mh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function $h(e,t,n){let r=Ju,i=!0;for(const s of Yh(e,t)){let e=Ju,t=!0;switch(s.op){case">=":case">":e=ph(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ju}gh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];gh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Xh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zh(e,t,n,r,i,s,o,a){return new Xh(e,t,n,r,i,s,o,a)}function ed(e){return new Xh(e)}function td(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nd(e){return null!==e.collectionGroup}function rd(e){const t=ec(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Lu(Ic.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new kh(r,n))})),e.has(Ic.keyField().canonicalString())||t.ce.push(new kh(Ic.keyField(),n))}return t.ce}function id(e){const t=ec(e);return t.le||(t.le=sd(t,rd(e))),t.le}function sd(e,t){if("F"===e.limitType)return Hh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new kh(e.field,t)}));const n=e.endAt?new wh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wh(e.startAt.position,e.startAt.inclusive):null;return Hh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function od(e,t){const n=e.filters.concat([t]);return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ad(e,t,n){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ld(e,t){return Gh(id(e),id(t))&&e.limitType===t.limitType}function cd(e){return"".concat(Kh(id(e)),"|lt:").concat(e.limitType)}function ud(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Lh(e))).join(", "),"]")),Jc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>rh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>rh(e))).join(",")),"Target(".concat(t,")")}(id(e)),"; limitType=").concat(e.limitType,")")}function hd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of rd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,rd(e),t))&&!(e.endAt&&!function(e,t,n){const r=bh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,rd(e),t))}(e,t)}function dd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fd(e){return(t,n)=>{let r=!1;for(const i of rd(e)){const e=pd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function pd(e,t,n){const r=e.field.isKeyField()?kc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?th(r,i):Xl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xl()}}class md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Au(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Pu(this.inner)}size(){return this.innerSize}}const gd=new Ru(kc.comparator);function yd(){return gd}const vd=new Ru(kc.comparator);function _d(){let e=vd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function wd(e){let t=vd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bd(){return kd()}function Id(){return kd()}function kd(){return new md((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ed=new Ru(kc.comparator),Sd=new Lu(kc.comparator);function Td(){let e=Sd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Cd=new Lu(pc);function xd(){return Cd}function Nd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(t)?"-0":t}}function Ad(e){return{integerValue:""+e}}function Pd(e,t){return Xc(t)?Ad(t):Nd(e,t)}class Rd{constructor(){this._=void 0}}function Dd(e,t,n){return e instanceof Md?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Hu(t)&&(t=Ku(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Fd?jd(e,t):e instanceof Ud?Vd(e,t):function(e,t){const n=Ld(e,t),r=qd(n)+qd(e.Pe);return oh(n)&&oh(e.Pe)?Ad(r):Nd(e.serializer,r)}(e,t)}function Od(e,t,n){return e instanceof Fd?jd(e,t):e instanceof Ud?Vd(e,t):n}function Ld(e,t){return e instanceof zd?function(e){return oh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Md extends Rd{}class Fd extends Rd{constructor(e){super(),this.elements=e}}function jd(e,t){const n=Bd(t);for(const r of e.elements)n.some((e=>Zu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ud extends Rd{constructor(e){super(),this.elements=e}}function Vd(e,t){let n=Bd(t);for(const r of e.elements)n=n.filter((e=>!Zu(e,r)));return{arrayValue:{values:n}}}class zd extends Rd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function qd(e){return Bu(e.integerValue||e.doubleValue)}function Bd(e){return ah(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Wd{constructor(e,t){this.field=e,this.transform=t}}class Hd{constructor(e,t){this.version=e,this.transformResults=t}}class Kd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kd}static exists(e){return new Kd(void 0,e)}static updateTime(e){return new Kd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Qd{}function Yd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new of(e.key,Kd.none()):new ef(e.key,e.data,Kd.none());{const n=e.data,r=yh.empty();let i=new Lu(Ic.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new tf(e.key,r,new ju(i.toArray()),Kd.none())}}function Jd(e,t,n){e instanceof ef?function(e,t,n){const r=e.value.clone(),i=rf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof tf?function(e,t,n){if(!Gd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $d(e,t,n,r){return e instanceof ef?function(e,t,n,r){if(!Gd(e.precondition,t))return n;const i=e.value.clone(),s=sf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof tf?function(e,t,n,r){if(!Gd(e.precondition,t))return n;const i=sf(e.fieldTransforms,r,t),s=t.data;return s.setAll(nf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ld(r.transform,e||null);null!=i&&(null===n&&(n=yh.empty()),n.set(r.field,i))}return n||null}function Zd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&mc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fd&&t instanceof Fd||e instanceof Ud&&t instanceof Ud?mc(e.elements,t.elements,Zu):e instanceof zd&&t instanceof zd?Zu(e.Pe,t.Pe):e instanceof Md&&t instanceof Md}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ef extends Qd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tf extends Qd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function rf(e,t,n){const r=new Map;Zl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Od(o,a,n[i]))}return r}function sf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dd(e,s,t))}return r}class of extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class af extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Jd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Id();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Yd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(vc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Td())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,((e,t)=>Zd(e,t)))&&mc(this.baseMutations,e.baseMutations,((e,t)=>Zd(e,t)))}}class cf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zl(e.mutations.length===n.length);let r=Ed;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new cf(e,t,n,r)}}class uf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class hf{constructor(e,t){this.count=e,this.unchangedNames=t}}var df,ff;function pf(e){switch(e){default:return Xl();case tc.CANCELLED:case tc.UNKNOWN:case tc.DEADLINE_EXCEEDED:case tc.RESOURCE_EXHAUSTED:case tc.INTERNAL:case tc.UNAVAILABLE:case tc.UNAUTHENTICATED:return!1;case tc.INVALID_ARGUMENT:case tc.NOT_FOUND:case tc.ALREADY_EXISTS:case tc.PERMISSION_DENIED:case tc.FAILED_PRECONDITION:case tc.ABORTED:case tc.OUT_OF_RANGE:case tc.UNIMPLEMENTED:case tc.DATA_LOSS:return!0}}function mf(e){if(void 0===e)return Yl("GRPC error has no .code"),tc.UNKNOWN;switch(e){case df.OK:return tc.OK;case df.CANCELLED:return tc.CANCELLED;case df.UNKNOWN:return tc.UNKNOWN;case df.DEADLINE_EXCEEDED:return tc.DEADLINE_EXCEEDED;case df.RESOURCE_EXHAUSTED:return tc.RESOURCE_EXHAUSTED;case df.INTERNAL:return tc.INTERNAL;case df.UNAVAILABLE:return tc.UNAVAILABLE;case df.UNAUTHENTICATED:return tc.UNAUTHENTICATED;case df.INVALID_ARGUMENT:return tc.INVALID_ARGUMENT;case df.NOT_FOUND:return tc.NOT_FOUND;case df.ALREADY_EXISTS:return tc.ALREADY_EXISTS;case df.PERMISSION_DENIED:return tc.PERMISSION_DENIED;case df.FAILED_PRECONDITION:return tc.FAILED_PRECONDITION;case df.ABORTED:return tc.ABORTED;case df.OUT_OF_RANGE:return tc.OUT_OF_RANGE;case df.UNIMPLEMENTED:return tc.UNIMPLEMENTED;case df.DATA_LOSS:return tc.DATA_LOSS;default:return Xl()}}(ff=df||(df={}))[ff.OK=0]="OK",ff[ff.CANCELLED=1]="CANCELLED",ff[ff.UNKNOWN=2]="UNKNOWN",ff[ff.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ff[ff.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ff[ff.NOT_FOUND=5]="NOT_FOUND",ff[ff.ALREADY_EXISTS=6]="ALREADY_EXISTS",ff[ff.PERMISSION_DENIED=7]="PERMISSION_DENIED",ff[ff.UNAUTHENTICATED=16]="UNAUTHENTICATED",ff[ff.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ff[ff.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ff[ff.ABORTED=10]="ABORTED",ff[ff.OUT_OF_RANGE=11]="OUT_OF_RANGE",ff[ff.UNIMPLEMENTED=12]="UNIMPLEMENTED",ff[ff.INTERNAL=13]="INTERNAL",ff[ff.UNAVAILABLE=14]="UNAVAILABLE",ff[ff.DATA_LOSS=15]="DATA_LOSS";let gf=null;function yf(){return new TextEncoder}const vf=new xl([4294967295,4294967295],0);function _f(e){const t=yf().encode(e),n=new Nl;return n.update(t),new Uint8Array(n.digest())}function wf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new xl([n,r],0),new xl([i,s],0)]}class bf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new If("Invalid padding: ".concat(t));if(n<0)throw new If("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new If("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new If("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=xl.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(xl.fromNumber(n)));return 1===r.compare(vf)&&(r=new xl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=_f(e),[n,r]=wf(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new bf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=_f(e),[n,r]=wf(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class If extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new kf(vc.min(),r,new Ru(pc),yd(),Td())}}class Ef{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ef(n,t,Td(),Td(),Td())}}class Sf{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Tf{constructor(e,t){this.targetId=e,this.me=t}}class Cf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class xf{constructor(){this.fe=0,this.ge=Pf(),this.pe=Vu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Td(),t=Td(),n=Td();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xl()}})),new Ef(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Pf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zl(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nf{constructor(e){this.Le=e,this.Be=new Map,this.ke=yd(),this.qe=Af(),this.Qe=new Ru(pc)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Xl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Qh(i))if(0===n){const e=new kc(i.path);this.Ue(t,e,_h.newNoDocument(e,vc.min()))}else Zl(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==gf||gf.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Wu(n).toUint8Array()}catch(e){if(e instanceof Uu)return Jl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new bf(s,r,i)}catch(e){return Jl(e instanceof If?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Qh(i.target)){const t=new kc(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,_h.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Td();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new kf(e,t,this.Qe,this.ke,n);return this.ke=yd(),this.qe=Af(),this.Qe=new Ru(pc),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new xf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lu(pc),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ql("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xf),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Af(){return new Ru(kc.comparator)}function Pf(){return new Ru(kc.comparator)}const Rf={asc:"ASCENDING",desc:"DESCENDING"},Df={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Of={and:"AND",or:"OR"};class Lf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mf(e,t){return e.useProto3Json||Jc(t)?t:{value:t}}function Ff(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Uf(e,t){return Ff(e,t.toTimestamp())}function Vf(e){return Zl(!!e),vc.fromTimestamp(function(e){const t=qu(e);return new yc(t.seconds,t.nanos)}(e))}function zf(e,t){return qf(e,t).canonicalString()}function qf(e,t){const n=function(e){return new wc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Bf(e){const t=wc.fromString(e);return Zl(hp(t)),t}function Wf(e,t){return zf(e.databaseId,t.path)}function Hf(e,t){const n=Bf(t);if(n.get(1)!==e.databaseId.projectId)throw new nc(tc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nc(tc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kc(Yf(n))}function Kf(e,t){return zf(e.databaseId,t)}function Gf(e){const t=Bf(e);return 4===t.length?wc.emptyPath():Yf(t)}function Qf(e){return new wc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yf(e){return Zl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jf(e,t,n){return{name:Wf(e,t),fields:n.value.mapValue.fields}}function $f(e,t,n){const r=Hf(e,t.name),i=Vf(t.updateTime),s=t.createTime?Vf(t.createTime):vc.min(),o=new yh({mapValue:{fields:t.fields}}),a=_h.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Xf(e,t){let n;if(t instanceof ef)n={update:Jf(e,t.key,t.value)};else if(t instanceof of)n={delete:Wf(e,t.key)};else if(t instanceof tf)n={update:Jf(e,t.key,t.data),updateMask:up(t.fieldMask)};else{if(!(t instanceof af))return Xl();n={verify:Wf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Md)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ud)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zd)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Xl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xl()}(e,t.precondition)),n}function Zf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Kd.updateTime(Vf(e.updateTime)):void 0!==e.exists?Kd.exists(e.exists):Kd.none()}(t.currentDocument):Kd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Zl("REQUEST_TIME"===t.setToServerValue),n=new Md;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Fd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ud(e)}else"increment"in t?n=new zd(e,t.increment):Xl();const r=Ic.fromServerFormat(t.fieldPath);return new Wd(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Hf(e,t.update.name),s=new yh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ju(t.map((e=>Ic.fromServerFormat(e))))}(t.updateMask);return new tf(i,s,e,n,r)}return new ef(i,s,n,r)}if(t.delete){const r=Hf(e,t.delete);return new of(r,n)}if(t.verify){const r=Hf(e,t.verify);return new af(r,n)}return Xl()}function ep(e,t){return{documents:[Kf(e,t.path)]}}function tp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kf(e,i);const s=function(e){if(0!==e.length)return cp(Ch.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ap(e.field),direction:ip(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mf(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function np(e){let t=Gf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=rp(e);return t instanceof Ch&&Ah(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new kh(lp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Jc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wh(n,t)}(n.endAt)),Zh(t,i,o,s,a,"F",l,c)}function rp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lp(e.unaryFilter.field);return Th.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=lp(e.unaryFilter.field);return Th.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lp(e.unaryFilter.field);return Th.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lp(e.unaryFilter.field);return Th.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xl()}}(e):void 0!==e.fieldFilter?function(e){return Th.create(lp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ch.create(e.compositeFilter.filters.map((e=>rp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xl()}}(e.compositeFilter.op))}(e):Xl()}function ip(e){return Rf[e]}function sp(e){return Df[e]}function op(e){return Of[e]}function ap(e){return{fieldPath:e.canonicalString()}}function lp(e){return Ic.fromServerFormat(e.fieldPath)}function cp(e){return e instanceof Th?function(e){if("=="===e.op){if(ch(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NAN"}};if(lh(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ch(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NOT_NAN"}};if(lh(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(e.field),op:sp(e.op),value:e.value}}}(e):e instanceof Ch?function(e){const t=e.getFilters().map((e=>cp(e)));return 1===t.length?t[0]:{compositeFilter:{op:op(e.op),filters:t}}}(e):Xl()}function up(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function hp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class dp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vc.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new dp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fp{constructor(e){this.ct=e}}function pp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Wf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ff(e,t.version.toTimestamp()),createTime:Ff(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:gp(t.version)};else{if(!t.isUnknownDocument())return Xl();r.unknownDocument={path:n.path.toArray(),version:gp(t.version)}}return r}function mp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function gp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function yp(e){const t=new yc(e.seconds,e.nanoseconds);return vc.fromTimestamp(t)}function vp(e,t){const n=(t.baseMutations||[]).map((t=>Zf(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Zf(e.ct,t))),i=yc.fromMillis(t.localWriteTimeMs);return new lf(t.batchId,i,n,r)}function _p(e){const t=yp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?yp(e.lastLimboFreeSnapshotVersion):vc.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Zl(1===e.documents.length),id(ed(Gf(e.documents[0])))}(e.query):function(e){return id(np(e))}(e.query),new dp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Vu.fromBase64String(e.resumeToken))}function wp(e,t){const n=gp(t.snapshotVersion),r=gp(t.lastLimboFreeSnapshotVersion);let i;i=Qh(t.target)?ep(e.ct,t.target):tp(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bp(e){const t=np({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ad(t,t.limit,"L"):t}function Ip(e,t){return new uf(t.largestBatchId,Zf(e.ct,t.overlayMutation))}function kp(e,t){const n=t.path.lastSegment();return[e,Zc(t.path.popLast()),n]}function Ep(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:gp(r.readTime),documentKey:Zc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Sp{getBundleMetadata(e,t){return Tp(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:yp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Tp(e).put(function(e){return{bundleId:e.id,createTime:gp(Vf(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Cp(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:bp(e.bundledQuery),readTime:yp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Cp(e).put(function(e){return{name:e.name,readTime:gp(Vf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Tp(e){return xu(e,"bundles")}function Cp(e){return xu(e,"namedQueries")}class xp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new xp(e,n)}getOverlay(e,t){return Np(e).get(kp(this.userId,t)).next((e=>e?Ip(this.serializer,e):null))}getOverlays(e,t){const n=bd();return Mc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new uf(t,i);r.push(this.ht(e,s))})),Mc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Zc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Np(e).j("collectionPathOverlayIndex",r))})),Mc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=bd(),i=Zc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Np(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Ip(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=bd();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Np(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Ip(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Np(e).put(function(e,t,n){const[r,i,s]=kp(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Np(e){return xu(e,"documentOverlays")}class Ap{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Bu(e.integerValue));else if("doubleValue"in e){const n=Bu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),$c(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=qu(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Wu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?dh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Xl()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),kc.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Pp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Rp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Pp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ap.bt=new Ap;class Dp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=Rp(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=Rp(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Op{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Lp{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Mp{constructor(){this.Gt=new Dp,this.zt=new Op(this.Gt),this.jt=new Lp(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Fp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Fp(this.indexId,this.documentKey,this.arrayValue,n)}}function jp(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Up(e.arrayValue,t.arrayValue),0!==n?n:(n=Up(e.directionalValue,t.directionalValue),0!==n?n:kc.comparator(e.documentKey,t.documentKey)))}function Up(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Vp{constructor(e){this.Yt=new Lu(((e,t)=>Ic.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Zl(e.collectionGroup===this.collectionId),this.en)return!1;const t=Sc(e);if(void 0!==t&&!this.nn(t))return!1;const n=Tc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Lu(Ic.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Cc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Cc(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Cc(n.field,"asc"===n.dir?0:1)));return new Ec(Ec.UNKNOWN_ID,this.collectionId,t,xc.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zp(e){var t,n;if(Zl(e instanceof Th||e instanceof Ch),e instanceof Th){if(e instanceof zh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Th.create(e.field,"==",t))))||[];return Ch.create(r,"or")}return e}const r=e.filters.map((e=>zp(e)));return Ch.create(r,e.op)}function qp(e){if(0===e.getFilters().length)return[];const t=Kp(zp(e));return Zl(Hp(t)),Bp(t)||Wp(t)?[t]:t.getFilters()}function Bp(e){return e instanceof Th}function Wp(e){return e instanceof Ch&&Ah(e)}function Hp(e){return Bp(e)||Wp(e)||function(e){if(e instanceof Ch&&Nh(e)){for(const t of e.getFilters())if(!Bp(t)&&!Wp(t))return!1;return!0}return!1}(e)}function Kp(e){if(Zl(e instanceof Th||e instanceof Ch),e instanceof Th)return e;if(1===e.filters.length)return Kp(e.filters[0]);const t=e.filters.map((e=>Kp(e)));let n=Ch.create(t,e.op);return n=Yp(n),Hp(n)?n:(Zl(n instanceof Ch),Zl(xh(n)),Zl(n.filters.length>1),n.filters.reduce(((e,t)=>Gp(e,t))))}function Gp(e,t){let n;return Zl(e instanceof Th||e instanceof Ch),Zl(t instanceof Th||t instanceof Ch),n=e instanceof Th?t instanceof Th?function(e,t){return Ch.create([e,t],"and")}(e,t):Qp(e,t):t instanceof Th?Qp(t,e):function(e,t){if(Zl(e.filters.length>0&&t.filters.length>0),xh(e)&&xh(t))return Oh(e,t.getFilters());const n=Nh(e)?e:t,r=Nh(e)?t:e,i=n.filters.map((e=>Gp(e,r)));return Ch.create(i,"or")}(e,t),Yp(n)}function Qp(e,t){if(xh(t))return Oh(t,e.getFilters());{const n=t.filters.map((t=>Gp(e,t)));return Ch.create(n,"or")}}function Yp(e){if(Zl(e instanceof Th||e instanceof Ch),e instanceof Th)return e;const t=e.getFilters();if(1===t.length)return Yp(t[0]);if(Ph(e))return e;const n=t.map((e=>Yp(e))),r=[];return n.forEach((t=>{t instanceof Th?r.push(t):t instanceof Ch&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ch.create(r,e.op)}class Jp{constructor(){this._n=new $p}addToCollectionParentIndex(e,t){return this._n.add(t),Mc.resolve()}getCollectionParents(e,t){return Mc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Mc.resolve()}deleteFieldIndex(e,t){return Mc.resolve()}deleteAllFieldIndexes(e){return Mc.resolve()}createTargetIndexes(e,t){return Mc.resolve()}getDocumentsMatchingTarget(e,t){return Mc.resolve(null)}getIndexType(e,t){return Mc.resolve(0)}getFieldIndexes(e,t){return Mc.resolve([])}getNextCollectionGroupToUpdate(e){return Mc.resolve(null)}getMinOffset(e,t){return Mc.resolve(Pc.min())}getMinOffsetFromCollectionGroup(e,t){return Mc.resolve(Pc.min())}updateCollectionGroup(e,t,n){return Mc.resolve()}updateIndexEntries(e,t){return Mc.resolve()}}class $p{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lu(wc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Lu(wc.comparator)).toArray()}}const Xp=new Uint8Array(0);class Zp{constructor(e,t){this.databaseId=t,this.an=new $p,this.un=new md((e=>Kh(e)),((e,t)=>Gh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Zc(r)};return em(e).put(i)}return Mc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gc(t),""],!1,!0);return em(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(nu(r.parent))}return n}))}addFieldIndex(e,t){const n=nm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=rm(e);return i.next((e=>{n.put(Ep(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=nm(e),r=rm(e),i=tm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=nm(e),n=tm(e),r=rm(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Mc.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Vp(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=tm(e);let r=!0;const i=new Map;return Mc.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Td();const r=[];return Mc.forEach(i,((i,s)=>{Ql("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Kh(t)));const o=function(e,t){const n=Sc(t);if(void 0===n)return null;for(const r of Yh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Tc(t))for(const t of Yh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Tc(t)){const t=0===i.kind?Jh(e,i.fieldPath,e.startAt):$h(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new wh(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Tc(t)){const t=0===i.kind?$h(e,i.fieldPath,e.endAt):Jh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new wh(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Mc.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=kc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Mc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qp(Ch.create(e.filters,"and")).map((t=>Hh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Xp,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new Fp(e,kc.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Fp(e,kc.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Vp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Mc.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Lu(Ic.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Mp;for(const r of Tc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ap.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Mp;return Ap.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Mp;return Ap.bt.Pt(sh(this.databaseId,t),n.Ht(function(e){const t=Tc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Mp);let i=0;for(const s of Tc(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&ah(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Ap.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Mp;n.seed(e.Wt()),Ap.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Th&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=nm(e),r=rm(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Mc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new xc(t.sequenceNumber,new Pc(yp(t.readTime),new kc(nu(t.documentKey)),t.largestBatchId)):xc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Cc(Ic.fromServerFormat(t),n)}));return new Ec(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=nm(e),i=rm(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Mc.forEach(t,(t=>i.put(Ep(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Mc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Mc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Mc.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Mc.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return tm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return tm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=tm(e);let i=new Lu(jp);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Fp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Lu(jp);const r=this.An(t,e);if(null==r)return n;const i=Sc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(ah(s))for(const i of s.arrayValue.values||[])n=n.add(new Fp(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Fp(t.indexId,e.key,Xp,r));return n}wn(e,t,n,r,i){Ql("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Fu(s),l=Fu(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Fu(o)):t?(i(a),a=Fu(s)):(a=Fu(s),l=Fu(o))}}(r,i,jp,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Mc.waitFor(s)}gn(e){let t=1;return rm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>jp(e,t))).filter(((e,t,n)=>!t||0!==jp(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=jp(s,e),i=jp(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Xp,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Xp,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return jp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(im)}getMinOffset(e,t){return Mc.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Xl())))).next(im)}}function em(e){return xu(e,"collectionParents")}function tm(e){return xu(e,"indexEntries")}function nm(e){return xu(e,"indexConfiguration")}function rm(e){return xu(e,"indexState")}function im(e){Zl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Rc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Pc(t.readTime,t.documentKey,n)}const sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class om{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new om(e,om.DEFAULT_COLLECTION_PERCENTILE,om.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function am(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Zl(1===a)})));const c=[];for(const u of n.mutations){const e=su(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Mc.waitFor(s).next((()=>c))}function lm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xl();t=e.noDocument}return JSON.stringify(t).length}om.DEFAULT_COLLECTION_PERCENTILE=10,om.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,om.DEFAULT=new om(41943040,om.DEFAULT_COLLECTION_PERCENTILE,om.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),om.DISABLED=new om(-1,0,0);class cm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Zl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new cm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hm(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=dm(e),s=hm(e);return s.add({}).next((o=>{Zl("number"==typeof o);const a=new lf(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Xf(e.ct,t))),i=n.mutations.map((t=>Xf(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Lu(((e,t)=>pc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=su(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,ou))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Mc.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return hm(e).get(t).next((e=>e?(Zl(e.userId===this.userId),vp(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Mc.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return hm(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Zl(t.batchId>=n),i=vp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return hm(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hm(e).U("userMutationsIndex",t).next((e=>e.map((e=>vp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=iu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return dm(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=nu(a);if(o===this.userId&&t.path.isEqual(c))return hm(e).get(l).next((e=>{if(!e)throw Xl();Zl(e.userId===this.userId),i.push(vp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lu(pc);const r=[];return t.forEach((t=>{const i=iu(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=dm(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=nu(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Mc.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=iu(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Lu(pc);return dm(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=nu(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(hm(e).get(t).next((e=>{if(null===e)throw Xl();Zl(e.userId===this.userId),n.push(vp(this.serializer,e))})))})),Mc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return am(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Mc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Mc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return dm(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=nu(e[1]);r.push(t)}else n.done()})).next((()=>{Zl(0===r.length)}))}))}containsKey(e,t){return um(e,this.userId,t)}xn(e){return fm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function um(e,t,n){const r=iu(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return dm(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function hm(e){return xu(e,"mutations")}function dm(e){return xu(e,"documentMutations")}function fm(e){return xu(e,"mutationQueues")}class pm{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new pm(0)}static Ln(){return new pm(-1)}}class mm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new pm(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>vc.fromTimestamp(new yc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>gm(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Zl(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return gm(e).J(((s,o)=>{const a=_p(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Mc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return gm(e).J(((e,n)=>{const r=_p(n);t(r)}))}Bn(e){return ym(e).get("targetGlobalKey").next((e=>(Zl(null!==e),e)))}kn(e,t){return ym(e).put("targetGlobalKey",t)}qn(e,t){return gm(e).put(wp(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Kh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return gm(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=_p(n);Gh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=vm(e);return t.forEach((t=>{const s=Zc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Mc.waitFor(r)}removeMatchingKeys(e,t,n){const r=vm(e);return Mc.forEach(t,(t=>{const i=Zc(t.path);return Mc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=vm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=vm(e);let i=Td();return r.J({range:n,H:!0},((e,t,n)=>{const r=nu(e[1]),s=new kc(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Zc(t.path),r=IDBKeyRange.bound([n],[gc(n)],!1,!0);let i=0;return vm(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return gm(e).get(t).next((e=>e?_p(e):null))}}function gm(e){return xu(e,"targets")}function ym(e){return xu(e,"targetGlobal")}function vm(e){return xu(e,"targetDocuments")}function _m(e,t){let[n,r]=e,[i,s]=t;const o=pc(n,i);return 0===o?pc(r,s):o}class wm{constructor(e){this.Kn=e,this.buffer=new Lu(_m),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();_m(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Ql("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qc(e)?Ql("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Lc(e)}await this.zn(3e5)}))}}class Im{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Mc.resolve(Yc.oe);const n=new wm(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ql("LruGarbageCollector","Garbage collection skipped; disabled"),Mc.resolve(sm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ql("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),sm):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ql("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Gl()<=Rt.DEBUG&&Ql("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Mc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function km(e,t){return new Im(e,t)}class Em{constructor(e,t){this.db=e,this.garbageCollector=km(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Sm(e,n)}removeReference(e,t,n){return Sm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Sm(e,t)}er(e,t){return function(e,t){let n=!1;return fm(e).Y((r=>um(e,r,t).next((e=>(e&&(n=!0),Mc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,vc.min()),vm(e).delete(function(e){return[0,Zc(e.path)]}(s)))))}));r.push(t)}})).next((()=>Mc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Sm(e,t)}Xn(e,t){const n=vm(e);let r,i=Yc.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Yc.oe&&t(new kc(nu(r)),i),i=l,r=a):i=Yc.oe})).next((()=>{i!==Yc.oe&&t(new kc(nu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sm(e,t){return vm(e).put(function(e,t){return{targetId:0,path:Zc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Tm{constructor(){this.changes=new md((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_h.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Mc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Pm(e).put(n)}removeEntry(e,t,n){return Pm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],mp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=_h.newInvalidDocument(t);return Pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rm(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:_h.newInvalidDocument(t)};return Pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rm(t))},((e,r)=>{n={document:this.nr(t,r),size:lm(r)}})).next((()=>n))}getEntries(e,t){let n=yd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=yd(),r=new Ru(kc.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,lm(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Mc.resolve();let r=new Lu(Om);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Rm(r.first()),Rm(r.last())),s=r.getIterator();let o=s.getNext();return Pm(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=kc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Om(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(Rm(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),mp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pm(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=yd();for(const i of e){const e=this.nr(kc.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(hd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=yd();const s=Dm(t,n),o=Dm(t,Pc.max());return Pm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(kc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Nm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Am(e).get("remoteDocumentGlobalKey").next((e=>(Zl(!!e),e)))}tr(e,t){return Am(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=$f(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=kc.fromSegments(t.noDocument.path),r=yp(t.noDocument.readTime);n=_h.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xl();{const e=kc.fromSegments(t.unknownDocument.path),r=yp(t.unknownDocument.version);n=_h.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new yc(e[0],e[1]);return vc.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(vc.min()))return e}return _h.newInvalidDocument(e)}}function xm(e){return new Cm(e)}class Nm extends Tm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new md((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Lu(((e,t)=>pc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=pp(this.ar.serializer,s);r=r.add(i.path.popLast());const l=lm(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=pp(this.ar.serializer,s.convertToNoDocument(vc.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Mc.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Am(e){return xu(e,"remoteDocumentGlobal")}function Pm(e){return xu(e,"remoteDocumentsV14")}function Rm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Dm(e,t){const n=t.documentKey.path.toArray();return[e,mp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Om(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=pc(n[s],r[s]),i)return i;return i=pc(n.length,r.length),i||(i=pc(n[n.length-2],r[r.length-2]),i||pc(n[n.length-1],r[r.length-1]))}class Lm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Mm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&$d(n.mutation,e,ju.empty(),yc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Td()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Td();const r=bd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=_d();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Td())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=yd();const s=kd(),o=kd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof tf)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),$d(o.mutation,t,o.mutation.getFieldMask(),yc.now())):s.set(t.key,ju.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Lm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=kd();let r=new Ru(((e,t)=>e-t)),i=Td();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ju.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Td()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Id();l.forEach((e=>{if(!i.has(e)){const r=Yd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Mc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Mc.resolve(bd());let o=-1,a=i;return s.next((t=>Mc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Mc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Td()))).next((e=>({batchId:o,changes:wd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kc(t)).next((e=>{let t=_d();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=_d();return this.indexManager.getCollectionParents(e,i).next((o=>Mc.forEach(o,(o=>{const a=function(e,t){return new Xh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,_h.newInvalidDocument(r)))}));let n=_d();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&$d(s.mutation,r,ju.empty(),yc.now()),hd(t,r)&&(n=n.insert(e,r))})),n}))}}class Fm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Mc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vf(e.createTime)}}(t)),Mc.resolve()}getNamedQuery(e,t){return Mc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:bp(e.bundledQuery),readTime:Vf(e.readTime)}}(t)),Mc.resolve()}}class jm{constructor(){this.overlays=new Ru(kc.comparator),this.hr=new Map}getOverlay(e,t){return Mc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bd();return Mc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Mc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Mc.resolve()}getOverlaysForCollection(e,t,n){const r=bd(),i=t.length+1,s=new kc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Mc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ru(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=bd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Mc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new uf(t,n));let i=this.hr.get(t);void 0===i&&(i=Td(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Um{constructor(){this.Pr=new Lu(Vm.Ir),this.Tr=new Lu(Vm.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Vm(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Vm(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new kc(new wc([])),n=new Vm(t,e),r=new Vm(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new kc(new wc([])),n=new Vm(t,e),r=new Vm(t,e+1);let i=Td();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Vm(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vm{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return kc.comparator(e.key,t.key)||pc(e.pr,t.pr)}static Er(e,t){return pc(e.pr,t.pr)||kc.comparator(e.key,t.key)}}class zm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Lu(Vm.Ir)}checkEmpty(e){return Mc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new lf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Vm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Mc.resolve(s)}lookupMutationBatch(e,t){return Mc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Mc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Mc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Mc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vm(t,0),r=new Vm(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Mc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lu(pc);return t.forEach((e=>{const t=new Vm(e,0),r=new Vm(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Mc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;kc.isDocumentKey(i)||(i=i.child(""));const s=new Vm(new kc(i),0);let o=new Lu(pc);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Mc.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zl(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Mc.forEach(t.mutations,(r=>{const i=new Vm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Vm(t,0),r=this.wr.firstAfterOrEqual(n);return Mc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Mc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qm{constructor(e){this.vr=e,this.docs=new Ru(kc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Mc.resolve(n?n.document.mutableCopy():_h.newInvalidDocument(t))}getEntries(e,t){let n=yd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():_h.newInvalidDocument(e))})),Mc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=yd();const s=t.path,o=new kc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Rc(Ac(o),n)<=0||(r.has(o.key)||hd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Mc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Xl()}Fr(e,t){return Mc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bm(this)}getSize(e){return Mc.resolve(this.size)}}class Bm extends Tm{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Mc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Wm{constructor(e){this.persistence=e,this.Mr=new md((e=>Kh(e)),Gh),this.lastRemoteSnapshotVersion=vc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Um,this.targetCount=0,this.Lr=pm.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Mc.resolve()}getLastRemoteSnapshotVersion(e){return Mc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Mc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Mc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Mc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new pm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Mc.resolve()}updateTargetData(e,t){return this.qn(t),Mc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Mc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Mc.waitFor(i).next((()=>r))}getTargetCount(e){return Mc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Mc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Mc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Mc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Mc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Mc.resolve(n)}containsKey(e,t){return Mc.resolve(this.Nr.containsKey(t))}}class Hm{constructor(e,t){this.Br={},this.overlays={},this.kr=new Yc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Wm(this),this.indexManager=new Jp,this.remoteDocumentCache=function(e){return new qm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new fp(t),this.$r=new Fm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new zm(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ql("MemoryPersistence","Starting transaction:",e);const r=new Km(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Mc.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Km extends Oc{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.zr=new Um,this.jr=null}static Hr(e){return new Gm(e)}get Jr(){if(this.jr)return this.jr;throw Xl()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Mc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Mc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Mc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mc.forEach(this.Jr,(n=>{const r=kc.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,vc.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Mc.or([()=>Mc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Qm{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Fc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ru,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ym(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Mc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ym(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vc.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ru,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Mc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:vu});t.createIndex("collectionPathOverlayIndex",_u,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:au});t.createIndex("documentKeyIndex",lu),t.createIndex("collectionGroupIndex",cu)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pu}).createIndex("sequenceNumberIndex",mu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gu}).createIndex("documentKeyIndex",yu,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=lm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Mc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Mc.forEach(n,(n=>{Zl(n.userId===t.userId);const r=vp(this.serializer,n);return am(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new wc(n),o=function(e){return[0,Zc(e)]}(s);r.push(t.get(o).next((n=>n?Mc.resolve():(n=>t.put({targetId:0,path:Zc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Mc.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:fu});const n=t.store("collectionParents"),r=new $p,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Zc(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new wc(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=nu(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=_p(n),i=wp(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new kc(wc.fromString(e.document.name).popFirst(5)):e.noDocument?kc.fromSegments(e.noDocument.path):e.unknownDocument?kc.fromSegments(e.unknownDocument.path):Xl()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Mc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=xm(this.serializer),i=new Hm(Gm.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Td();vp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Mc.forEach(n,((e,n)=>{const s=new Wl(n),o=xp.lt(this.serializer,s),a=i.getIndexManager(s),l=cm.lt(s,this.serializer,a,i.referenceDelegate);return new Mm(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Cu(t,Yc.oe),e).next()}))}))}}function Ym(e){e.createObjectStore("targetDocuments",{keyPath:hu}).createIndex("documentTargetsIndex",du,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uu,{unique:!0}),e.createObjectStore("targetGlobal")}const Jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $m{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!$m.D())throw new nc(tc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Em(this,r),this.Ti=t+"main",this.serializer=new fp(a),this.Ei=new jc(this.Ti,this.ui,new Qm(this.serializer)),this.Qr=new mm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xm(this.serializer),this.$r=new Sp,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Yl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nc(tc.FAILED_PRECONDITION,Jm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Yc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Zm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(qc(e))return Ql("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ql("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Xm(e).get("owner").next((e=>Mc.resolve(this.Si(e))))}bi(e){return Zm(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=xu(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Mc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Mc.resolve(!0):Xm(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new nc(tc.FAILED_PRECONDITION,Jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zm(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ql("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Cu(e,Yc.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Zm(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return cm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zp(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Ql("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Tu:15===e?Su:14===e?Eu:13===e?ku:12===e?Iu:11===e?bu:void Xl()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Cu(r,this.kr?this.kr.next():Yc.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Yl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new nc(tc.FAILED_PRECONDITION,Dc);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Xm(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nc(tc.FAILED_PRECONDITION,Jm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xm(e).put("owner",t)}static D(){return jc.D()}yi(e){const t=Xm(e);return t.get("owner").next((e=>this.Si(e)?(Ql("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Mc.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Yl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;et()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ql("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Yl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(YP){Yl("Failed to set zombie client id.",YP)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(YP){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Xm(e){return xu(e,"owner")}function Zm(e){return xu(e,"clientMetadata")}function eg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class tg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Td(),r=Td();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new tg(e,t.fromCache,n,r)}}class ng{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=et()?8:Uc(Ke())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ng;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Gl()<=Rt.DEBUG&&Ql("QueryEngine","SDK will not create cache indexes for query:",ud(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Mc.resolve()):(Gl()<=Rt.DEBUG&&Ql("QueryEngine","Query:",ud(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Gl()<=Rt.DEBUG&&Ql("QueryEngine","The SDK decides to create cache indexes for query:",ud(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,id(t))):Mc.resolve())}ji(e,t){if(td(t))return Mc.resolve(null);let n=id(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ad(t,null,"F"),n=id(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Td(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,ad(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return td(t)||r.isEqual(vc.min())?Mc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Mc.resolve(null):(Gl()<=Rt.DEBUG&&Ql("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ud(t)),this.es(e,s,t,Nc(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Lu(fd(e));return t.forEach(((t,r)=>{hd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Gl()<=Rt.DEBUG&&Ql("QueryEngine","Using full collection scan to execute query:",ud(t)),this.zi.getDocumentsMatchingQuery(e,t,Pc.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class ig{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ru(pc),this.rs=new md((e=>Kh(e)),Gh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function sg(e,t,n,r){return new ig(e,t,n,r)}async function og(e,t){const n=ec(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Td();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ag(e){const t=ec(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function lg(e,t,n){let r=Td(),i=Td();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=yd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(vc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ql("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function cg(e,t){const n=ec(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ug(e,t){const n=ec(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Mc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new dp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function hg(e,t,n){const r=ec(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!qc(e))throw e;Ql("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function dg(e,t,n){const r=ec(e);let i=vc.min(),s=Td();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ec(e),i=r.rs.get(n);return void 0!==i?Mc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,id(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:vc.min(),n?s:Td()))).next((e=>(mg(r,dd(t),e),{documents:e,hs:s})))))}function fg(e,t){const n=ec(e),r=ec(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function pg(e,t){const n=ec(e),r=n.ss.get(t)||vc.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Nc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(mg(n,t,e),e)))}function mg(e,t,n){let r=e.ss.get(t)||vc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function gg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Td();const r=await ug(e,id(bp(t.bundledQuery))),i=ec(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Vf(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Vu.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function yg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function _g(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class wg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new nc(r.error.code,r.error.message))),s?new wg(e,t,r.state,i):(Yl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new nc(n.error.code,n.error.message))),i?new bg(e,n.state,r):(Yl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ig{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=xd();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Xc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Ig(e,i):(Yl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class kg{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kg(t.clientId,t.onlineState):(Yl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Eg{constructor(){this.activeTargetIds=xd()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sg{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ru(pc),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=yg(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Eg),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(yg(this.persistenceKey,n));if(e){const t=Ig.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(_g(this.persistenceKey,e));if(n){const r=bg.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_g(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ql("SharedClientState","READ",e,t),t}setItem(e,t){Ql("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ql("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Ql("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Yl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Yc.oe;if(null!=e)try{const n=JSON.parse(e);Zl("number"==typeof n),t=n}catch(e){Yl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Yc.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new wg(this.currentUser,e,t,n),i=vg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=vg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=_g(this.persistenceKey,e),i=new bg(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Ig.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return wg.Es(new Wl(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return bg.Es(r,t)}xs(e){return kg.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Ql("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=xd();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Tg{constructor(){this.no=new Eg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Eg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cg{io(e){}shutdown(){}}class xg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ql("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ql("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ng=null;function Ag(){return null===Ng?Ng=268435456+Math.round(2147483648*Math.random()):Ng++,"0x"+Ng.toString(16)}const Pg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rg{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Dg="WebChannelConnection";class Og extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=Ag(),o=this.vo(e,t.toUriEncodedString());Ql("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Ql("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Jl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=Pg[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=Ag();return new Promise(((s,o)=>{const a=new Rl;a.setWithCredentials(!0),a.listenOnce(Ll.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ml.NO_ERROR:const t=a.getResponseJson();Ql(Dg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Ml.TIMEOUT:Ql(Dg,"RPC '".concat(e,"' ").concat(i," timed out")),o(new nc(tc.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const n=a.getStatus();if(Ql(Dg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(tc).indexOf(t)>=0?t:tc.UNKNOWN}(t.status);o(new nc(e,t.message))}else o(new nc(tc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new nc(tc.UNAVAILABLE,"Connection failed."));break;default:Xl()}}finally{Ql(Dg,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Ql(Dg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=Ag(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Vl(),o=Ul(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Dl({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ql(Dg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Rg({lo:t=>{d?Ql(Dg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ql(Dg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ol.EventType.OPEN,(()=>{d||(Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,Ol.EventType.CLOSE,(()=>{d||(d=!0,Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,Ol.EventType.ERROR,(t=>{d||(d=!0,Jl(Dg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new nc(tc.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ol.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Zl(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=df[e];if(void 0!==t)return mf(t)}(t),i=o.message;void 0===n&&(n=tc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new nc(n,i)),u.close()}else Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(o,jl.STAT_EVENT,(t=>{t.stat===Fl.PROXY?Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Fl.NOPROXY&&Ql(Dg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Lg(){return"undefined"!=typeof window?window:null}function Mg(){return"undefined"!=typeof document?document:null}function Fg(e){return new Lf(e,!0)}class jg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Ql("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Ug{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new jg(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===tc.RESOURCE_EXHAUSTED?(Yl(t.toString()),Yl("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===tc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new nc(tc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Ql("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Ql("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Vg extends Ug{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Zl(void 0===t||"string"==typeof t),Vu.fromBase64String(t||"")):(Zl(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Vu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?tc.UNKNOWN:mf(e.code);return new nc(t,e.message||"")}(o);n=new Cf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hf(e,r.document.name),s=Vf(r.document.updateTime),o=r.document.createTime?Vf(r.document.createTime):vc.min(),a=new yh({mapValue:{fields:r.document.fields}}),l=_h.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Sf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Hf(e,r.document),s=r.readTime?Vf(r.readTime):vc.min(),o=_h.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Hf(e,r.document),s=r.removedTargetIds||[];n=new Sf([],s,i,null)}else{if(!("filter"in t))return Xl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new hf(r,i),o=e.targetId;n=new Tf(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vc.min():t.readTime?Vf(t.readTime):vc.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Qf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Qh(r)?{documents:ep(e,r)}:{query:tp(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jf(e,t.resumeToken);const r=Mf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vc.min())>0){n.readTime=Ff(e,t.snapshotVersion.toTimestamp());const r=Mf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Qf(this.serializer),t.removeTarget=e,this.i_(t)}}class zg extends Ug{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Zl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Zl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Vf(e.updateTime):Vf(t);return n.isEqual(vc.min())&&(n=Vf(t)),new Hd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Vf(e.commitTime);return this.listener.A_(n,t)}return Zl(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Qf(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Xf(this.serializer,e)))};this.i_(t)}}class qg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new nc(tc.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,qf(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===tc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nc(tc.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,qf(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===tc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nc(tc.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Bg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Yl(t),this.y_=!1):Ql("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Wg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Zg(this)&&(Ql("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ec(e);t.M_.add(4),await Kg(t),t.N_.set("Unknown"),t.M_.delete(4),await Hg(t)}(this))}))})),this.N_=new Bg(n,r)}}async function Hg(e){if(Zg(e))for(const t of e.x_)await t(!0)}async function Kg(e){for(const t of e.x_)await t(!1)}function Gg(e,t){const n=ec(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Xg(n)?$g(n):vy(n).Xo()&&Yg(n,t))}function Qg(e,t){const n=ec(e),r=vy(n);n.F_.delete(t),r.Xo()&&Jg(n,t),0===n.F_.size&&(r.Xo()?r.n_():Zg(n)&&n.N_.set("Unknown"))}function Yg(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vy(e).P_(t)}function Jg(e,t){e.L_.xe(t),vy(e).I_(t)}function $g(e){e.L_=new Nf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),vy(e).start(),e.N_.w_()}function Xg(e){return Zg(e)&&!vy(e).Zo()&&e.F_.size>0}function Zg(e){return 0===ec(e).M_.size}function ey(e){e.L_=void 0}async function ty(e){e.N_.set("Online")}async function ny(e){e.F_.forEach(((t,n)=>{Yg(e,t)}))}async function ry(e,t){ey(e),Xg(e)?(e.N_.D_(t),$g(e)):e.N_.set("Unknown")}async function iy(e,t,n){if(e.N_.set("Online"),t instanceof Cf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Ql("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await sy(e,n)}else if(t instanceof Sf?e.L_.Ke(t):t instanceof Tf?e.L_.He(t):e.L_.We(t),!n.isEqual(vc.min()))try{const t=await ag(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Vu.EMPTY_BYTE_STRING,r.snapshotVersion)),Jg(e,t);const i=new dp(r.target,t,n,r.sequenceNumber);Yg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ql("RemoteStore","Failed to raise snapshot:",t),await sy(e,t)}}async function sy(e,t,n){if(!qc(t))throw t;e.M_.add(1),await Kg(e),e.N_.set("Offline"),n||(n=()=>ag(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ql("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Hg(e)}))}function oy(e,t){return t().catch((n=>sy(e,n,t)))}async function ay(e){const t=ec(e),n=_y(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;ly(t);)try{const e=await cg(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,cy(t,e)}catch(e){await sy(t,e)}uy(t)&&hy(t)}function ly(e){return Zg(e)&&e.v_.length<10}function cy(e,t){e.v_.push(t);const n=_y(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function uy(e){return Zg(e)&&!_y(e).Zo()&&e.v_.length>0}function hy(e){_y(e).start()}async function dy(e){_y(e).V_()}async function fy(e){const t=_y(e);for(const n of e.v_)t.d_(n.mutations)}async function py(e,t,n){const r=e.v_.shift(),i=cf.from(r,t,n);await oy(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ay(e)}async function my(e,t){t&&_y(e).E_&&await async function(e,t){if(function(e){return pf(e)&&e!==tc.ABORTED}(t.code)){const n=e.v_.shift();_y(e).t_(),await oy(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ay(e)}}(e,t),uy(e)&&hy(e)}async function gy(e,t){const n=ec(e);n.asyncQueue.verifyOperationInProgress(),Ql("RemoteStore","RemoteStore received new credentials");const r=Zg(n);n.M_.add(3),await Kg(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Hg(n)}async function yy(e,t){const n=ec(e);t?(n.M_.delete(2),await Hg(n)):t||(n.M_.add(2),await Kg(n),n.N_.set("Unknown"))}function vy(e){return e.B_||(e.B_=function(e,t,n){const r=ec(e);return r.f_(),new Vg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:ty.bind(null,e),To:ny.bind(null,e),Ao:ry.bind(null,e),h_:iy.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Xg(e)?$g(e):e.N_.set("Unknown")):(await e.B_.stop(),ey(e))}))),e.B_}function _y(e){return e.k_||(e.k_=function(e,t,n){const r=ec(e);return r.f_(),new zg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:dy.bind(null,e),Ao:my.bind(null,e),R_:fy.bind(null,e),A_:py.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await ay(e)):(await e.k_.stop(),e.v_.length>0&&(Ql("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class wy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new wy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nc(tc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(e,t){if(Yl("AsyncQueue","".concat(t,": ").concat(e)),qc(e))return new nc(tc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Iy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||kc.comparator(t.key,n.key):(e,t)=>kc.comparator(e.key,t.key),this.keyedMap=_d(),this.sortedSet=new Ru(this.comparator)}static emptySet(e){return new Iy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Iy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Iy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ky{constructor(){this.q_=new Ru(kc.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Xl():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ey{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ey(e,t,Iy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Sy{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Ty{constructor(){this.queries=new md((e=>cd(e)),ld),this.onlineState="Unknown",this.z_=new Set}}async function Cy(e,t){const n=ec(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new Sy,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=by(e,"Initialization of query '".concat(ud(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Py(n)}async function xy(e,t){const n=ec(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ny(e,t){const n=ec(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&Py(n)}function Ay(e,t,n){const r=ec(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Py(e){e.z_.forEach((e=>{e.next()}))}var Ry,Dy;(Dy=Ry||(Ry={})).J_="default",Dy.Cache="cache";class Oy{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ey(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Ry.Cache}}class Ly{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class My{constructor(e){this.serializer=e}Ps(e){return Hf(this.serializer,e)}Is(e){return e.metadata.exists?$f(this.serializer,e.document,!1):_h.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Vf(e)}}class Fy{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jy(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=wc.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new My(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Td()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ec(e);let s=Td(),o=yd();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await ug(i,function(e){return id(ed(wc.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>lg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new My(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await gg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function jy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Uy{constructor(e){this.key=e}}class Vy{constructor(e){this.key=e}}class zy{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Td(),this.mutatedKeys=Td(),this.Ia=fd(e),this.Ta=new Iy(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new ky,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=hd(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xl()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new Ey(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ky,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Td(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Vy(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Uy(n))})),t}pa(e){this.la=e.hs,this.Pa=Td();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ey.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class qy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class By{constructor(e){this.key=e,this.wa=!1}}class Wy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new md((e=>cd(e)),ld),this.Da=new Map,this.Ca=new Set,this.va=new Ru(kc.comparator),this.Fa=new Map,this.Ma=new Um,this.xa={},this.Oa=new Map,this.Na=pm.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Hy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=wv(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Gy(r,t,n,!0),i}async function Ky(e,t){const n=wv(e);await Gy(n,t,!0,!1)}async function Gy(e,t,n,r){const i=await ug(e.localStore,id(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Qy(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Gg(e.remoteStore,i),a}async function Qy(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await dg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return ov(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await dg(e.localStore,t,!0),o=new zy(t,s.hs),a=o.da(s.documents),l=Ef.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);ov(e,n,c.fa);const u=new qy(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function Yy(e,t,n){const r=ec(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!ld(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qg(r.remoteStore,i.targetId),iv(r,i.targetId)})).catch(Lc)):(iv(r,i.targetId),await hg(r.localStore,i.targetId,!0))}async function Jy(e,t){const n=ec(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qg(n.remoteStore,r.targetId))}async function $y(e,t){const n=ec(e);try{const e=await function(e,t){const n=ec(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Vu.EMPTY_BYTE_STRING,vc.min()).withLastLimboFreeSnapshotVersion(vc.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=yd(),l=Td();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lg(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(vc.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Mc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Zl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Zl(r.wa):e.removedDocuments.size>0&&(Zl(r.wa),r.wa=!1))})),await cv(n,e,t)}catch(e){await Lc(e)}}function Xy(e,t,n){const r=ec(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ec(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&Py(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Zy(e,t,n){const r=ec(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Ru(kc.comparator);e=e.insert(s,_h.newNoDocument(s,vc.min()));const n=Td().add(s),i=new kf(vc.min(),new Map,new Ru(pc),e,n);await $y(r,i),r.va=r.va.remove(s),r.Fa.delete(t),lv(r)}else await hg(r.localStore,t,!1).then((()=>iv(r,t,n))).catch(Lc)}async function ev(e,t){const n=ec(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ec(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Mc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Zl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Td();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);rv(n,r,null),nv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cv(n,e)}catch(e){await Lc(e)}}async function tv(e,t,n){const r=ec(e);try{const e=await function(e,t){const n=ec(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Zl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);rv(r,t,n),nv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cv(r,e)}catch(n){await Lc(n)}}function nv(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function rv(e,t,n){const r=ec(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function iv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||sv(e,t)}))}function sv(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Qg(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),lv(e))}function ov(e,t,n){for(const r of n)r instanceof Uy?(e.Ma.addReference(r.key,t),av(e,r)):r instanceof Vy?(Ql("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||sv(e,r.key)):Xl()}function av(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ql("SyncEngine","New document in limbo: "+n),e.Ca.add(r),lv(e))}function lv(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new kc(wc.fromString(t)),r=e.Na.next();e.Fa.set(r,new By(n)),e.va=e.va.insert(n,r),Gg(e.remoteStore,new dp(id(ed(n.path)),r,"TargetPurposeLimboResolution",Yc.oe))}}async function cv(e,t,n){const r=ec(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=tg.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=ec(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Mc.forEach(t,(t=>Mc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Mc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!qc(e))throw e;Ql("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function uv(e,t){const n=ec(e);if(!n.currentUser.isEqual(t)){Ql("SyncEngine","User change. New user:",t.toKey());const e=await og(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new nc(tc.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await cv(n,e.us)}}function hv(e,t){const n=ec(e),r=n.Fa.get(t);if(r&&r.wa)return Td().add(r.key);{let e=Td();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function dv(e,t){const n=ec(e),r=await dg(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&ov(n,t.targetId,i.fa),i}async function fv(e,t){const n=ec(e);return pg(n.localStore,t).then((e=>cv(n,e)))}async function pv(e,t,n,r){const i=ec(e),s=await function(e,t){const n=ec(e),r=ec(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Mc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ay(i.remoteStore):"acknowledged"===n||"rejected"===n?(rv(i,t,r||null),nv(i,t),function(e,t){ec(ec(e).mutationQueue).Mn(t)}(i.localStore,t)):Xl(),await cv(i,s)):Ql("SyncEngine","Cannot apply mutation batch with id: "+t)}async function mv(e,t,n){const r=ec(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await ug(r.localStore,id(t[0]));for(const e of t){const t=r.ba.get(e),n=await dv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await fg(r.localStore,o);e=await ug(r.localStore,t),await Qy(r,gv(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function gv(e){return Zh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yv(e){return function(e){return ec(ec(e).persistence).Bi()}(ec(e).localStore)}async function vv(e,t,n,r){const i=ec(e);if(i.La)return void Ql("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await pg(i.localStore,dd(s[0])),r=kf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Vu.EMPTY_BYTE_STRING);await cv(i,e,r);break}case"rejected":await hg(i.localStore,t,!0),iv(i,t,r);break;default:Xl()}}async function _v(e,t,n){const r=wv(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ql("SyncEngine","Adding an already active target "+e);continue}const t=await fg(r.localStore,e),n=await ug(r.localStore,t);await Qy(r,gv(t),n.targetId,!1,n.resumeToken),Gg(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await hg(r.localStore,e,!1).then((()=>{Qg(r.remoteStore,e),iv(r,e)})).catch(Lc)}}function wv(e){const t=ec(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$y.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zy.bind(null,t),t.Sa.h_=Ny.bind(null,t.eventManager),t.Sa.ka=Ay.bind(null,t.eventManager),t}function bv(e){const t=ec(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ev.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tv.bind(null,t),t}class Iv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Fg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return sg(this.persistence,new rg,e.initialUser,this.serializer)}createPersistence(e){return new Hm(Gm.Hr,this.serializer)}createSharedClientState(e){return new Tg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kv extends Iv{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await bv(this.Qa.syncEngine),await ay(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return sg(this.persistence,new rg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new bm(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Qc(t,this.persistence);return new Gc(e.asyncQueue,n)}createPersistence(e){const t=eg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?om.withCacheSize(this.cacheSizeBytes):om.DEFAULT;return new $m(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Lg(),Mg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Tg}}class Ev extends kv{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof Sg&&(this.sharedClientState.syncEngine={Zs:pv.bind(null,t),Xs:vv.bind(null,t),eo:_v.bind(null,t),Bi:yv.bind(null,t),Ys:fv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=ec(e);if(wv(n),bv(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await mv(n,e.toArray());n.La=!0,await yy(n.remoteStore,!0);for(const r of t)Gg(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(iv(n,i),hg(n.localStore,i,!0)))),Qg(n.remoteStore,i)})),await t,await mv(n,e),function(e){const t=ec(e);t.Fa.forEach(((e,n)=>{Qg(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new Ru(kc.comparator)}(n),n.La=!1,await yy(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Lg();if(!Sg.D(t))throw new nc(tc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=eg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Sv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Xy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=uv.bind(null,this.syncEngine),await yy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ty}createDatastore(e){const t=Fg(e.databaseInfo.databaseId),n=function(e){return new Og(e)}(e.databaseInfo);return function(e,t,n,r){return new qg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Wg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Xy(this.syncEngine,e,0)),xg.D()?new xg:new Cg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Wy(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=ec(e);Ql("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Kg(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Tv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Yl("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class xv{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new rc,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new Ly(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Nv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nc(tc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ec(e),r={documents:t.map((e=>Wf(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,wc.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Zl(!!t.found),t.found.name,t.found.updateTime;const n=Hf(e,t.found.name),r=Vf(t.found.updateTime),i=t.found.createTime?Vf(t.found.createTime):vc.min(),s=new yh({mapValue:{fields:t.found.fields}});return _h.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Zl(!!t.missing),Zl(!!t.readTime);const n=Hf(e,t.missing),r=Vf(t.readTime);return _h.newNoDocument(n,r)}(e,t):Xl()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Zl(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=kc.fromPath(t);this.mutations.push(new af(n,this.precondition(n)))})),await async function(e,t){const n=ec(e),r={writes:t.map((e=>Xf(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,wc.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xl();t=vc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nc(tc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vc.min())?Kd.exists(!1):Kd.updateTime(t):Kd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vc.min()))throw new nc(tc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kd.updateTime(t)}return Kd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Av{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new jg(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new Nv(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pf(t)}return!1}}class Pv{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Wl.UNAUTHENTICATED,this.clientId=fc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ql("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ql("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nc(tc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=by(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Rv(e,t){e.asyncQueue.verifyOperationInProgress(),Ql("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await og(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Dv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Lv(e);Ql("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>gy(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>gy(t.remoteStore,n))),e._onlineComponents=t}function Ov(e){return"FirebaseError"===e.name?e.code===tc.FAILED_PRECONDITION||e.code===tc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Lv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ql("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Ov(n))throw n;Jl("Error using user provided cache. Falling back to memory cache: "+n),await Rv(e,new Iv)}}else Ql("FirestoreClient","Using default OfflineComponentProvider"),await Rv(e,new Iv);return e._offlineComponents}async function Mv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ql("FirestoreClient","Using user provided OnlineComponentProvider"),await Dv(e,e._uninitializedComponentsProvider._online)):(Ql("FirestoreClient","Using default OnlineComponentProvider"),await Dv(e,new Sv))),e._onlineComponents}function Fv(e){return Lv(e).then((e=>e.persistence))}function jv(e){return Lv(e).then((e=>e.localStore))}function Uv(e){return Mv(e).then((e=>e.remoteStore))}function Vv(e){return Mv(e).then((e=>e.syncEngine))}function zv(e){return Mv(e).then((e=>e.datastore))}async function qv(e){const t=await Mv(e),n=t.eventManager;return n.onListen=Hy.bind(null,t.syncEngine),n.onUnlisten=Yy.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ky.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Jy.bind(null,t.syncEngine),n}function Bv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Cv({next:s=>{t.enqueueAndForget((()=>xy(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new nc(tc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new nc(tc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Oy(ed(n.path),s,{includeMetadataChanges:!0,ra:!0});return Cy(e,o)}(await qv(e),e.asyncQueue,t,n,r))),r.promise}function Wv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Cv({next:n=>{t.enqueueAndForget((()=>xy(e,o))),n.fromCache&&"server"===r.source?i.reject(new nc(tc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Oy(n,s,{includeMetadataChanges:!0,ra:!0});return Cy(e,o)}(await qv(e),e.asyncQueue,t,n,r))),r.promise}function Hv(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?yf().encode(e):e,function(e,t){return new xv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Tv(e,t);if(e instanceof ArrayBuffer)return Tv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Fg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ec(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ec(e),r=Vf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(jy(r));const i=new Fy(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await cv(e,o.ca,void 0),await function(e,t){const n=ec(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return Jl("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Vv(e),i,r)}))}function Kv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gv=new Map;function Qv(e,t,n){if(!n)throw new nc(tc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Yv(e,t,n,r){if(!0===t&&!0===r)throw new nc(tc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Jv(e){if(!kc.isDocumentKey(e))throw new nc(tc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function $v(e){if(kc.isDocumentKey(e))throw new nc(tc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Xl()}function Zv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nc(tc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xv(e);throw new nc(tc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function e_(e,t){if(t<=0)throw new nc(tc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class t_{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new nc(tc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nc(tc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nc(tc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new nc(tc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new nc(tc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class n_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nc(tc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nc(tc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sc;switch(e.type){case"firstParty":return new cc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nc(tc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gv.get(e);t&&(Ql("ComponentProvider","Removing Datastore"),Gv.delete(e),t.terminate())}(this),Promise.resolve()}}function r_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Zv(e,n_))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Wl.MOCK_USER;else{t=He(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new nc(tc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wl(s)}e._authCredentials=new oc(new ic(t,n))}}class i_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new i_(this.firestore,e,this._query)}}class s_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new o_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new s_(this.firestore,e,this._key)}}class o_ extends i_{constructor(e,t,n){super(e,t,ed(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new s_(this.firestore,null,new kc(e))}withConverter(e){return new o_(this.firestore,e,this._path)}}function a_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Tt(e),Qv("collection","path",t),e instanceof n_){const n=wc.fromString(t,...r);return $v(n),new o_(e,null,n)}{if(!(e instanceof s_||e instanceof o_))throw new nc(tc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wc.fromString(t,...r));return $v(n),new o_(e.firestore,null,n)}}function l_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Tt(e),1===arguments.length&&(t=fc.newId()),Qv("doc","path",t),e instanceof n_){const n=wc.fromString(t,...r);return Jv(n),new s_(e,null,new kc(n))}{if(!(e instanceof s_||e instanceof o_))throw new nc(tc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wc.fromString(t,...r));return Jv(n),new s_(e.firestore,e instanceof o_?e.converter:null,new kc(n))}}function c_(e,t){return e=Tt(e),t=Tt(t),(e instanceof s_||e instanceof o_)&&(t instanceof s_||t instanceof o_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function u_(e,t){return e=Tt(e),t=Tt(t),e instanceof i_&&t instanceof i_&&e.firestore===t.firestore&&ld(e._query,t._query)&&e.converter===t.converter}class h_{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new jg(this,"async_queue_retry"),this.hu=()=>{const e=Mg();e&&Ql("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=Mg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Mg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new rc;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(YP){if(!qc(YP))throw YP;Ql("AsyncQueue","Operation failed with retryable error: "+YP)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=wy.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Xl()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function d_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class f_{constructor(){this._progressObserver={},this._taskCompletionResolver=new rc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class p_ extends n_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new h_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||g_(this),this._firestoreClient.terminate()}}function m_(e){return e._firestoreClient||g_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function g_(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Kv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Pv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function y_(e,t,n){const r=new rc;return e.asyncQueue.enqueue((async()=>{try{await Rv(e,n),await Dv(e,t),r.resolve()}catch(e){const n=e;if(!Ov(n))throw n;Jl("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function v_(e){return function(e){const t=new rc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ec(e);Zg(n.remoteStore)||Ql("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ec(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=by(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Vv(e),t))),t.promise}(m_(e=Zv(e,p_)))}function __(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Fv(e),n=await Uv(e);return t.setNetworkEnabled(!0),function(e){const t=ec(e);return t.M_.delete(0),Hg(t)}(n)}))}(m_(e=Zv(e,p_)))}function w_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Fv(e),n=await Uv(e);return t.setNetworkEnabled(!1),async function(e){const t=ec(e);t.M_.add(0),await Kg(t),t.N_.set("Offline")}(n)}))}(m_(e=Zv(e,p_)))}function b_(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ec(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await jv(e),t)))}(m_(e=Zv(e,p_)),t).then((t=>t?new i_(e,null,t.query):null))}function I_(e){if(e._initialized||e._terminated)throw new nc(tc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class k_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new k_(Vu.fromBase64String(e))}catch(e){throw new nc(tc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new k_(Vu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class E_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new nc(tc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ic(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class S_{constructor(e){this._methodName=e}}class T_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nc(tc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nc(tc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pc(this._lat,e._lat)||pc(this._long,e._long)}}const C_=/^__.*__$/;class x_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tf(e,this.data,this.fieldMask,t,this.fieldTransforms):new ef(e,this.data,t,this.fieldTransforms)}}class N_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xl()}}class P_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new P_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return $_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(A_(this.fu)&&C_.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class R_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fg(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new P_({fu:e,methodName:t,vu:n,path:Ic.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D_(e){const t=e._freezeSettings(),n=Fg(e._databaseId);return new R_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function O_(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);G_("Data must be an object, but it was:",o,r);const a=H_(r,o);let l,c;if(s.merge)l=new ju(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Q_(t,r,n);if(!o.contains(i))throw new nc(tc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));X_(e,i)||e.push(i)}l=new ju(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new x_(new yh(a),l,c)}class L_ extends S_{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof L_}}function M_(e,t,n){return new P_({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class F_ extends S_{_toFieldTransform(e){return new Wd(e.path,new Md)}isEqual(e){return e instanceof F_}}class j_ extends S_{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=M_(this,e,!0),n=this.Mu.map((e=>W_(e,t))),r=new Fd(n);return new Wd(e.path,r)}isEqual(e){return e instanceof j_&&dt(this.Mu,e.Mu)}}class U_ extends S_{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=M_(this,e,!0),n=this.Mu.map((e=>W_(e,t))),r=new Ud(n);return new Wd(e.path,r)}isEqual(e){return e instanceof U_&&dt(this.Mu,e.Mu)}}class V_ extends S_{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new zd(e.serializer,Pd(e.serializer,this.xu));return new Wd(e.path,t)}isEqual(e){return e instanceof V_&&this.xu===e.xu}}function z_(e,t,n,r){const i=e.Fu(1,t,n);G_("Data must be an object, but it was:",i,r);const s=[],o=yh.empty();Au(r,((e,r)=>{const a=J_(t,e,n);r=Tt(r);const l=i.Su(a);if(r instanceof L_)s.push(a);else{const e=W_(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ju(s);return new N_(o,a,i.fieldTransforms)}function q_(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Q_(t,r,n)],l=[i];if(s.length%2!=0)throw new nc(tc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Q_(t,s[d])),l.push(s[d+1]);const c=[],u=yh.empty();for(let d=a.length-1;d>=0;--d)if(!X_(c,a[d])){const e=a[d];let t=l[d];t=Tt(t);const n=o.Su(e);if(t instanceof L_)c.push(e);else{const r=W_(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ju(c);return new N_(u,h,o.fieldTransforms)}function B_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return W_(n,e.Fu(r?4:3,t))}function W_(e,t){if(K_(e=Tt(e)))return G_("Unsupported field value:",t,e),H_(e,t);if(e instanceof S_)return function(e,t){if(!A_(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=W_(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Tt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Pd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yc.fromDate(e);return{timestampValue:Ff(t.serializer,n)}}if(e instanceof yc){const n=new yc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ff(t.serializer,n)}}if(e instanceof T_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof k_)return{bytesValue:jf(t.serializer,e._byteString)};if(e instanceof s_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Xv(e)))}(e,t)}function H_(e,t){const n={};return Pu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Au(e,((e,r)=>{const i=W_(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function K_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yc||e instanceof T_||e instanceof k_||e instanceof s_||e instanceof S_)}function G_(e,t,n){if(!K_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Xv(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Q_(e,t,n){if((t=Tt(t))instanceof E_)return t._internalPath;if("string"==typeof t)return J_(e,t);throw $_("Field path arguments must be of type string or ",e,!1,void 0,n)}const Y_=new RegExp("[~\\*/\\[\\]]");function J_(e,t,n){if(t.search(Y_)>=0)throw $_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new E_(...t.split("."))._internalPath}catch(r){throw $_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new nc(tc.INVALID_ARGUMENT,a+e+l)}function X_(e,t){return e.some((e=>e.isEqual(t)))}class Z_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new s_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ew(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ew extends Z_{data(){return super.data()}}function tw(e,t){return"string"==typeof t?J_(e,t):t instanceof E_?t._internalPath:t._delegate._internalPath}function nw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nc(tc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rw{}class iw extends rw{}function sw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof rw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof aw)).length,n=e.filter((e=>e instanceof ow)).length;if(t>1||t>0&&n>0)throw new nc(tc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class ow extends iw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ow(e,t,n)}_apply(e){const t=this._parse(e);return mw(e._query,t),new i_(e.firestore,e.converter,od(e._query,t))}_parse(e){const t=D_(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nc(tc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){pw(o,s);const t=[];for(const n of o)t.push(fw(r,e,n));a={arrayValue:{values:t}}}else a=fw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||pw(o,s),a=B_(n,t,o,"in"===s||"not-in"===s);return Th.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class aw extends rw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ch.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)mw(n,i),n=od(n,i)}(e._query,t),new i_(e.firestore,e.converter,od(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lw extends iw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new nc(tc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nc(tc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kh(t,n)}(e._query,this._field,this._direction);return new i_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class cw extends iw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new cw(e,t,n)}_apply(e){return new i_(e.firestore,e.converter,ad(e._query,this._limit,this._limitType))}}class uw extends iw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uw(e,t,n)}_apply(e){const t=dw(e,this.type,this._docOrFields,this._inclusive);return new i_(e.firestore,e.converter,function(e,t){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class hw extends iw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new hw(e,t,n)}_apply(e){const t=dw(e,this.type,this._docOrFields,this._inclusive);return new i_(e.firestore,e.converter,function(e,t){return new Xh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function dw(e,t,n,r){if(n[0]=Tt(n[0]),n[0]instanceof Z_)return function(e,t,n,r,i){if(!r)throw new nc(tc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of rd(e))if(o.field.isKeyField())s.push(sh(t,r.key));else{const e=r.data.field(o.field);if(Hu(e))throw new nc(tc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new nc(tc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new wh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=D_(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new nc(tc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new nc(tc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!nd(e)&&-1!==s.indexOf("/"))throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(wc.fromString(s));if(!kc.isDocumentKey(n))throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new kc(n);a.push(sh(t,i))}else{const e=B_(n,r,s);a.push(e)}}return new wh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function fw(e,t,n){if("string"==typeof(n=Tt(n))){if(""===n)throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nd(t)&&-1!==n.indexOf("/"))throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(wc.fromString(n));if(!kc.isDocumentKey(r))throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sh(e,new kc(r))}if(n instanceof s_)return sh(e,n._key);throw new nc(tc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xv(n),"."))}function pw(e,t){if(!Array.isArray(e)||0===e.length)throw new nc(tc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function mw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new nc(tc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nc(tc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class gw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Au(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new T_(Bu(e.latitude),Bu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ku(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const t=qu(e);return new yc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wc.fromString(e);Zl(hp(n));const r=new Yu(n.get(1),n.get(3)),i=new kc(n.popFirst(5));return r.isEqual(t)||Yl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function yw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vw extends gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new k_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new s_(this.firestore,null,t)}}class _w{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ww extends Z_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bw extends ww{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Iw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _w(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bw(this._firestore,this._userDataWriter,n.key,n,new _w(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nc(tc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new bw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new _w(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new bw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _w(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:kw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function kw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xl()}}function Ew(e,t){return e instanceof ww&&t instanceof ww?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Iw&&t instanceof Iw&&e._firestore===t._firestore&&u_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Sw extends gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new k_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new s_(this.firestore,null,t)}}function Tw(e){e=Zv(e,s_);const t=Zv(e.firestore,p_),n=m_(t),r=new Sw(t);return function(e,t){const n=new rc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ec(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new nc(tc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=by(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await jv(e),t,n))),n.promise}(n,e._key).then((n=>new ww(t,r,e._key,n,new _w(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Cw(e){e=Zv(e,i_);const t=Zv(e.firestore,p_),n=m_(t),r=new Sw(t);return function(e,t){const n=new rc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await dg(e,t,!0),i=new zy(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=by(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await jv(e),t,n))),n.promise}(n,e._query).then((n=>new Iw(t,r,e,n)))}function xw(e,t,n){e=Zv(e,s_);const r=Zv(e.firestore,p_),i=yw(e.converter,t,n);return Rw(r,[O_(D_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kd.none())])}function Nw(e,t,n){e=Zv(e,s_);const r=Zv(e.firestore,p_),i=D_(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Tt(t))||t instanceof E_?q_(i,"updateDoc",e._key,t,n,a):z_(i,"updateDoc",e._key,t),Rw(r,[s.toMutation(e._key,Kd.exists(!0))])}function Aw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Tt(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||d_(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(d_(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof s_)h=Zv(e.firestore,p_),d=ed(e._key.path),u={next:t=>{n[l]&&n[l](Dw(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Zv(e,i_);h=Zv(t.firestore,p_),d=t._query;const r=new Sw(h);u={next:e=>{n[l]&&n[l](new Iw(h,r,t,e))},error:n[l+1],complete:n[l+2]},nw(e._query)}return function(e,t,n,r){const i=new Cv(r),s=new Oy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Cy(await qv(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>xy(await qv(e),s)))}}(m_(h),d,c,u)}function Pw(e,t){return function(e,t){const n=new Cv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ec(e).z_.add(t),t.next()}(await qv(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ec(e).z_.delete(t)}(await qv(e),n)))}}(m_(e=Zv(e,p_)),d_(t)?t:{next:t})}function Rw(e,t){return function(e,t){const n=new rc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=bv(e);try{const e=await function(e,t){const n=ec(e),r=yc.now(),i=t.reduce(((e,t)=>e.add(t.key)),Td());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=yd(),l=Td();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Xd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new tf(e.key,t,vh(t.value.mapValue),Kd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:wd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Ru(pc)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await cv(r,e.changes),await ay(r.remoteStore)}catch(e){const t=by(e,"Failed to persist write");n.reject(t)}}(await Vv(e),t,n))),n.promise}(m_(e),t)}function Dw(e,t,n){const r=n.docs.get(t._key),i=new Sw(e);return new ww(e,i,t._key,r,new _w(n.hasPendingWrites,n.fromCache),t.converter)}const Ow={maxAttempts:5};class Lw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=D_(e)}set(e,t,n){this._verifyNotCommitted();const r=Mw(e,this._firestore),i=yw(r.converter,t,n),s=O_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Kd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Mw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Tt(t))||t instanceof E_?q_(this._dataReader,"WriteBatch.update",r._key,t,n,o):z_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Kd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mw(e,this._firestore);return this._mutations=this._mutations.concat(new of(t._key,Kd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nc(tc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mw(e,t){if((e=Tt(e)).firestore!==t)throw new nc(tc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Fw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=D_(e)}get(e){const t=Mw(e,this._firestore),n=new vw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Xl();const r=e[0];if(r.isFoundDocument())return new Z_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Z_(this._firestore,n,t._key,null,t.converter);throw Xl()}))}set(e,t,n){const r=Mw(e,this._firestore),i=yw(r.converter,t,n),s=O_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Mw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Tt(t))||t instanceof E_?q_(this._dataReader,"Transaction.update",r._key,t,n,o):z_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Mw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mw(e,this._firestore),n=new Sw(this._firestore);return super.get(e).then((e=>new ww(this._firestore,n,t._key,e._document,new _w(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hl=e}(Gn),jn(new Ct("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new p_(new ac(e.getProvider("auth-internal")),new hc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nc(tc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zn(Bl,"4.6.3",e),Zn(Bl,"4.6.3","esm2017")}();function jw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Uw(){if("undefined"===typeof Uint8Array)throw new nc("unimplemented","Uint8Arrays are not available in this environment.")}function Vw(){if("undefined"==typeof atob)throw new nc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class zw{constructor(e){this._delegate=e}static fromBase64String(e){return Vw(),new zw(k_.fromBase64String(e))}static fromUint8Array(e){return Uw(),new zw(k_.fromUint8Array(e))}toBase64(){return Vw(),this._delegate.toBase64()}toUint8Array(){return Uw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Bw{enableIndexedDbPersistence(e,t){return function(e,t){I_(e=Zv(e,p_));const n=m_(e);if(n._uninitializedComponentsProvider)throw new nc(tc.FAILED_PRECONDITION,"SDK cache is already specified.");Jl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Sv;return y_(n,i,new kv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){I_(e=Zv(e,p_));const t=m_(e);if(t._uninitializedComponentsProvider)throw new nc(tc.FAILED_PRECONDITION,"SDK cache is already specified.");Jl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Sv;return y_(t,r,new Ev(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new nc(tc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!jc.D())return Promise.resolve();const t=e+"main";await jc.delete(t)}(eg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Ww{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Jl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r_(this._delegate,e,t,n)}enableNetwork(){return __(this._delegate)}disableNetwork(){return w_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Yv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return v_(this._delegate)}onSnapshotsInSync(e){return Pw(this._delegate,e)}get app(){if(!this._appCompat)throw new nc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ib(this,a_(this._delegate,e))}catch(YP){throw Jw(YP,"collection()","Firestore.collection()")}}doc(e){try{return new Yw(this,l_(this._delegate,e))}catch(YP){throw Jw(YP,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tb(this,function(e,t){if(e=Zv(e,n_),Qv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nc(tc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new i_(e,null,function(e){return new Xh(wc.emptyPath(),e)}(t))}(this._delegate,e))}catch(YP){throw Jw(YP,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Zv(e,p_);const r=Object.assign(Object.assign({},Ow),n);return function(e){if(e.maxAttempts<1)throw new nc(tc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new rc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await zv(e);new Av(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(m_(e),(n=>t(new Fw(e,n))),r)}(this._delegate,(t=>e(new Kw(this,t))))}batch(){return m_(this._delegate),new Gw(new Lw(this._delegate,(e=>Rw(this._delegate,e))))}loadBundle(e){return function(e,t){const n=m_(e=Zv(e,p_)),r=new f_;return Hv(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return b_(this._delegate,e).then((e=>e?new tb(this,e):null))}}class Hw extends gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new zw(new k_(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yw.forKey(t,this.firestore,null)}}class Kw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}get(e){const t=sb(e);return this._delegate.get(t).then((e=>new Zw(this._firestore,new ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=sb(e);return n?(jw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sb(e);return this._delegate.delete(t),this}}class Gw{constructor(e){this._delegate=e}set(e,t,n){const r=sb(e);return n?(jw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new bw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Qw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Qw(e,new Hw(e),t),r.set(t,i)),i}}Qw.INSTANCES=new WeakMap;class Yw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new nc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Yw(t,new s_(t._delegate,n,new kc(e)))}static forKey(e,t,n){return new Yw(t,new s_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ib(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ib(this.firestore,a_(this._delegate,e))}catch(YP){throw Jw(YP,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Tt(e))instanceof s_&&c_(this._delegate,e)}set(e,t){t=jw("DocumentReference.set",t);try{return t?xw(this._delegate,e,t):xw(this._delegate,e)}catch(YP){throw Jw(YP,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Nw(this._delegate,e):Nw(this._delegate,e,t,...r)}catch(YP){throw Jw(YP,"updateDoc()","DocumentReference.update()")}}delete(){return Rw(Zv((e=this._delegate).firestore,p_),[new of(e._key,Kd.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=$w(t),i=Xw(t,(e=>new Zw(this.firestore,new ww(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Aw(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Tw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Zv(e,s_);const t=Zv(e.firestore,p_);return Bv(m_(t),e._key,{source:"server"}).then((n=>Dw(t,e,n)))}(this._delegate):function(e){e=Zv(e,s_);const t=Zv(e.firestore,p_);return Bv(m_(t),e._key).then((n=>Dw(t,e,n)))}(this._delegate),t.then((e=>new Zw(this.firestore,new ww(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Yw(this.firestore,e?this._delegate.withConverter(Qw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Jw(e,t,n){return e.message=e.message.replace(t,n),e}function $w(e){for(const t of e)if("object"===typeof t&&!qw(t))return t;return{}}function Xw(e,t){var n,r;let i;return i=qw(e[0])?e[0]:qw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Zw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ew(this._delegate,e._delegate)}}class eb extends Zw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Xl(),t}}class tb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}where(e,t,n){try{return new tb(this.firestore,sw(this._delegate,function(e,t,n){const r=t,i=tw("where",e);return ow._create(i,r,n)}(e,t,n)))}catch(YP){throw Jw(YP,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tb(this.firestore,sw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=tw("orderBy",e);return lw._create(n,t)}(e,t)))}catch(YP){throw Jw(YP,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tb(this.firestore,sw(this._delegate,(e_("limit",t=e),cw._create("limit",t,"F"))))}catch(t){throw Jw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new tb(this.firestore,sw(this._delegate,(e_("limitToLast",t=e),cw._create("limitToLast",t,"L"))))}catch(t){throw Jw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new tb(this.firestore,sw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uw._create("startAt",t,!0)}(...arguments)))}catch(YP){throw Jw(YP,"startAt()","Query.startAt()")}}startAfter(){try{return new tb(this.firestore,sw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uw._create("startAfter",t,!1)}(...arguments)))}catch(YP){throw Jw(YP,"startAfter()","Query.startAfter()")}}endBefore(){try{return new tb(this.firestore,sw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hw._create("endBefore",t,!1)}(...arguments)))}catch(YP){throw Jw(YP,"endBefore()","Query.endBefore()")}}endAt(){try{return new tb(this.firestore,sw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hw._create("endAt",t,!0)}(...arguments)))}catch(YP){throw Jw(YP,"endAt()","Query.endAt()")}}isEqual(e){return u_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Cw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Zv(e,i_);const t=Zv(e.firestore,p_),n=m_(t),r=new Sw(t);return Wv(n,e._query,{source:"server"}).then((n=>new Iw(t,r,e,n)))}(this._delegate):function(e){e=Zv(e,i_);const t=Zv(e.firestore,p_),n=m_(t),r=new Sw(t);return nw(e._query),Wv(n,e._query).then((n=>new Iw(t,r,e,n)))}(this._delegate),t.then((e=>new rb(this.firestore,new Iw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=$w(t),i=Xw(t,(e=>new rb(this.firestore,new Iw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Aw(this._delegate,r,i)}withConverter(e){return new tb(this.firestore,e?this._delegate.withConverter(Qw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new eb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new nb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new eb(this._firestore,n))}))}isEqual(e){return Ew(this._delegate,e._delegate)}}class ib extends tb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yw(this.firestore,e):null}doc(e){try{return new Yw(this.firestore,void 0===e?l_(this._delegate):l_(this._delegate,e))}catch(YP){throw Jw(YP,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Zv(e.firestore,p_),r=l_(e),i=yw(e.converter,t);return Rw(n,[O_(D_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Kd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Yw(this.firestore,e)))}isEqual(e){return c_(this._delegate,e._delegate)}withConverter(e){return new ib(this.firestore,e?this._delegate.withConverter(Qw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function sb(e){return Zv(e,s_)}class ob{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new E_(...t)}static documentId(){return new ob(Ic.keyField().canonicalString())}isEqual(e){return(e=Tt(e))instanceof E_&&this._delegate._internalPath.isEqual(e._internalPath)}}class ab{constructor(e){this._delegate=e}static serverTimestamp(){const e=new F_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ab(e)}static delete(){const e=new L_("deleteField");return e._methodName="FieldValue.delete",new ab(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new j_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ab(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new U_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ab(e)}static increment(e){const t=new V_("increment",e);return t._methodName="FieldValue.increment",new ab(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lb={Firestore:Ww,GeoPoint:T_,Timestamp:yc,Blob:zw,Transaction:Kw,WriteBatch:Gw,DocumentReference:Yw,DocumentSnapshot:Zw,Query:tb,QueryDocumentSnapshot:eb,QuerySnapshot:rb,CollectionReference:ib,FieldPath:ob,FieldValue:ab,setLogLevel:function(e){var t;t=e,Kl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ct("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},lb)))}(e,((e,t)=>new Ww(e,t,new Bw))),e.registerVersion("@firebase/firestore-compat","0.3.32")}(vr);const cb="@firebase/database",ub="1.0.5";let hb="";function db(e){hb=e}class fb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:st(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class pb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return lt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mb=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fb(t)}}catch(YP){}return new pb},gb=mb("localStorage"),yb=mb("sessionStorage"),vb=new Ft("@firebase/database"),_b=function(){let e=1;return function(){return e++}}(),wb=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Re(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new yt;n.update(t);const r=n.digest();return Le.encodeByteArray(r)},bb=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=bb.apply(null,n):e+="object"===typeof n?ot(n):n,e+=" "}return e};let Ib=null,kb=!0;const Eb=function(e,t){Re(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(vb.logLevel=Rt.VERBOSE,Ib=vb.log.bind(vb),t&&yb.set("logging_enabled",!0)):"function"===typeof e?Ib=e:(Ib=null,yb.remove("logging_enabled"))},Sb=function(){if(!0===kb&&(kb=!1,null===Ib&&!0===yb.get("logging_enabled")&&Eb(!0)),Ib){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=bb.apply(null,t);Ib(r)}},Tb=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Sb(e,...n)}},Cb=function(){const e="FIREBASE INTERNAL ERROR: "+bb(...arguments);vb.error(e)},xb=function(){const e="FIREBASE FATAL ERROR: ".concat(bb(...arguments));throw vb.error(e),new Error(e)},Nb=function(){const e="FIREBASE WARNING: "+bb(...arguments);vb.warn(e)},Ab=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Pb="[MIN_NAME]",Rb="[MAX_NAME]",Db=function(e,t){if(e===t)return 0;if(e===Pb||t===Rb)return-1;if(t===Pb||e===Rb)return 1;{const n=zb(e),r=zb(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ob=function(e,t){return e===t?0:e<t?-1:1},Lb=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ot(t))},Mb=function(e){if("object"!==typeof e||null===e)return ot(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ot(t[r]),n+=":",n+=Mb(e[t[r]]);return n+="}",n},Fb=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function jb(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ub=function(e){Re(!Ab(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Vb=new RegExp("^-?(0*)\\d{1,10}$"),zb=function(e){if(Vb.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},qb=function(e){try{e()}catch(YP){setTimeout((()=>{const t=YP.stack||"";throw Nb("Exception was thrown by user callback.",t),YP}),Math.floor(0))}},Bb=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Wb{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Nb('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Hb{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Sb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nb(e)}}class Kb{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Kb.OWNER="owner";const Gb="5",Qb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yb="ac",Jb="websocket",$b="long_polling";class Xb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gb.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gb.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Zb(e,t,n){let r;if(Re("string"===typeof t,"typeof type must == string"),Re("object"===typeof n,"typeof params must == object"),t===Jb)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$b)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return jb(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class eI{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;lt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ve(void 0,this.counters_)}}const tI={},nI={};function rI(e){const t=e.toString();return tI[t]||(tI[t]=new eI),tI[t]}class iI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&qb((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const sI="start";class oI{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tb(e),this.stats_=rI(t),this.urlFn=e=>(this.appCheckToken&&(e[Yb]=this.appCheckToken),Zb(t,$b,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ze()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new aI((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===sI)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[sI]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Gb,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Yb]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Qb.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oI.forceAllow_=!0}static forceDisallow(){oI.forceDisallow_=!0}static isAvailable(){return!Ze()&&(!!oI.forceAllow_||!oI.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Fe(t),r=Fb(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ze())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ot(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class aI{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ze())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_b(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=aI.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(YP){Sb("frame writing exception"),YP.stack&&Sb(YP.stack),Sb(YP)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sb("No IE domain setting required")}catch(YP){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Ze()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Sb("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(YP){}}),Math.floor(1))}}let lI=null;"undefined"!==typeof MozWebSocket?lI=MozWebSocket:"undefined"!==typeof WebSocket&&(lI=WebSocket);class cI{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tb(this.connId),this.stats_=rI(t),this.connURL=cI.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Gb,!Ze()&&"undefined"!==typeof location&&location.hostname&&Qb.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Yb]=r),i&&(s.p=i),Zb(e,Jb,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gb.set("previous_websocket_failure",!0);try{let e;if(Ze()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Gb,"/").concat(hb,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new lI(this.connURL,[],e)}catch(YP){this.log_("Error instantiating WebSocket.");const t=YP.message||YP.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){cI.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==lI&&!cI.forceDisallow_}static previouslyFailed(){return gb.isInMemoryStorage||!0===gb.get("previous_websocket_failure")}markConnectionHealthy(){gb.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=st(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Re(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Fb(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(YP){this.log_("Exception thrown from WebSocket.send():",YP.message||YP.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}cI.responsesRequiredToBeHealthy=2,cI.healthyTimeout=3e4;class uI{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oI,cI]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=cI&&cI.isAvailable();let n=t&&!cI.previouslyFailed();if(e.webSocketOnly&&(t||Nb("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[cI];else{const e=this.transports_=[];for(const t of uI.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);uI.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}uI.globalTransportInitialized_=!1;class hI{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tb("c:"+this.id+":"),this.transportManager_=new uI(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Bb((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Lb("t",e),n=Lb("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Lb("t",e),n=Lb("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Lb("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Cb("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cb("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Gb!==n&&Nb("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Bb((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bb((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gb.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dI{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class fI{constructor(e){this.allowedEvents_=e,this.listeners_={},Re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Re(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class pI extends fI{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ge()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new pI}getInitialEvent(e){return Re("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const mI=32,gI=768;class yI{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vI(){return new yI("")}function _I(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function wI(e){return e.pieces_.length-e.pieceNum_}function bI(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new yI(e.pieces_,t)}function II(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function kI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function EI(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new yI(t,0)}function SI(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof yI)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new yI(n,0)}function TI(e){return e.pieceNum_>=e.pieces_.length}function CI(e,t){const n=_I(e),r=_I(t);if(null===n)return t;if(n===r)return CI(bI(e),bI(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function xI(e,t){const n=kI(e,0),r=kI(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Db(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function NI(e,t){if(wI(e)!==wI(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function AI(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(wI(e)>wI(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class PI{constructor(e,t){this.errorPrefix_=t,this.parts_=kI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=St(this.parts_[n]);RI(this)}}function RI(e){if(e.byteLength_>gI)throw new Error(e.errorPrefix_+"has a key path longer than "+gI+" bytes ("+e.byteLength_+").");if(e.parts_.length>mI)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mI+") or object contains a cycle "+DI(e))}function DI(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class OI extends fI{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new OI}getInitialEvent(e){return Re("visible"===e,"Unknown event type: "+e),[this.visible_]}}const LI=1e3;class MI extends dI{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=MI.nextPersistentConnectionId_++,this.log_=Tb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=LI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ze())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");OI.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&pI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ot(i)),Re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new We,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Re(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;MI.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&lt(e,"w")){const n=ct(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Nb("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=at(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=at(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Cb("Unrecognized action received from server: "+ot(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=LI,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=LI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=LI),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+MI.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Re(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Sb("getToken() completed but was canceled"):(Sb("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new hI(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Nb(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Cb){this.log_("Failed to get token: "+Cb),s||(this.repoInfo_.nodeAdmin&&Nb(Cb),a())}}}interrupt(e){Sb("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sb("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ut(this.interruptReasons_)&&(this.reconnectDelay_=LI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Mb(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new yI(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Sb("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Sb("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Ze()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+hb.replace(/\./g,"-")]=1,Ge()?e["framework.cordova"]=1:$e()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pI.getInstance().currentlyOnline();return ut(this.interruptReasons_)&&e}}MI.nextPersistentConnectionId_=0,MI.nextConnectionId_=0;class FI{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new FI(e,t)}}class jI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new FI(Pb,e),r=new FI(Pb,t);return 0!==this.compare(n,r)}minPost(){return FI.MIN}}let UI;class VI extends jI{static get __EMPTY_NODE(){return UI}static set __EMPTY_NODE(e){UI=e}compare(e,t){return Db(e.name,t.name)}isDefinedOn(e){throw De("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return FI.MIN}maxPost(){return new FI(Rb,UI)}makePost(e,t){return Re("string"===typeof e,"KeyIndex indexValue must always be a string."),new FI(e,UI)}toString(){return".key"}}const zI=new VI;class qI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class BI{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:BI.RED,this.left=null!=r?r:WI.EMPTY_NODE,this.right=null!=i?i:WI.EMPTY_NODE}copy(e,t,n,r,i){return new BI(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return WI.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return WI.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,BI.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,BI.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}BI.RED=!0,BI.BLACK=!1;class WI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WI.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new WI(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,BI.BLACK,null,null))}remove(e){return new WI(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,BI.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qI(this.root_,null,this.comparator_,!0,e)}}function HI(e,t){return Db(e.name,t.name)}function KI(e,t){return Db(e,t)}let GI;WI.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new BI(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const QI=function(e){return"number"===typeof e?"number:"+Ub(e):"string:"+e},YI=function(e){if(e.isLeafNode()){const t=e.val();Re("string"===typeof t||"number"===typeof t||"object"===typeof t&&lt(t,".sv"),"Priority must be a string or number.")}else Re(e===GI||e.isEmpty(),"priority of unexpected type.");Re(e===GI||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JI,$I,XI;class ZI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZI.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Re(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),YI(this.priorityNode_)}static set __childrenNodeConstructor(e){JI=e}static get __childrenNodeConstructor(){return JI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ZI(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ZI.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return TI(e)?this:".priority"===_I(e)?this.priorityNode_:ZI.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ZI.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=_I(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Re(".priority"!==n||1===wI(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ZI.__childrenNodeConstructor.EMPTY_NODE.updateChild(bI(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+QI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Ub(this.value_):this.value_,this.lazyHash_=wb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ZI.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ZI.__childrenNodeConstructor?-1:(Re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=ZI.VALUE_TYPE_ORDER.indexOf(t),i=ZI.VALUE_TYPE_ORDER.indexOf(n);return Re(r>=0,"Unknown leaf type: "+t),Re(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ZI.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ek=new class extends jI{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Db(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return FI.MIN}maxPost(){return new FI(Rb,new ZI("[PRIORITY-POST]",XI))}makePost(e,t){const n=$I(e);return new FI(t,new ZI("[PRIORITY-POST]",n))}toString(){return".priority"}},tk=Math.log(2);class nk{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/tk,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rk=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new BI(a,o.node,BI.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new BI(a,o.node,BI.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new BI(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,BI.BLACK):(a(r,BI.BLACK),a(r,BI.RED))}return s}(new nk(e.length));return new WI(r||t,s)};let ik;const sk={};class ok{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Re(sk&&ek,"ChildrenNode.ts has not been loaded"),ik=ik||new ok({".priority":sk},{".priority":ek}),ik}get(e){const t=ct(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof WI?t:null}hasIndex(e){return lt(this.indexSet_,e.toString())}addIndex(e,t){Re(e!==zI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(FI.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?rk(n,e.getCompare()):sk;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new ok(c,l)}addToIndexes(e,t){const n=ht(this.indexes_,((n,r)=>{const i=ct(this.indexSet_,r);if(Re(i,"Missing index implementation for "+r),n===sk){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(FI.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),rk(n,i.getCompare())}return sk}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new FI(e.name,r))),i.insert(e,e.node)}}));return new ok(n,this.indexSet_)}removeFromIndexes(e,t){const n=ht(this.indexes_,(n=>{if(n===sk)return n;{const r=t.get(e.name);return r?n.remove(new FI(e.name,r)):n}}));return new ok(n,this.indexSet_)}}let ak;class lk{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&YI(this.priorityNode_),this.children_.isEmpty()&&Re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ak||(ak=new lk(new WI(KI),null,ok.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ak}updatePriority(e){return this.children_.isEmpty()?this:new lk(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ak:t}}getChild(e){const t=_I(e);return null===t?this:this.getImmediateChild(t).getChild(bI(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Re(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new FI(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?ak:this.priorityNode_;return new lk(r,s,i)}}updateChild(e,t){const n=_I(e);if(null===n)return t;{Re(".priority"!==_I(e)||1===wI(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(bI(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(ek,((s,o)=>{t[s]=o.val(e),n++,i&&lk.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+QI(this.getPriority().val())+":"),this.forEachChild(ek,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":wb(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new FI(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new FI(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new FI(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,FI.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,FI.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ck?-1:0}withIndex(e){if(e===zI||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new lk(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===zI||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ek),n=t.getIterator(ek);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===zI?null:this.indexMap_.get(e.toString())}}lk.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ck=new class extends lk{constructor(){super(new WI(KI),lk.EMPTY_NODE,ok.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lk.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(FI,{MIN:{value:new FI(Pb,lk.EMPTY_NODE)},MAX:{value:new FI(Rb,ck)}}),VI.__EMPTY_NODE=lk.EMPTY_NODE,ZI.__childrenNodeConstructor=lk,GI=ck,function(e){XI=e}(ck);const uk=!0;function hk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lk.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Re(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new ZI(e,hk(t))}if(e instanceof Array||!uk){let n=lk.EMPTY_NODE;return jb(e,((t,r)=>{if(lt(e,t)&&"."!==t.substring(0,1)){const e=hk(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(hk(t))}{const n=[];let r=!1;if(jb(e,((e,t)=>{if("."!==e.substring(0,1)){const i=hk(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new FI(e,i)))}})),0===n.length)return lk.EMPTY_NODE;const i=rk(n,HI,(e=>e.name),KI);if(r){const e=rk(n,ek.getCompare());return new lk(i,hk(t),new ok({".priority":e},{".priority":ek}))}return new lk(i,hk(t),ok.Default)}}!function(e){$I=e}(hk);class dk extends jI{constructor(e){super(),this.indexPath_=e,Re(!TI(e)&&".priority"!==_I(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Db(e.name,t.name):i}makePost(e,t){const n=hk(e),r=lk.EMPTY_NODE.updateChild(this.indexPath_,n);return new FI(t,r)}maxPost(){const e=lk.EMPTY_NODE.updateChild(this.indexPath_,ck);return new FI(Rb,e)}toString(){return kI(this.indexPath_,0).join("/")}}const fk=new class extends jI{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Db(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return FI.MIN}maxPost(){return FI.MAX}makePost(e,t){const n=hk(e);return new FI(t,n)}toString(){return".value"}};function pk(e){return{type:"value",snapshotNode:e}}function mk(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yk(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class vk{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Re(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(gk(t,o)):Re(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(mk(t,n)):s.trackChildChange(yk(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ek,((e,r)=>{t.hasChild(e)||n.trackChildChange(gk(e,r))})),t.isLeafNode()||t.forEachChild(ek,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yk(t,r,i))}else n.trackChildChange(mk(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?lk.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _k{constructor(e){this.indexedFilter_=new vk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_k.getStartPost_(e),this.endPost_=_k.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new FI(t,n))||(n=lk.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=lk.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(lk.EMPTY_NODE);const i=this;return t.forEachChild(ek,((e,t)=>{i.matches(new FI(e,t))||(r=r.updateImmediateChild(e,lk.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class wk{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new _k(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new FI(t,n))||(n=lk.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=lk.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=lk.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(lk.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,lk.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Re(o.numChildren()===this.limit_,"");const a=new FI(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(yk(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(gk(t,e));const n=o.updateImmediateChild(t,lk.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(mk(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(gk(l.name,l.node)),i.trackChildChange(mk(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,lk.EMPTY_NODE)):e}}class bk{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ek}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pb}hasEnd(){return this.endSet_}getIndexEndValue(){return Re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rb}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ek}copy(){const e=new bk;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ik(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function kk(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ek(e,t){const n=e.copy();return n.index_=t,n}function Sk(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ek?n="$priority":e.index_===fk?n="$value":e.index_===zI?n="$key":(Re(e.index_ instanceof dk,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ot(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ot(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ot(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ot(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ot(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Tk(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ek&&(t.i=e.index_.toString()),t}class Ck extends dI{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Tb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Ck.getListenId_(e,n),o={};this.listens_[s]=o;const a=Sk(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),ct(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ck.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Sk(e._queryParams),n=e._path.toString(),r=new We;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pt(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=st(a.responseText)}catch(YP){Nb("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Nb("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class xk{constructor(){this.rootNode_=lk.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Nk(){return{value:null,children:new Map}}function Ak(e,t,n){if(TI(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=_I(t);e.children.has(r)||e.children.set(r,Nk());Ak(e.children.get(r),t=bI(t),n)}}function Pk(e,t){if(TI(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(ek,((t,n)=>{Ak(e,new yI(t),n)})),Pk(e,t)}}if(e.children.size>0){const n=_I(t);if(t=bI(t),e.children.has(n)){Pk(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Rk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Rk(r,new yI(t.toString()+"/"+e),n)}))}class Dk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jb(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ok{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Dk(e);const n=1e4+2e4*Math.random();Bb(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;jb(e,((e,r)=>{r>0&&lt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Bb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Lk;function Mk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Lk||(Lk={}));class Fk{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Lk.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(TI(this.path)){if(null!=this.affectedTree.value)return Re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yI(e));return new Fk(vI(),t,this.revert)}}return Re(_I(this.path)===e,"operationForChild called for unrelated child."),new Fk(bI(this.path),this.affectedTree,this.revert)}}class jk{constructor(e,t){this.source=e,this.path=t,this.type=Lk.LISTEN_COMPLETE}operationForChild(e){return TI(this.path)?new jk(this.source,vI()):new jk(this.source,bI(this.path))}}class Uk{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Lk.OVERWRITE}operationForChild(e){return TI(this.path)?new Uk(this.source,vI(),this.snap.getImmediateChild(e)):new Uk(this.source,bI(this.path),this.snap)}}class Vk{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Lk.MERGE}operationForChild(e){if(TI(this.path)){const t=this.children.subtree(new yI(e));return t.isEmpty()?null:t.value?new Uk(this.source,vI(),t.value):new Vk(this.source,vI(),t)}return Re(_I(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vk(this.source,bI(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zk{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(TI(e))return this.isFullyInitialized()&&!this.filtered_;const t=_I(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class qk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Bk(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw De("Should only compare child_ events.");const r=new FI(t.childName,t.snapshotNode),i=new FI(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Wk(e,t){return{eventCache:e,serverCache:t}}function Hk(e,t,n,r){return Wk(new zk(t,n,r),e.serverCache)}function Kk(e,t,n,r){return Wk(e.eventCache,new zk(t,n,r))}function Gk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Qk(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Yk;class Jk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Yk||(Yk=new WI(Ob)),Yk);this.value=e,this.children=t}static fromObject(e){let t=new Jk(null);return jb(e,((e,n)=>{t=t.set(new yI(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vI(),value:this.value};if(TI(e))return null;{const n=_I(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(bI(e),t);if(null!=i){return{path:SI(new yI(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(TI(e))return this;{const t=_I(e),n=this.children.get(t);return null!==n?n.subtree(bI(e)):new Jk(null)}}set(e,t){if(TI(e))return new Jk(t,this.children);{const n=_I(e),r=(this.children.get(n)||new Jk(null)).set(bI(e),t),i=this.children.insert(n,r);return new Jk(this.value,i)}}remove(e){if(TI(e))return this.children.isEmpty()?new Jk(null):new Jk(null,this.children);{const t=_I(e),n=this.children.get(t);if(n){const r=n.remove(bI(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Jk(null):new Jk(this.value,i)}return this}}get(e){if(TI(e))return this.value;{const t=_I(e),n=this.children.get(t);return n?n.get(bI(e)):null}}setTree(e,t){if(TI(e))return t;{const n=_I(e),r=(this.children.get(n)||new Jk(null)).setTree(bI(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Jk(this.value,i)}}fold(e){return this.fold_(vI(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(SI(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,vI(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(TI(e))return null;{const r=_I(e),i=this.children.get(r);return i?i.findOnPath_(bI(e),SI(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vI(),t)}foreachOnPath_(e,t,n){if(TI(e))return this;{this.value&&n(t,this.value);const r=_I(e),i=this.children.get(r);return i?i.foreachOnPath_(bI(e),SI(t,r),n):new Jk(null)}}foreach(e){this.foreach_(vI(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(SI(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class $k{constructor(e){this.writeTree_=e}static empty(){return new $k(new Jk(null))}}function Xk(e,t,n){if(TI(t))return new $k(new Jk(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=CI(i,t);return s=s.updateChild(o,n),new $k(e.writeTree_.set(i,s))}{const r=new Jk(n),i=e.writeTree_.setTree(t,r);return new $k(i)}}}function Zk(e,t,n){let r=e;return jb(n,((e,n)=>{r=Xk(r,SI(t,e),n)})),r}function eE(e,t){if(TI(t))return $k.empty();{const n=e.writeTree_.setTree(t,new Jk(null));return new $k(n)}}function tE(e,t){return null!=nE(e,t)}function nE(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(CI(n.path,t)):null}function rE(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ek,((e,n)=>{t.push(new FI(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new FI(e,n.value))})),t}function iE(e,t){if(TI(t))return e;{const n=nE(e,t);return new $k(null!=n?new Jk(n):e.writeTree_.subtree(t))}}function sE(e){return e.writeTree_.isEmpty()}function oE(e,t){return aE(vI(),e.writeTree_,t)}function aE(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Re(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=aE(SI(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(SI(e,".priority"),r)),n}}function lE(e,t){return bE(t,e)}function cE(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Re(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&uE(t,r.path)?i=!1:AI(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=dE(e.allWrites,hE,vI()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=eE(e.visibleWrites,r.path);else{jb(r.children,(t=>{e.visibleWrites=eE(e.visibleWrites,SI(r.path,t))}))}return!0}return!1}function uE(e,t){if(e.snap)return AI(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&AI(SI(e.path,n),t))return!0;return!1}function hE(e){return e.visible}function dE(e,t,n){let r=$k.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)AI(n,e)?(t=CI(n,e),r=Xk(r,t,s.snap)):AI(e,n)&&(t=CI(e,n),r=Xk(r,vI(),s.snap.getChild(t)));else{if(!s.children)throw De("WriteRecord should have .snap or .children");if(AI(n,e))t=CI(n,e),r=Zk(r,t,s.children);else if(AI(e,n))if(t=CI(e,n),TI(t))r=Zk(r,vI(),s.children);else{const e=ct(s.children,_I(t));if(e){const n=e.getChild(bI(t));r=Xk(r,vI(),n)}}}}}return r}function fE(e,t,n,r,i){if(r||i){const s=iE(e.visibleWrites,t);if(!i&&sE(s))return n;if(i||null!=n||tE(s,vI())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(AI(e.path,t)||AI(t,e.path))};return oE(dE(e.allWrites,s,t),n||lk.EMPTY_NODE)}return null}{const r=nE(e.visibleWrites,t);if(null!=r)return r;{const r=iE(e.visibleWrites,t);if(sE(r))return n;if(null!=n||tE(r,vI())){return oE(r,n||lk.EMPTY_NODE)}return null}}}function pE(e,t,n,r){return fE(e.writeTree,e.treePath,t,n,r)}function mE(e,t){return function(e,t,n){let r=lk.EMPTY_NODE;const i=nE(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ek,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=iE(e.visibleWrites,t);return n.forEachChild(ek,((e,t)=>{const n=oE(iE(i,new yI(e)),t);r=r.updateImmediateChild(e,n)})),rE(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return rE(iE(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function gE(e,t,n,r){return function(e,t,n,r,i){Re(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=SI(t,n);if(tE(e.visibleWrites,s))return null;{const t=iE(e.visibleWrites,s);return sE(t)?i.getChild(n):oE(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function yE(e,t){return function(e,t){return nE(e.visibleWrites,t)}(e.writeTree,SI(e.treePath,t))}function vE(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=iE(e.visibleWrites,t),c=nE(l,vI());if(null!=c)a=c;else{if(null==n)return[];a=oE(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function _E(e,t,n){return function(e,t,n,r){const i=SI(t,n),s=nE(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return oE(iE(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function wE(e,t){return bE(SI(e.treePath,t),e.writeTree)}function bE(e,t){return{treePath:e,writeTree:t}}class IE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Re("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Re(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,yk(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,gk(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mk(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw De("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yk(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const kE=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class EE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new zk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _E(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qk(this.viewCache_),i=vE(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function SE(e,t,n,r,i){const s=new IE;let o,a;if(n.type===Lk.OVERWRITE){const l=n;l.source.fromUser?o=xE(e,t,l.path,l.snap,r,i,s):(Re(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!TI(l.path),o=CE(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Lk.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=SI(n,r);NE(t,_I(c))&&(a=xE(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=SI(n,r);NE(t,_I(c))||(a=xE(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Re(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=PE(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Lk.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=yE(r,n))return t;{const a=new EE(r,t,i),l=t.eventCache.getNode();let c;if(TI(n)||".priority"===_I(n)){let n;if(t.serverCache.isFullyInitialized())n=pE(r,Qk(t));else{const e=t.serverCache.getNode();Re(e instanceof lk,"serverChildren would be complete if leaf node"),n=mE(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=_I(n);let u=_E(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,bI(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,lk.EMPTY_NODE,bI(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=pE(r,Qk(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=yE(r,vI()),Hk(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=yE(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(TI(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return CE(e,t,n,l.getNode().getChild(n),i,s,a,o);if(TI(n)){let r=new Jk(null);return l.getNode().forEachChild(zI,((e,t)=>{r=r.set(new yI(e),t)})),PE(e,t,n,r,i,s,a,o)}return t}{let c=new Jk(null);return r.foreach(((e,t)=>{const r=SI(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),PE(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Lk.LISTEN_COMPLETE)throw De("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Kk(t,s.getNode(),s.isFullyInitialized()||TI(n),s.isFiltered());return TE(e,o,n,r,kE,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gk(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pk(Gk(t)))}}(t,o,l),{viewCache:o,changes:l}}function TE(e,t,n,r,i,s){const o=t.eventCache;if(null!=yE(r,n))return t;{let a,l;if(TI(n))if(Re(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Qk(t),i=mE(r,n instanceof lk?n:lk.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=pE(r,Qk(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=_I(n);if(".priority"===c){Re(1===wI(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=gE(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=bI(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=gE(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=_E(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Hk(t,a,o.isFullyInitialized()||TI(n),e.filter.filtersNodes())}}function CE(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(TI(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=_I(n);if(!l.isCompleteForPath(n)&&wI(n)>1)return t;const i=bI(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,kE,null)}const h=Kk(t,c,l.isFullyInitialized()||TI(n),u.filtersNodes());return TE(e,h,n,i,new EE(i,h,s),a)}function xE(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new EE(i,t,s);if(TI(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Hk(t,c,!0,e.filter.filtersNodes());else{const i=_I(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Hk(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=bI(n),c=a.getNode().getImmediateChild(i);let h;if(TI(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===II(s)&&e.getChild(EI(s)).isEmpty()?e:e.updateChild(s,r):lk.EMPTY_NODE}if(c.equals(h))l=t;else{l=Hk(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function NE(e,t){return e.eventCache.isCompleteForChild(t)}function AE(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function PE(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=TI(n)?r:new Jk(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=AE(0,t.serverCache.getNode().getImmediateChild(n),r);c=CE(e,c,new yI(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=AE(0,t.serverCache.getNode().getImmediateChild(n),r);c=CE(e,c,new yI(n),l,i,s,o,a)}})),c}class RE{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new vk(n.getIndex()),i=(s=n).loadsAllData()?new vk(s.getIndex()):s.hasLimit()?new wk(s):new _k(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(lk.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(lk.EMPTY_NODE,a.getNode(),null),u=new zk(l,o.isFullyInitialized(),r.filtersNodes()),h=new zk(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wk(h,u),this.eventGenerator_=new qk(this.query_)}get query(){return this.query_}}function DE(e,t){const n=Qk(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!TI(t)&&!n.getImmediateChild(_I(t)).isEmpty())?n.getChild(t):null}function OE(e){return 0===e.eventRegistrations_.length}function LE(e,t,n){const r=[];if(n){Re(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function ME(e,t,n,r){t.type===Lk.MERGE&&null!==t.source.queryId&&(Re(Qk(e.viewCache_),"We should always have a full cache before handling merges"),Re(Gk(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=SE(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Re(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Re(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Re(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,FE(e,s.changes,s.viewCache.eventCache.getNode(),null)}function FE(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Bk(e,i,"child_removed",t,r,n),Bk(e,i,"child_added",t,r,n),Bk(e,i,"child_moved",s,r,n),Bk(e,i,"child_changed",t,r,n),Bk(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let jE,UE;class VE{constructor(){this.views=new Map}}function zE(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Re(null!=s,"SyncTree gave us an op for an invalid query."),ME(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(ME(s,t,n,r));return i}}function qE(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=pE(n,i?r:null),s=!1;e?s=!0:r instanceof lk?(e=mE(n,r),s=!1):(e=lk.EMPTY_NODE,s=!1);const o=Wk(new zk(e,s,!1),new zk(r,i,!1));return new RE(t,o)}return o}function BE(e,t,n,r,i,s){const o=qE(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(ek,((e,t)=>{r.push(mk(e,t))}));return n.isFullyInitialized()&&r.push(pk(n.getNode())),FE(e,r,n.getNode(),t)}(o,n)}function WE(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=YE(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(LE(c,n,r)),OE(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(LE(t,n,r)),OE(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!YE(e)&&s.push(new(Re(jE,"Reference.ts has not been loaded"),jE)(t._repo,t._path)),{removed:s,events:o}}function HE(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function KE(e,t){let n=null;for(const r of e.views.values())n=n||DE(r,t);return n}function GE(e,t){if(t._queryParams.loadsAllData())return JE(e);{const n=t._queryIdentifier;return e.views.get(n)}}function QE(e,t){return null!=GE(e,t)}function YE(e){return null!=JE(e)}function JE(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let $E=1;class XE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jk(null),this.pendingWriteTree_={visibleWrites:$k.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZE(e,t,n,r,i){return function(e,t,n,r,i){Re(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xk(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?lS(e,new Uk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function eS(e,t,n,r){!function(e,t,n,r){Re(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Zk(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Jk.fromObject(n);return lS(e,new Vk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function tS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(cE(e.pendingWriteTree_,t)){let t=new Jk(null);return null!=r.snap?t=t.set(vI(),!0):jb(r.children,(e=>{t=t.set(new yI(e),!0)})),lS(e,new Fk(r.path,t,n))}return[]}function nS(e,t,n){return lS(e,new Uk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rS(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||QE(o,t))){const l=WE(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>YE(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&YE(t)){return[JE(t)]}{let e=[];return t&&(e=HE(t)),jb(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=hS(e,r);e.listenProvider_.startListening(yS(i),dS(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(yS(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(fS(t));e.listenProvider_.stopListening(yS(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=fS(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function iS(e,t,n,r){const i=pS(e,r);if(null!=i){const r=mS(i),s=r.path,o=r.queryId,a=CI(s,t);return gS(e,s,new Uk(Mk(o),a,n))}return[]}function sS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=CI(e,i);s=s||KE(t,n),o=o||YE(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||YE(l),s=s||KE(l,vI())):(l=new VE,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=lk.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=KE(t,vI());n&&(s=s.updateImmediateChild(e,n))}))}const c=QE(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=fS(t);Re(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=$E++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=BE(l,t,n,lE(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=GE(l,t);u=u.concat(function(e,t,n){const r=t._path,i=dS(e,t),s=hS(e,n),o=e.listenProvider_.startListening(yS(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Re(!YE(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!TI(e)&&t&&YE(t))return[JE(t).query];{let e=[];return t&&(e=e.concat(HE(t).map((e=>e.query)))),jb(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(yS(r),dS(e,r))}}return o}(e,t,n))}return u}function oS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=KE(n,CI(e,t));if(r)return r}));return fE(r,t,i,n,!0)}function aS(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=CI(e,n);r=r||KE(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||KE(i,vI()):(i=new VE,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new zk(r,!0,!1):null;return function(e){return Gk(e.viewCache_)}(qE(i,t,lE(e.pendingWriteTree_,t._path),s?o.getNode():lk.EMPTY_NODE,s))}function lS(e,t){return cS(t,e.syncPointTree_,null,lE(e.pendingWriteTree_,vI()))}function cS(e,t,n,r){if(TI(e.path))return uS(e,t,n,r);{const i=t.get(vI());null==n&&null!=i&&(n=KE(i,vI()));let s=[];const o=_I(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=wE(r,o);s=s.concat(cS(a,l,e,t))}return i&&(s=s.concat(zE(i,e,r,n))),s}}function uS(e,t,n,r){const i=t.get(vI());null==n&&null!=i&&(n=KE(i,vI()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=wE(r,t),l=e.operationForChild(t);l&&(s=s.concat(uS(l,i,o,a)))})),i&&(s=s.concat(zE(i,e,r,n))),s}function hS(e,t){const n=t.query,r=dS(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||lk.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=pS(e,n);if(r){const n=mS(r),i=n.path,s=n.queryId,o=CI(i,t);return gS(e,i,new jk(Mk(s),o))}return[]}(e,n._path,r):function(e,t){return lS(e,new jk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return rS(e,n,null,r)}}}}function dS(e,t){const n=fS(t);return e.queryToTagMap.get(n)}function fS(e){return e._path.toString()+"$"+e._queryIdentifier}function pS(e,t){return e.tagToQueryMap.get(t)}function mS(e){const t=e.indexOf("$");return Re(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new yI(e.substr(0,t))}}function gS(e,t,n){const r=e.syncPointTree_.get(t);Re(r,"Missing sync point for query tag that we're tracking");return zE(r,n,lE(e.pendingWriteTree_,t),null)}function yS(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Re(UE,"Reference.ts has not been loaded"),UE)(e._repo,e._path):e}class vS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vS(t)}node(){return this.node_}}class _S{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=SI(this.path_,e);return new _S(this.syncTree_,t)}node(){return oS(this.syncTree_,this.path_)}}const wS=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},bS=function(e,t,n){return e&&"object"===typeof e?(Re(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?IS(e[".sv"],t,n):"object"===typeof e[".sv"]?kS(e[".sv"],t):void Re(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},IS=function(e,t,n){if("timestamp"===e)return n.timestamp;Re(!1,"Unexpected server value: "+e)},kS=function(e,t,n){e.hasOwnProperty("increment")||Re(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Re(!1,"Unexpected increment value: "+r);const i=t.node();if(Re(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},ES=function(e,t,n,r){return TS(t,new _S(n,e),r)},SS=function(e,t,n){return TS(e,new vS(t),n)};function TS(e,t,n){const r=e.getPriority().val(),i=bS(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=bS(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new ZI(s,hk(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new ZI(i))),r.forEachChild(ek,((e,r)=>{const i=TS(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class CS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function xS(e,t){let n=t instanceof yI?t:new yI(t),r=e,i=_I(n);for(;null!==i;){const e=ct(r.node.children,i)||{children:{},childCount:0};r=new CS(i,r,e),n=bI(n),i=_I(n)}return r}function NS(e){return e.node.value}function AS(e,t){e.node.value=t,LS(e)}function PS(e){return e.node.childCount>0}function RS(e,t){jb(e.node.children,((n,r)=>{t(new CS(n,e,r))}))}function DS(e,t,n,r){n&&!r&&t(e),RS(e,(e=>{DS(e,t,!0,r)})),n&&r&&t(e)}function OS(e){return new yI(null===e.parent?e.name:OS(e.parent)+"/"+e.name)}function LS(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===NS(e)&&!PS(e)}(n),i=lt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,LS(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,LS(e))}(e.parent,e.name,e)}const MS=/[\[\].#$\/\u0000-\u001F\u007F]/,FS=/[\[\].#$\u0000-\u001F\u007F]/,jS=10485760,US=function(e){return"string"===typeof e&&0!==e.length&&!MS.test(e)},VS=function(e){return"string"===typeof e&&0!==e.length&&!FS.test(e)},zS=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Ab(e)||e&&"object"===typeof e&&lt(e,".sv")},qS=function(e,t,n,r){r&&void 0===t||BS(It(e,"value"),t,n)},BS=function(e,t,n){const r=n instanceof yI?new PI(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+DI(r));if("function"===typeof t)throw new Error(e+"contains a function "+DI(r)+" with contents = "+t.toString());if(Ab(t))throw new Error(e+"contains "+t.toString()+" "+DI(r));if("string"===typeof t&&t.length>jS/3&&St(t)>jS)throw new Error(e+"contains a string greater than "+jS+" utf8 bytes "+DI(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(jb(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!US(t)))throw new Error(e+" contains an invalid key ("+t+") "+DI(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=St(t),RI(e)}(r,t),BS(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=St(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+DI(r)+" in addition to actual children.")}},WS=function(e,t,n,r){if(r&&void 0===t)return;const i=It(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];jb(t,((e,t)=>{const r=new yI(e);if(BS(i,t,SI(n,r)),".priority"===II(r)&&!zS(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=kI(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!US(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(xI);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&AI(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},HS=function(e,t,n){if(!n||void 0!==t){if(Ab(t))throw new Error(It(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zS(t))throw new Error(It(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},KS=function(e,t,n,r){if((!r||void 0!==n)&&!US(n))throw new Error(It(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},GS=function(e,t,n,r){if((!r||void 0!==n)&&!VS(n))throw new Error(It(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},QS=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GS(e,t,n,r)},YS=function(e,t){if(".info"===_I(t))throw new Error(e+" failed = Can't modify data under /.info/")},JS=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!US(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),VS(e)}(n))throw new Error(It(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $S{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XS(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||NI(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function ZS(e,t,n){XS(e,n),tT(e,(e=>NI(e,t)))}function eT(e,t,n){XS(e,n),tT(e,(e=>AI(e,t)||AI(t,e)))}function tT(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(nT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function nT(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Ib&&Sb("event: "+n.toString()),qb(r)}}}const rT="repo_interrupt",iT=25;class sT{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $S,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nk(),this.transactionQueueTree_=new CS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oT(e,t,n){if(e.stats_=rI(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ck(e.repoInfo_,((t,n,r,i)=>{cT(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>uT(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(YP){throw new Error("Invalid authOverride provided: "+YP)}}e.persistentConnection_=new MI(e.repoInfo_,t,((t,n,r,i)=>{cT(e,t,n,r,i)}),(t=>{uT(e,t)}),(t=>{!function(e,t){jb(t,((t,n)=>{hT(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return nI[n]||(nI[n]=t()),nI[n]}(e.repoInfo_,(()=>new Ok(e.stats_,e.server_))),e.infoData_=new xk,e.infoSyncTree_=new XE({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=nS(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),hT(e,"connected",!1),e.serverSyncTree_=new XE({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);eT(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function aT(e){const t=e.infoData_.getNode(new yI(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lT(e){return wS({timestamp:aT(e)})}function cT(e,t,n,r,i){e.dataUpdateCount++;const s=new yI(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=ht(n,(e=>hk(e)));o=function(e,t,n,r){const i=pS(e,r);if(i){const r=mS(i),s=r.path,o=r.queryId,a=CI(s,t),l=Jk.fromObject(n);return gS(e,s,new Vk(Mk(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=hk(n);o=iS(e.serverSyncTree_,s,t,i)}else if(r){const t=ht(n,(e=>hk(e)));o=function(e,t,n){const r=Jk.fromObject(n);return lS(e,new Vk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=hk(n);o=nS(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=IT(e,s)),eT(e.eventQueue_,a,o)}function uT(e,t){hT(e,"connected",t),!1===t&&function(e){vT(e,"onDisconnectEvents");const t=lT(e),n=Nk();Rk(e.onDisconnect_,vI(),((r,i)=>{const s=ES(r,i,e.serverSyncTree_,t);Ak(n,r,s)}));let r=[];Rk(n,vI(),((t,n)=>{r=r.concat(nS(e.serverSyncTree_,t,n));const i=CT(e,t);IT(e,i)})),e.onDisconnect_=Nk(),eT(e.eventQueue_,vI(),r)}(e)}function hT(e,t,n){const r=new yI("/.info/"+t),i=hk(n);e.infoData_.updateSnapshot(r,i);const s=nS(e.infoSyncTree_,r,i);eT(e.eventQueue_,r,s)}function dT(e){return e.nextWriteId_++}function fT(e,t,n,r,i){vT(e,"set",{path:t.toString(),value:n,priority:r});const s=lT(e),o=hk(n,r),a=oS(e.serverSyncTree_,t),l=SS(o,a,s),c=dT(e),u=ZE(e.serverSyncTree_,t,l,c,!0);XS(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||Nb("set at "+t+" failed: "+n);const o=tS(e.serverSyncTree_,c,!s);eT(e.eventQueue_,t,o),_T(e,i,n,r)}));const h=CT(e,t);IT(e,h),eT(e.eventQueue_,h,[])}function pT(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Pk(e.onDisconnect_,t),_T(e,n,r,i)}))}function mT(e,t,n,r){const i=hk(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Ak(e.onDisconnect_,t,i),_T(e,r,n,s)}))}function gT(e,t,n){let r;r=".info"===_I(t._path)?rS(e.infoSyncTree_,t,n):rS(e.serverSyncTree_,t,n),ZS(e.eventQueue_,t._path,r)}function yT(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rT)}function vT(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Sb(t,...r)}function _T(e,t,n,r){t&&qb((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function wT(e,t,n){return oS(e.serverSyncTree_,t,n)||lk.EMPTY_NODE}function bT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||TT(e,t),NS(t)){const n=ET(e,t);Re(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=wT(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Re(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=CI(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{vT(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(tS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();TT(e,xS(e.transactionQueueTree_,t)),bT(e,e.transactionQueueTree_),eT(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)qb(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Nb("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}IT(e,t)}}),o)}(e,OS(t),n)}else PS(t)&&RS(t,(t=>{bT(e,t)}))}function IT(e,t){const n=kT(e,t),r=OS(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=CI(n,s.path);let u,h=!1;if(Re(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(tS(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=iT)h=!0,u="maxretry",i=i.concat(tS(e.serverSyncTree_,s.currentWriteId,!0));else{const n=wT(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){BS("transaction failed: Data returned ",r,s.path);let t=hk(r);"object"===typeof r&&null!=r&&lt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=lT(e),c=SS(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=dT(e),o.splice(o.indexOf(a),1),i=i.concat(ZE(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(tS(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(tS(e.serverSyncTree_,s.currentWriteId,!0))}eT(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;TT(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)qb(r[l]);bT(e,e.transactionQueueTree_)}(e,ET(e,n),r),r}function kT(e,t){let n,r=e.transactionQueueTree_;for(n=_I(t);null!==n&&void 0===NS(r);)r=xS(r,n),n=_I(t=bI(t));return r}function ET(e,t){const n=[];return ST(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function ST(e,t,n){const r=NS(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);RS(t,(t=>{ST(e,t,n)}))}function TT(e,t){const n=NS(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,AS(t,n.length>0?n:void 0)}RS(t,(t=>{TT(e,t)}))}function CT(e,t){const n=OS(kT(e,t)),r=xS(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{xT(e,t)})),xT(e,r),DS(r,(t=>{xT(e,t)})),n}function xT(e,t){const n=NS(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Re(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Re(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(tS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?AS(t,void 0):n.length=s+1,eT(e.eventQueue_,OS(t),i);for(let e=0;e<r.length;e++)qb(r[e])}}const NT=function(e,t){const n=AT(e),r=n.namespace;"firebase.com"===n.domain&&xb(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||xb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Nb("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Xb(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new yI(n.pathString)}},AT=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(YP){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Nb("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},PT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",RT=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=PT.charAt(n%64),n=Math.floor(n/64);Re(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=PT.charAt(t[i]);return Re(20===o.length,"nextPushId: Length should be 20."),o}}();class DT{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class OT{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class LT{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Re(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class MT{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new We;return pT(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){YS("OnDisconnect.remove",this._path);const e=new We;return mT(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){YS("OnDisconnect.set",this._path),qS("OnDisconnect.set",e,this._path,!1);const t=new We;return mT(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){YS("OnDisconnect.setWithPriority",this._path),qS("OnDisconnect.setWithPriority",e,this._path,!1),HS("OnDisconnect.setWithPriority",t,!1);const n=new We;return function(e,t,n,r,i){const s=hk(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Ak(e.onDisconnect_,t,s),_T(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){YS("OnDisconnect.update",this._path),WS("OnDisconnect.update",e,this._path,!1);const t=new We;return function(e,t,n,r){if(ut(n))return Sb("onDisconnect().update() called with empty data.  Don't do anything."),void _T(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&jb(n,((n,r)=>{const i=hk(r);Ak(e.onDisconnect_,SI(t,n),i)})),_T(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class FT{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return TI(this._path)?null:II(this._path)}get ref(){return new zT(this._repo,this._path)}get _queryIdentifier(){const e=Tk(this._queryParams),t=Mb(e);return"{}"===t?"default":t}get _queryObject(){return Tk(this._queryParams)}isEqual(e){if(!((e=Tt(e))instanceof FT))return!1;const t=this._repo===e._repo,n=NI(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function jT(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function UT(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===zI){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Pb)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Rb)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ek){if(null!=t&&!zS(t)||null!=n&&!zS(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Re(e.getIndex()instanceof dk||e.getIndex()===fk,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function VT(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class zT extends FT{constructor(e,t){super(e,t,new bk,!1)}get parent(){const e=EI(this._path);return null===e?null:new zT(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qT{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new yI(e),n=HT(this.ref,e);return new qT(this._node.getChild(t),n,ek)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new qT(n,HT(this.ref,t),ek))))}hasChild(e){const t=new yI(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function BT(e,t){return(e=Tt(e))._checkNotDeleted("ref"),void 0!==t?HT(e._root,t):e._root}function WT(e,t){(e=Tt(e))._checkNotDeleted("refFromURL");const n=NT(t,e._repo.repoInfo_.nodeAdmin);JS("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||xb("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),BT(e,n.path.toString())}function HT(e,t){return null===_I((e=Tt(e))._path)?QS("child","path",t,!1):GS("child","path",t,!1),new zT(e._repo,SI(e._path,t))}function KT(e,t){e=Tt(e),YS("set",e._path),qS("set",t,e._path,!1);const n=new We;return fT(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function GT(e,t){WS("update",t,e._path,!1);const n=new We;return function(e,t,n,r){vT(e,"update",{path:t.toString(),value:n});let i=!0;const s=lT(e),o={};if(jb(n,((n,r)=>{i=!1,o[n]=ES(SI(t,n),hk(r),e.serverSyncTree_,s)})),i)Sb("update() called with empty data.  Don't do anything."),_T(0,r,"ok",void 0);else{const i=dT(e),s=eS(e.serverSyncTree_,t,o,i);XS(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||Nb("update at "+t+" failed: "+n);const a=tS(e.serverSyncTree_,i,!o),l=a.length>0?IT(e,t):t;eT(e.eventQueue_,l,a),_T(0,r,n,s)})),jb(n,(n=>{const r=CT(e,SI(t,n));IT(e,r)})),eT(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function QT(e){e=Tt(e);const t=new LT((()=>{})),n=new YT(t);return function(e,t,n){const r=aS(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=hk(r).withIndex(t._queryParams.getIndex());let s;if(sS(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=nS(e.serverSyncTree_,t._path,i);else{const n=dS(e.serverSyncTree_,t);s=iS(e.serverSyncTree_,t._path,i,n)}return eT(e.eventQueue_,t._path,s),rS(e.serverSyncTree_,t,n,null,!0),i}),(n=>(vT(e,"get for query "+ot(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new qT(t,new zT(e._repo,e._path),e._queryParams.getIndex())))}class YT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new DT("value",this,new qT(e.snapshotNode,new zT(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OT(this,e,t):null}matches(e){return e instanceof YT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class JT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new OT(this,e,t):null}createEvent(e,t){Re(null!=e.childName,"Child events should have a childName.");const n=HT(new zT(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new DT(e.type,this,new qT(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof JT&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function $T(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{gT(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new LT(n,s||void 0),a="value"===t?new YT(o):new JT(t,o);return function(e,t,n){let r;r=".info"===_I(t._path)?sS(e.infoSyncTree_,t,n):sS(e.serverSyncTree_,t,n),ZS(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>gT(e._repo,e,a)}function XT(e,t,n,r){return $T(e,"value",t,n,r)}function ZT(e,t,n,r){return $T(e,"child_added",t,n,r)}function eC(e,t,n,r){return $T(e,"child_changed",t,n,r)}function tC(e,t,n,r){return $T(e,"child_moved",t,n,r)}function nC(e,t,n,r){return $T(e,"child_removed",t,n,r)}function rC(e,t,n){let r=null;const i=n?new LT(n):null;"value"===t?r=new YT(i):t&&(r=new JT(t,i)),gT(e._repo,e,r)}class iC{}class sC extends iC{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){qS("endAt",this._value,e._path,!0);const t=kk(e._queryParams,this._value,this._key);if(VT(t),UT(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new FT(e._repo,e._path,t,e._orderByCalled)}}class oC extends iC{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){qS("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===zI||n?kk(e,t,n):kk(e,t,Pb),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(VT(t),UT(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new FT(e._repo,e._path,t,e._orderByCalled)}}class aC extends iC{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){qS("startAt",this._value,e._path,!0);const t=Ik(e._queryParams,this._value,this._key);if(VT(t),UT(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new FT(e._repo,e._path,t,e._orderByCalled)}}class lC extends iC{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){qS("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===zI||n?Ik(e,t,n):Ik(e,t,Rb),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(VT(t),UT(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new FT(e._repo,e._path,t,e._orderByCalled)}}class cC extends iC{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new FT(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class uC extends iC{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new FT(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class hC extends iC{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){jT(e,"orderByChild");const t=new yI(this._path);if(TI(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new dk(t),r=Ek(e._queryParams,n);return UT(r),new FT(e._repo,e._path,r,!0)}}class dC extends iC{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){jT(e,"orderByKey");const t=Ek(e._queryParams,zI);return UT(t),new FT(e._repo,e._path,t,!0)}}class fC extends iC{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){jT(e,"orderByPriority");const t=Ek(e._queryParams,ek);return UT(t),new FT(e._repo,e._path,t,!0)}}class pC extends iC{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){jT(e,"orderByValue");const t=Ek(e._queryParams,fk);return UT(t),new FT(e._repo,e._path,t,!0)}}class mC extends iC{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(qS("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sC(this._value,this._key)._apply(new aC(this._value,this._key)._apply(e))}}function gC(e){let t=Tt(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){Re(!jE,"__referenceConstructor has already been defined"),jE=e}(zT),function(e){Re(!UE,"__referenceConstructor has already been defined"),UE=e}(zT);const yC="FIREBASE_DATABASE_EMULATOR_HOST",vC={};let _C=!1;function wC(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||xb("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sb("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=NT(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[yC]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=NT(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Kb(Kb.OWNER):new Hb(e.name,e.options,t);JS("Invalid Firebase Database URL",l),TI(l.path)||xb("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=vC[t.name];i||(i={},vC[t.name]=i);let s=i[e.toURLString()];s&&xb("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new sT(e,_C,n,r),i[e.toURLString()]=s,s}(c,e,u,new Wb(e.name,n));return new bC(h,e)}class bC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zT(this._repo,vI())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=vC[t];n&&n[e.key]===e||xb("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),yT(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xb("Cannot call "+e+" on a deleted database.")}}function IC(){uI.IS_TRANSPORT_INITIALIZED&&Nb("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function kC(){IC(),oI.forceDisallow()}function EC(){IC(),cI.forceDisallow(),oI.forceAllow()}function SC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Tt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&xb("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xb('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Kb(Kb.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:He(r.mockUserToken,e.app.options.projectId);s=new Kb(t)}!function(e,t,n,r){e.repoInfo_=new Xb("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function TC(e){var t;(e=Tt(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rT)}function CC(e,t){Eb(e,t)}const xC={".sv":"timestamp"};class NC{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function AC(e,t,n){var r;if(e=Tt(e),YS("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new We,o=XT(e,(()=>{}));return function(e,t,n,r,i,s){vT(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:_b(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=wT(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{BS("transaction failed: Data returned ",l,o.path),o.status=0;const n=xS(e.transactionQueueTree_,t),r=NS(n)||[];let i;r.push(o),AS(n,r),"object"===typeof l&&null!==l&&lt(l,".priority")?(i=ct(l,".priority"),Re(zS(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(oS(e.serverSyncTree_,t)||lk.EMPTY_NODE).getPriority().val();const s=lT(e),c=hk(l,i),u=SS(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=dT(e);const h=ZE(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);eT(e.eventQueue_,t,h),bT(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new qT(r,new zT(e._repo,e._path),ek),s.resolve(new NC(n,i)))}),o,i),s.promise}MI.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},MI.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){db(Gn),jn(new Ct("database",((e,t)=>{let{instanceIdentifier:n}=t;return wC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Zn(cb,ub,e),Zn(cb,ub,"esm2017")}();const PC=new Ft("@firebase/database-compat"),RC=function(e){const t="FIREBASE WARNING: "+e;PC.warn(t)};class DC{constructor(e){this._delegate=e}cancel(e){bt("OnDisconnect.cancel",0,1,arguments.length),kt("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){bt("OnDisconnect.remove",0,1,arguments.length),kt("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){bt("OnDisconnect.set",1,2,arguments.length),kt("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){bt("OnDisconnect.setWithPriority",2,3,arguments.length),kt("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(bt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,RC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kt("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class OC{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return bt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class LC{constructor(e,t){this._database=e,this._delegate=t}val(){return bt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return bt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return bt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return bt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return bt("DataSnapshot.child",0,1,arguments.length),e=String(e),GS("DataSnapshot.child","path",e,!1),new LC(this._database,this._delegate.child(e))}hasChild(e){return bt("DataSnapshot.hasChild",1,1,arguments.length),GS("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return bt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return bt("DataSnapshot.forEach",1,1,arguments.length),kt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new LC(this._database,t))))}hasChildren(){return bt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return bt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return bt("DataSnapshot.ref",0,0,arguments.length),new FC(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class MC{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;bt("Query.on",2,4,arguments.length),kt("Query.on","callback",t,!1);const s=MC.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new LC(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return XT(this._delegate,o,a),t;case"child_added":return ZT(this._delegate,o,a),t;case"child_removed":return nC(this._delegate,o,a),t;case"child_changed":return eC(this._delegate,o,a),t;case"child_moved":return tC(this._delegate,o,a),t;default:throw new Error(It("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(bt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(It(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),kt("Query.off","callback",t,!0),Et("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,rC(this._delegate,e,r)}else rC(this._delegate,e)}get(){return QT(this._delegate).then((e=>new LC(this.database,e)))}once(e,t,n,r){bt("Query.once",1,4,arguments.length),kt("Query.once","callback",t,!0);const i=MC.getCancelAndContextArgs_("Query.once",n,r),s=new We,o=(e,n)=>{const r=new LC(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":XT(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":ZT(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":nC(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":eC(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":tC(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(It("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return bt("Query.limitToFirst",1,1,arguments.length),new MC(this.database,gC(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cC(e)}(e)))}limitToLast(e){return bt("Query.limitToLast",1,1,arguments.length),new MC(this.database,gC(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uC(e)}(e)))}orderByChild(e){return bt("Query.orderByChild",1,1,arguments.length),new MC(this.database,gC(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return GS("orderByChild","path",e,!1),new hC(e)}(e)))}orderByKey(){return bt("Query.orderByKey",0,0,arguments.length),new MC(this.database,gC(this._delegate,new dC))}orderByPriority(){return bt("Query.orderByPriority",0,0,arguments.length),new MC(this.database,gC(this._delegate,new fC))}orderByValue(){return bt("Query.orderByValue",0,0,arguments.length),new MC(this.database,gC(this._delegate,new pC))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return bt("Query.startAt",0,2,arguments.length),new MC(this.database,gC(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return KS("startAt","key",t,!0),new aC(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return bt("Query.startAfter",0,2,arguments.length),new MC(this.database,gC(this._delegate,function(e,t){return KS("startAfter","key",t,!0),new lC(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return bt("Query.endAt",0,2,arguments.length),new MC(this.database,gC(this._delegate,function(e,t){return KS("endAt","key",t,!0),new sC(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return bt("Query.endBefore",0,2,arguments.length),new MC(this.database,gC(this._delegate,function(e,t){return KS("endBefore","key",t,!0),new oC(e,t)}(e,t)))}equalTo(e,t){return bt("Query.equalTo",1,2,arguments.length),new MC(this.database,gC(this._delegate,function(e,t){return KS("equalTo","key",t,!0),new mC(e,t)}(e,t)))}toString(){return bt("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return bt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(bt("Query.isEqual",1,1,arguments.length),!(e instanceof MC)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,kt(e,"cancel",r.cancel,!0),r.context=n,Et(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(It(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new FC(this.database,new zT(this._delegate._repo,this._delegate._path))}}class FC extends MC{constructor(e,t){super(e,new FT(t._repo,t._path,new bk,!1)),this.database=e,this._delegate=t}getKey(){return bt("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return bt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new FC(this.database,HT(this._delegate,e))}getParent(){bt("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new FC(this.database,e):null}getRoot(){return bt("Reference.root",0,0,arguments.length),new FC(this.database,this._delegate.root)}set(e,t){bt("Reference.set",1,2,arguments.length),kt("Reference.set","onComplete",t,!0);const n=KT(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(bt("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,RC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}YS("Reference.update",this._delegate._path),kt("Reference.update","onComplete",t,!0);const n=GT(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){bt("Reference.setWithPriority",2,3,arguments.length),kt("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(YS("setWithPriority",e._path),qS("setWithPriority",t,e._path,!1),HS("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new We;return fT(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){bt("Reference.remove",0,1,arguments.length),kt("Reference.remove","onComplete",e,!0);const t=function(e){return YS("remove",e._path),KT(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){bt("Reference.transaction",1,3,arguments.length),kt("Reference.transaction","transactionUpdate",e,!1),kt("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(It(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=AC(this._delegate,e,{applyLocally:n}).then((e=>new OC(e.committed,new LC(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){bt("Reference.setPriority",1,2,arguments.length),kt("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=Tt(e),YS("setPriority",e._path),HS("setPriority",t,!1);const n=new We;return fT(e._repo,SI(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){bt("Reference.push",0,2,arguments.length),kt("Reference.push","onComplete",t,!0);const n=function(e,t){e=Tt(e),YS("push",e._path),qS("push",t,e._path,!0);const n=aT(e._repo),r=RT(n),i=HT(e,r),s=HT(e,r);let o;return o=null!=t?KT(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new FC(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new FC(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return YS("Reference.onDisconnect",this._delegate._path),new DC(new MT(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class jC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:kC,forceLongPolling:EC}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};SC(this._delegate,e,t,n)}ref(e){if(bt("database.ref",0,1,arguments.length),e instanceof FC){const t=WT(this._delegate,e.toString());return new FC(this,t)}{const t=BT(this._delegate,e);return new FC(this,t)}}refFromURL(e){bt("database.refFromURL",1,1,arguments.length);const t=WT(this._delegate,e);return new FC(this,t)}goOffline(){return bt("database.goOffline",0,0,arguments.length),(e=Tt(e=this._delegate))._checkNotDeleted("goOffline"),void yT(e._repo);var e}goOnline(){return bt("database.goOnline",0,0,arguments.length),TC(this._delegate)}}jC.ServerValue={TIMESTAMP:xC,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var UC=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;db(r);const l=new At("database-standalone"),c=new Nt("auth-internal",l);let u;return c.setComponent(new Ct("auth-internal",(()=>i),"PRIVATE")),s&&(u=new Nt("app-check-internal",l),u.setComponent(new Ct("app-check-internal",(()=>s),"PRIVATE"))),{instance:new jC(wC(t,c,u,n,a),t),namespace:o}}});const VC=jC.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ct("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new jC(i,r)}),"PUBLIC").setServiceProps({Reference:FC,Query:MC,Database:jC,DataSnapshot:LC,enableLogging:CC,INTERNAL:UC,ServerValue:VC}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.5")}(vr);const zC=vr.initializeApp({apiKey:"AIzaSyBrQ-Zq73u30CnmcvFEIpBfWbqtqwDNP4A",authDomain:"record-mannager.firebaseapp.com",projectId:"record-mannager",storageBucket:"record-mannager.appspot.com",messagingSenderId:"951032866095",appId:"1:951032866095:web:662160c19e2f5174e42dda"}).database().ref();function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qC(Object(n),!0).forEach((function(t){KC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WC(e){return WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WC(e)}function HC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}(e,t)||YC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QC(e){return function(e){if(Array.isArray(e))return JC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YC(e,t){if(e){if("string"===typeof e)return JC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JC(e,t):void 0}}function JC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $C=function(){},XC={},ZC={},ex=null,tx={mark:$C,measure:$C};try{"undefined"!==typeof window&&(XC=window),"undefined"!==typeof document&&(ZC=document),"undefined"!==typeof MutationObserver&&(ex=MutationObserver),"undefined"!==typeof performance&&(tx=performance)}catch(YP){}var nx,rx,ix,sx,ox,ax=(XC.navigator||{}).userAgent,lx=void 0===ax?"":ax,cx=XC,ux=ZC,hx=ex,dx=tx,fx=(cx.document,!!ux.documentElement&&!!ux.head&&"function"===typeof ux.addEventListener&&"function"===typeof ux.createElement),px=~lx.indexOf("MSIE")||~lx.indexOf("Trident/"),mx="___FONT_AWESOME___",gx=16,yx="fa",vx="svg-inline--fa",_x="data-fa-i2svg",wx="data-fa-pseudo-element",bx="data-fa-pseudo-element-pending",Ix="data-prefix",kx="data-icon",Ex="fontawesome-i2svg",Sx="async",Tx=["HTML","HEAD","STYLE","SCRIPT"],Cx=function(){try{return!0}catch(YP){return!1}}(),xx="classic",Nx="sharp",Ax=[xx,Nx];function Px(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[xx]}})}var Rx=Px((KC(nx={},xx,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),KC(nx,Nx,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),nx)),Dx=Px((KC(rx={},xx,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),KC(rx,Nx,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),rx)),Ox=Px((KC(ix={},xx,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),KC(ix,Nx,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),ix)),Lx=Px((KC(sx={},xx,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),KC(sx,Nx,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),sx)),Mx=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,Fx="fa-layers-text",jx=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Ux=Px((KC(ox={},xx,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),KC(ox,Nx,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),ox)),Vx=[1,2,3,4,5,6,7,8,9,10],zx=Vx.concat([11,12,13,14,15,16,17,18,19,20]),qx=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Bx={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Wx=new Set;Object.keys(Dx[xx]).map(Wx.add.bind(Wx)),Object.keys(Dx[Nx]).map(Wx.add.bind(Wx));var Hx=[].concat(Ax,QC(Wx),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Bx.GROUP,Bx.SWAP_OPACITY,Bx.PRIMARY,Bx.SECONDARY]).concat(Vx.map((function(e){return"".concat(e,"x")}))).concat(zx.map((function(e){return"w-".concat(e)}))),Kx=cx.FontAwesomeConfig||{};if(ux&&"function"===typeof ux.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=GC(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=ux.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Kx[r]=i)}))}var Gx={styleDefault:"solid",familyDefault:"classic",cssPrefix:yx,replacementClass:vx,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Kx.familyPrefix&&(Kx.cssPrefix=Kx.familyPrefix);var Qx=BC(BC({},Gx),Kx);Qx.autoReplaceSvg||(Qx.observeMutations=!1);var Yx={};Object.keys(Gx).forEach((function(e){Object.defineProperty(Yx,e,{enumerable:!0,set:function(t){Qx[e]=t,Jx.forEach((function(e){return e(Yx)}))},get:function(){return Qx[e]}})})),Object.defineProperty(Yx,"familyPrefix",{enumerable:!0,set:function(e){Qx.cssPrefix=e,Jx.forEach((function(e){return e(Yx)}))},get:function(){return Qx.cssPrefix}}),cx.FontAwesomeConfig=Yx;var Jx=[];var $x=gx,Xx={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Zx="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function eN(){for(var e=12,t="";e-- >0;)t+=Zx[62*Math.random()|0];return t}function tN(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function nN(e){return e.classList?tN(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function rN(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function iN(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function sN(e){return e.size!==Xx.size||e.x!==Xx.x||e.y!==Xx.y||e.rotate!==Xx.rotate||e.flipX||e.flipY}var oN=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function aN(){var e=yx,t=vx,n=Yx.cssPrefix,r=Yx.replacementClass,i=oN;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var lN=!1;function cN(){Yx.autoAddCss&&!lN&&(!function(e){if(e&&fx){var t=ux.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ux.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}ux.head.insertBefore(t,r)}}(aN()),lN=!0)}var uN={mixout:function(){return{dom:{css:aN,insertCss:cN}}},hooks:function(){return{beforeDOMElementCreation:function(){cN()},beforeI2svg:function(){cN()}}}},hN=cx||{};hN[mx]||(hN[mx]={}),hN[mx].styles||(hN[mx].styles={}),hN[mx].hooks||(hN[mx].hooks={}),hN[mx].shims||(hN[mx].shims=[]);var dN=hN[mx],fN=[],pN=!1;function mN(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?rN(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(rN(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(mN).join(""),"</").concat(t,">")}function gN(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}fx&&((pN=(ux.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ux.readyState))||ux.addEventListener("DOMContentLoaded",(function e(){ux.removeEventListener("DOMContentLoaded",e),pN=1,fN.map((function(e){return e()}))})));var yN=function(e,t,n,r){var i,s,o,a=Object.keys(e),l=a.length,c=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<l;i++)o=c(o,e[s=a[i]],s,e);return o};function vN(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function _N(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function wN(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=_N(t);"function"!==typeof dN.hooks.addPack||r?dN.styles[e]=BC(BC({},dN.styles[e]||{}),i):dN.hooks.addPack(e,_N(t)),"fas"===e&&wN("fa",t)}var bN,IN,kN,EN=dN.styles,SN=dN.shims,TN=(KC(bN={},xx,Object.values(Ox[xx])),KC(bN,Nx,Object.values(Ox[Nx])),bN),CN=null,xN={},NN={},AN={},PN={},RN={},DN=(KC(IN={},xx,Object.keys(Rx[xx])),KC(IN,Nx,Object.keys(Rx[Nx])),IN);function ON(e,t){var n,r=t.split("-"),i=r[0],s=r.slice(1).join("-");return i!==e||""===s||(n=s,~Hx.indexOf(n))?null:s}var LN,MN=function(){var e=function(e){return yN(EN,(function(t,n,r){return t[r]=yN(n,e,{}),t}),{})};xN=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),NN=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),RN=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in EN||Yx.autoFetchSvg,n=yN(SN,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:s}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:s}),e}),{names:{},unicodes:{}});AN=n.names,PN=n.unicodes,CN=qN(Yx.styleDefault,{family:Yx.familyDefault})};function FN(e,t){return(xN[e]||{})[t]}function jN(e,t){return(RN[e]||{})[t]}function UN(e){return AN[e]||{prefix:null,iconName:null}}function VN(){return CN}LN=function(e){CN=qN(e.styleDefault,{family:Yx.familyDefault})},Jx.push(LN),MN();var zN=function(){return{prefix:null,iconName:null,rest:[]}};function qN(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?xx:t,r=Rx[n][e],i=Dx[n][e]||Dx[n][r],s=e in dN.styles?e:null;return i||s||null}var BN=(KC(kN={},xx,Object.keys(Ox[xx])),KC(kN,Nx,Object.keys(Ox[Nx])),kN);function WN(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(KC(t={},xx,"".concat(Yx.cssPrefix,"-").concat(xx)),KC(t,Nx,"".concat(Yx.cssPrefix,"-").concat(Nx)),t),s=null,o=xx;(e.includes(i[xx])||e.some((function(e){return BN[xx].includes(e)})))&&(o=xx),(e.includes(i[Nx])||e.some((function(e){return BN[Nx].includes(e)})))&&(o=Nx);var a=e.reduce((function(e,t){var n=ON(Yx.cssPrefix,t);if(EN[t]?(t=TN[o].includes(t)?Lx[o][t]:t,s=t,e.prefix=t):DN[o].indexOf(t)>-1?(s=t,e.prefix=qN(t,{family:o})):n?e.iconName=n:t!==Yx.replacementClass&&t!==i[xx]&&t!==i[Nx]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===s?UN(e.iconName):{},l=jN(e.prefix,e.iconName);a.prefix&&(s=null),e.iconName=a.iconName||l||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||EN.far||!EN.fas||Yx.autoFetchSvg||(e.prefix="fas")}return e}),zN());return(e.includes("fa-brands")||e.includes("fab"))&&(a.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(a.prefix="fad"),a.prefix||o!==Nx||!EN.fass&&!Yx.autoFetchSvg||(a.prefix="fass",a.iconName=jN(a.prefix,a.iconName)||a.iconName),"fa"!==a.prefix&&"fa"!==s||(a.prefix=VN()||"fas"),a}var HN=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=BC(BC({},e.definitions[t]||{}),i[t]),wN(t,i[t]);var n=Ox[xx][t];n&&wN(n,i[t]),MN()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon,a=o[2];e[i]||(e[i]={}),a.length>0&&a.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][s]=o})),e}}],n&&HC(t.prototype,n),r&&HC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),KN=[],GN={},QN={},YN=Object.keys(QN);function JN(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(GN[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function $N(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(GN[e]||[]).forEach((function(e){e.apply(null,n)}))}function XN(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return QN[e]?QN[e].apply(null,t):void 0}function ZN(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||VN();if(t)return t=jN(n,t)||t,gN(eA.definitions,n,t)||gN(dN.styles,n,t)}var eA=new HN,tA={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fx?($N("beforeI2svg",e),XN("pseudoElements2svg",e),XN("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===Yx.autoReplaceSvg&&(Yx.autoReplaceSvg=!0),Yx.observeMutations=!0,e=function(){iA({autoReplaceSvgRoot:n}),$N("watch",t)},fx&&(pN?setTimeout(e,0):fN.push(e))}},nA={icon:function(e){if(null===e)return null;if("object"===WC(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:jN(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=qN(e[0]);return{prefix:n,iconName:jN(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Yx.cssPrefix,"-"))>-1||e.match(Mx))){var r=WN(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||VN(),iconName:jN(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=VN();return{prefix:i,iconName:jN(i,e)||e}}}},rA={noAuto:function(){Yx.autoReplaceSvg=!1,Yx.observeMutations=!1,$N("noAuto")},config:Yx,dom:tA,parse:nA,library:eA,findIconDefinition:ZN,toHtml:mN},iA=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?ux:e;(Object.keys(dN.styles).length>0||Yx.autoFetchSvg)&&fx&&Yx.autoReplaceSvg&&rA.dom.i2svg({node:t})};function sA(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return mN(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(fx){var t=ux.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function oA(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,f=void 0!==d&&d,p=r.found?r:n,m=p.width,g=p.height,y="fak"===i,v=[Yx.replacementClass,s?"".concat(Yx.cssPrefix,"-").concat(s):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),_={children:[],attributes:BC(BC({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:v,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(_.attributes[_x]=""),l&&(_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(u||eN())},children:[l]}),delete _.attributes.title);var b=BC(BC({},_),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:BC(BC({},w),h.styles)}),I=r.found&&n.found?XN("generateAbstractMask",b)||{children:[],attributes:{}}:XN("generateAbstractIcon",b)||{children:[],attributes:{}},k=I.children,E=I.attributes;return b.children=k,b.attributes=E,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol,o=!0===s?"".concat(t,"-").concat(Yx.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:BC(BC({},i),{},{id:o}),children:r}]}]}(b):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(sN(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=iN(BC(BC({},s),{},{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(b)}function aA(e){var t=e.content,n=e.width,r=e.height,i=e.transform,s=e.title,o=e.extra,a=e.watchable,l=void 0!==a&&a,c=BC(BC(BC({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[_x]="");var u=BC({},o.styles);sN(i)&&(u.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?gx:n,i=e.height,s=void 0===i?gx:i,o=e.startCentered,a=void 0!==o&&o,l="";return l+=a&&px?"translate(".concat(t.x/$x-r/2,"em, ").concat(t.y/$x-s/2,"em) "):a?"translate(calc(-50% + ".concat(t.x/$x,"em), calc(-50% + ").concat(t.y/$x,"em)) "):"translate(".concat(t.x/$x,"em, ").concat(t.y/$x,"em) "),l+="scale(".concat(t.size/$x*(t.flipX?-1:1),", ").concat(t.size/$x*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=iN(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}var lA=dN.styles;function cA(e){var t=e[0],n=e[1],r=GC(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Yx.cssPrefix,"-").concat(Bx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Yx.cssPrefix,"-").concat(Bx.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Yx.cssPrefix,"-").concat(Bx.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var uA={found:!1,width:512,height:512};function hA(e,t){var n=t;return"fa"===t&&null!==Yx.styleDefault&&(t=VN()),new Promise((function(r,i){XN("missingIconAbstract");if("fa"===n){var s=UN(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&lA[t]&&lA[t][e])return r(cA(lA[t][e]));!function(e,t){Cx||Yx.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(BC(BC({},uA),{},{icon:Yx.showMissingIcons&&e&&XN("missingIconAbstract")||{}}))}))}var dA=function(){},fA=Yx.measurePerformance&&dx&&dx.mark&&dx.measure?dx:{mark:dA,measure:dA},pA='FA "6.5.2"',mA=function(e){fA.mark("".concat(pA," ").concat(e," ends")),fA.measure("".concat(pA," ").concat(e),"".concat(pA," ").concat(e," begins"),"".concat(pA," ").concat(e," ends"))},gA={begin:function(e){return fA.mark("".concat(pA," ").concat(e," begins")),function(){return mA(e)}},end:mA},yA=function(){};function vA(e){return"string"===typeof(e.getAttribute?e.getAttribute(_x):null)}function _A(e){return ux.createElementNS("http://www.w3.org/2000/svg",e)}function wA(e){return ux.createElement(e)}function bA(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?_A:wA:t;if("string"===typeof e)return ux.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(bA(e,{ceFn:n}))})),r}var IA={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(bA(e),t)})),null===t.getAttribute(_x)&&Yx.keepOriginalSource){var n=ux.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~nN(t).indexOf(Yx.replacementClass))return IA.replace(e);var r=new RegExp("".concat(Yx.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===Yx.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var s=n.map((function(e){return mN(e)})).join("\n");t.setAttribute(_x,""),t.innerHTML=s}};function kA(e){e()}function EA(e,t){var n="function"===typeof t?t:yA;if(0===e.length)n();else{var r=kA;Yx.mutateApproach===Sx&&(r=cx.requestAnimationFrame||kA),r((function(){var t=!0===Yx.autoReplaceSvg?IA.replace:IA[Yx.autoReplaceSvg]||IA.replace,r=gA.begin("mutate");e.map(t),r(),n()}))}}var SA=!1;function TA(){SA=!0}function CA(){SA=!1}var xA=null;function NA(e){if(hx&&Yx.observeMutations){var t=e.treeCallback,n=void 0===t?yA:t,r=e.nodeCallback,i=void 0===r?yA:r,s=e.pseudoElementsCallback,o=void 0===s?yA:s,a=e.observeMutationsRoot,l=void 0===a?ux:a;xA=new hx((function(e){if(!SA){var t=VN();tN(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!vA(e.addedNodes[0])&&(Yx.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Yx.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&vA(e.target)&&~qx.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(Ix):null,n=e.getAttribute?e.getAttribute(kx):null;return t&&n}(e.target)){var r=WN(nN(e.target)),s=r.prefix,a=r.iconName;e.target.setAttribute(Ix,s||t),a&&e.target.setAttribute(kx,a)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(Yx.replacementClass)&&i(e.target);var l}))}})),fx&&xA.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function AA(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=WN(nN(e));return i.prefix||(i.prefix=VN()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(NN[e]||{})[t]}(i.prefix,e.innerText)||FN(i.prefix,vN(e.innerText))),!i.iconName&&Yx.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function PA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=AA(e),r=n.iconName,i=n.prefix,s=n.rest,o=function(e){var t=tN(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Yx.autoA11y&&(n?t["aria-labelledby"]="".concat(Yx.replacementClass,"-title-").concat(r||eN()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=JN("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return BC({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Xx,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var RA=dN.styles;function DA(e){var t="nest"===Yx.autoReplaceSvg?PA(e,{styleParser:!1}):PA(e);return~t.extra.classes.indexOf(Fx)?XN("generateLayersText",e,t):XN("generateSvgReplacementMutation",e,t)}var OA=new Set;function LA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!fx)return Promise.resolve();var n=ux.documentElement.classList,r=function(e){return n.add("".concat(Ex,"-").concat(e))},i=function(e){return n.remove("".concat(Ex,"-").concat(e))},s=Yx.autoFetchSvg?OA:Ax.map((function(e){return"fa-".concat(e)})).concat(Object.keys(RA));s.includes("fa")||s.push("fa");var o=[".".concat(Fx,":not([").concat(_x,"])")].concat(s.map((function(e){return".".concat(e,":not([").concat(_x,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=tN(e.querySelectorAll(o))}catch(YP){}if(!(a.length>0))return Promise.resolve();r("pending"),i("complete");var l=gA.begin("onTree"),c=a.reduce((function(e,t){try{var n=DA(t);n&&e.push(n)}catch(YP){Cx||"MissingIcon"===YP.name&&console.error(YP)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){EA(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function MA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;DA(e).then((function(e){e&&EA([e],t)}))}Ax.map((function(e){OA.add("fa-".concat(e))})),Object.keys(Rx[xx]).map(OA.add.bind(OA)),Object.keys(Rx[Nx]).map(OA.add.bind(OA)),OA=QC(OA);var FA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Xx:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,l=t.maskId,c=void 0===l?null:l,u=t.title,h=void 0===u?null:u,d=t.titleId,f=void 0===d?null:d,p=t.classes,m=void 0===p?[]:p,g=t.attributes,y=void 0===g?{}:g,v=t.styles,_=void 0===v?{}:v;if(e){var w=e.prefix,b=e.iconName,I=e.icon;return sA(BC({type:"icon"},e),(function(){return $N("beforeDOMElementCreation",{iconDefinition:e,params:t}),Yx.autoA11y&&(h?y["aria-labelledby"]="".concat(Yx.replacementClass,"-title-").concat(f||eN()):(y["aria-hidden"]="true",y.focusable="false")),oA({icons:{main:cA(I),mask:a?cA(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:b,transform:BC(BC({},Xx),r),symbol:s,title:h,maskId:c,titleId:f,extra:{attributes:y,styles:_,classes:m}})}))}},jA={mixout:function(){return{icon:(e=FA,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:ZN(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:ZN(i||{})),e(r,BC(BC({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=LA,e.nodeCallback=MA,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?ux:t,r=e.callback;return LA(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,s=t.prefix,o=t.transform,a=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,h){Promise.all([hA(n,s),l.iconName?hA(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=GC(l,2),d=h[0],f=h[1];t([e,oA({icons:{main:d,mask:f},prefix:s,iconName:n,transform:o,symbol:a,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.transform,o=iN(e.styles);return o.length>0&&(r.style=o),sN(s)&&(t=XN("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},UA={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return sA({type:"layer"},(function(){$N("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(Yx.cssPrefix,"-layers")].concat(QC(r)).join(" ")},children:n}]}))}}}},VA={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,s=void 0===i?[]:i,o=t.attributes,a=void 0===o?{}:o,l=t.styles,c=void 0===l?{}:l;return sA({type:"counter",content:e},(function(){return $N("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=BC(BC(BC({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=iN(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:r,extra:{attributes:a,styles:c,classes:["".concat(Yx.cssPrefix,"-layers-counter")].concat(QC(s))}})}))}}}},zA={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Xx:n,i=t.title,s=void 0===i?null:i,o=t.classes,a=void 0===o?[]:o,l=t.attributes,c=void 0===l?{}:l,u=t.styles,h=void 0===u?{}:u;return sA({type:"text",content:e},(function(){return $N("beforeDOMElementCreation",{content:e,params:t}),aA({content:e,transform:BC(BC({},Xx),r),title:s,extra:{attributes:c,styles:h,classes:["".concat(Yx.cssPrefix,"-layers-text")].concat(QC(a))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,s=null,o=null;if(px){var a=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();s=l.width/a,o=l.height/a}return Yx.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,aA({content:e.innerHTML,width:s,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},qA=new RegExp('"',"ug"),BA=[1105920,1112319];function WA(e,t){var n="".concat(bx).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var s=tN(e.children).filter((function(e){return e.getAttribute(wx)===t}))[0],o=cx.getComputedStyle(e,t),a=o.getPropertyValue("font-family").match(jx),l=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(s&&!a)return e.removeChild(s),r();if(a&&"none"!==c&&""!==c){var u=o.getPropertyValue("content"),h=~["Sharp"].indexOf(a[2])?Nx:xx,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(a[2])?Dx[h][a[2].toLowerCase()]:Ux[h][l],f=function(e){var t=e.replace(qA,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=BA[0]&&n<=BA[1],i=2===t.length&&t[0]===t[1];return{value:vN(i?t[0]:t),isSecondary:r||i}}(u),p=f.value,m=f.isSecondary,g=a[0].startsWith("FontAwesome"),y=FN(d,p),v=y;if(g){var _=function(e){var t=PN[e],n=FN("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);_.iconName&&_.prefix&&(y=_.iconName,d=_.prefix)}if(!y||m||s&&s.getAttribute(Ix)===d&&s.getAttribute(kx)===v)r();else{e.setAttribute(n,v),s&&e.removeChild(s);var w={iconName:null,title:null,titleId:null,prefix:null,transform:Xx,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=w.extra;b.attributes[wx]=t,hA(y,d).then((function(i){var s=oA(BC(BC({},w),{},{icons:{main:i,mask:zN()},prefix:d,iconName:v,extra:b,watchable:!0})),o=ux.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=s.map((function(e){return mN(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function HA(e){return Promise.all([WA(e,"::before"),WA(e,"::after")])}function KA(e){return e.parentNode!==document.head&&!~Tx.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(wx)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function GA(e){if(fx)return new Promise((function(t,n){var r=tN(e.querySelectorAll("*")).filter(KA).map(HA),i=gA.begin("searchPseudoElements");TA(),Promise.all(r).then((function(){i(),CA(),t()})).catch((function(){i(),CA(),n()}))}))}var QA=!1,YA=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},JA={mixout:function(){return{parse:{transform:function(e){return YA(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=YA(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,s={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:s,inner:{transform:"".concat(o," ").concat(a," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:BC({},c.outer),children:[{tag:"g",attributes:BC({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:BC(BC({},t.icon.attributes),c.path)}]}]}}}},$A={x:0,y:0,width:"100%",height:"100%"};function XA(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var ZA={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?WN(n.split(" ").map((function(e){return e.trim()}))):zN();return r.prefix||(r.prefix=VN()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,l=i.width,c=i.icon,u=s.width,h=s.icon,d=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:a,containerWidth:u,iconWidth:l}),f={tag:"rect",attributes:BC(BC({},$A),{},{fill:"white"})},p=c.children?{children:c.children.map(XA)}:{},m={tag:"g",attributes:BC({},d.inner),children:[XA(BC({tag:c.tag,attributes:BC(BC({},c.attributes),d.path)},p))]},g={tag:"g",attributes:BC({},d.outer),children:[m]},y="mask-".concat(o||eN()),v="clip-".concat(o||eN()),_={tag:"mask",attributes:BC(BC({},$A),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(t=h,"g"===t.tag?t.children:[t])},_]};return n.push(w,{tag:"rect",attributes:BC({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},$A)}),{children:n,attributes:r}}}},eP={provides:function(e){var t=!1;cx.matchMedia&&(t=cx.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:BC(BC({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=BC(BC({},r),{},{attributeName:"opacity"}),s={tag:"circle",attributes:BC(BC({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:BC(BC({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:BC(BC({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(s),e.push({tag:"path",attributes:BC(BC({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:BC(BC({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:BC(BC({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:BC(BC({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;KN=e,GN={},Object.keys(QN).forEach((function(e){-1===YN.indexOf(e)&&delete QN[e]})),KN.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===WC(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){GN[e]||(GN[e]=[]),GN[e].push(r[e])}))}e.provides&&e.provides(QN)}))}([uN,jA,UA,VA,zA,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=GA,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?ux:t;Yx.searchPseudoElements&&GA(n)}}},{mixout:function(){return{dom:{unwatch:function(){TA(),QA=!0}}}},hooks:function(){return{bootstrap:function(){NA(JN("mutationObserverCallbacks",{}))},noAuto:function(){xA&&xA.disconnect()},watch:function(e){var t=e.observeMutationsRoot;QA?CA():NA(JN("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},JA,ZA,eP,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:rA});var tP=rA.parse,nP=rA.icon,rP=n(173),iP=n.n(rP);function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(n),!0).forEach((function(t){lP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aP(e){return aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aP(e)}function lP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uP(e){return function(e){if(Array.isArray(e))return hP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return hP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dP(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var fP=["style"];var pP=!1;try{pP=!0}catch(YP){}function mP(e){return e&&"object"===aP(e)&&e.prefix&&e.iconName&&e.icon?e:tP.icon?tP.icon(e):null===e?null:e&&"object"===aP(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function gP(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?lP({},e,t):{}}var yP={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},vP=r.forwardRef((function(e,t){var n=oP(oP({},yP),e),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=mP(r),h=gP("classes",[].concat(uP(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,s=e.bounce,o=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,y=e.size,v=e.rotation,_=e.pull,w=(lP(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(y),"undefined"!==typeof y&&null!==y),lP(t,"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),lP(t,"fa-pull-".concat(_),"undefined"!==typeof _&&null!==_),lP(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map((function(e){return w[e]?e:null})).filter((function(e){return e}))}(n)),uP((o||"").split(" ")))),d=gP("transform","string"===typeof n.transform?tP.transform(n.transform):n.transform),f=gP("mask",mP(i)),p=nP(u,oP(oP(oP(oP({},h),d),f),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!p)return function(){var e;!pP&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=p.abstract,g={ref:t};return Object.keys(n).forEach((function(e){yP.hasOwnProperty(e)||(g[e]=n[e])})),_P(m[0],g)}));vP.displayName="FontAwesomeIcon",vP.propTypes={beat:iP().bool,border:iP().bool,beatFade:iP().bool,bounce:iP().bool,className:iP().string,fade:iP().bool,flash:iP().bool,mask:iP().oneOfType([iP().object,iP().array,iP().string]),maskId:iP().string,fixedWidth:iP().bool,inverse:iP().bool,flip:iP().oneOf([!0,!1,"horizontal","vertical","both"]),icon:iP().oneOfType([iP().object,iP().array,iP().string]),listItem:iP().bool,pull:iP().oneOf(["right","left"]),pulse:iP().bool,rotation:iP().oneOf([0,90,180,270]),shake:iP().bool,size:iP().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:iP().bool,spinPulse:iP().bool,spinReverse:iP().bool,symbol:iP().oneOfType([iP().bool,iP().string]),title:iP().string,titleId:iP().string,transform:iP().oneOfType([iP().string,iP().object]),swapOpacity:iP().bool};var _P=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=dP(t.slice(0,n)),i=t.slice(n+1).trim();return r.startsWith("webkit")?e[function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(r)]=i:e[r]=i,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[dP(t)]=r}return e}),{attrs:{}}),o=r.style,a=void 0===o?{}:o,l=cP(r,fP);return s.attrs.style=oP(oP({},s.attrs.style),a),t.apply(void 0,[n.tag,oP(oP({},s.attrs),l)].concat(uP(i)))}.bind(null,r.createElement),wP={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},bP={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"]},IP={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},kP={prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},EP={prefix:"fas",iconName:"unlock",icon:[448,512,[128275],"f09c","M144 144c0-44.2 35.8-80 80-80c31.9 0 59.4 18.6 72.3 45.7c7.6 16 26.7 22.8 42.6 15.2s22.8-26.7 15.2-42.6C331 33.7 281.5 0 224 0C144.5 0 80 64.5 80 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H144V144z"]},SP={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},TP={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},CP={prefix:"fas",iconName:"business-time",icon:[640,512,["briefcase-clock"],"f64a","M184 48H328c4.4 0 8 3.6 8 8V96H176V56c0-4.4 3.6-8 8-8zm-56 8V96H64C28.7 96 0 124.7 0 160v96H192 352h8.2c32.3-39.1 81.1-64 135.8-64c5.4 0 10.7 .2 16 .7V160c0-35.3-28.7-64-64-64H384V56c0-30.9-25.1-56-56-56H184c-30.9 0-56 25.1-56 56zM320 352H224c-17.7 0-32-14.3-32-32V288H0V416c0 35.3 28.7 64 64 64H360.2C335.1 449.6 320 410.5 320 368c0-5.4 .2-10.7 .7-16l-.7 0zm320 16a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zM496 288c8.8 0 16 7.2 16 16v48h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H496c-8.8 0-16-7.2-16-16V304c0-8.8 7.2-16 16-16z"]},xP=CP,NP={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},AP={prefix:"fas",iconName:"indian-rupee-sign",icon:[320,512,["indian-rupee","inr"],"e1bc","M0 64C0 46.3 14.3 32 32 32H96h16H288c17.7 0 32 14.3 32 32s-14.3 32-32 32H231.8c9.6 14.4 16.7 30.6 20.7 48H288c17.7 0 32 14.3 32 32s-14.3 32-32 32H252.4c-13.2 58.3-61.9 103.2-122.2 110.9L274.6 422c14.4 10.3 17.7 30.3 7.4 44.6s-30.3 17.7-44.6 7.4L13.4 314C2.1 306-2.7 291.5 1.5 278.2S18.1 256 32 256h80c32.8 0 61-19.7 73.3-48H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H185.3C173 115.7 144.8 96 112 96H96 32C14.3 96 0 81.7 0 64z"]},PP=AP,RP={prefix:"fas",iconName:"minus",icon:[448,512,[8211,8722,10134,"subtract"],"f068","M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"]},DP=RP,OP={prefix:"fas",iconName:"arrow-left-long",icon:[512,512,["long-arrow-left"],"f177","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 73.4-73.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-128 128z"]},LP={prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},MP={prefix:"fas",iconName:"boxes-stacked",icon:[576,512,[62625,"boxes","boxes-alt"],"f468","M248 0H208c-26.5 0-48 21.5-48 48V160c0 35.3 28.7 64 64 64H352c35.3 0 64-28.7 64-64V48c0-26.5-21.5-48-48-48H328V80c0 8.8-7.2 16-16 16H264c-8.8 0-16-7.2-16-16V0zM64 256c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H224c35.3 0 64-28.7 64-64V320c0-35.3-28.7-64-64-64H184v80c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V256H64zM352 512H512c35.3 0 64-28.7 64-64V320c0-35.3-28.7-64-64-64H472v80c0 8.8-7.2 16-16 16H408c-8.8 0-16-7.2-16-16V256H352c-15 0-28.8 5.1-39.7 13.8c4.9 10.4 7.7 22 7.7 34.2V464c0 12.2-2.8 23.8-7.7 34.2C323.2 506.9 337 512 352 512z"]},FP={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},jP={prefix:"fas",iconName:"cookie-bite",icon:[512,512,[],"f564","M257.5 27.6c-.8-5.4-4.9-9.8-10.3-10.6v0c-22.1-3.1-44.6 .9-64.4 11.4l-74 39.5C89.1 78.4 73.2 94.9 63.4 115L26.7 190.6c-9.8 20.1-13 42.9-9.1 64.9l14.5 82.8c3.9 22.1 14.6 42.3 30.7 57.9l60.3 58.4c16.1 15.6 36.6 25.6 58.7 28.7l83 11.7c22.1 3.1 44.6-.9 64.4-11.4l74-39.5c19.7-10.5 35.6-27 45.4-47.2l36.7-75.5c9.8-20.1 13-42.9 9.1-64.9v0c-.9-5.3-5.3-9.3-10.6-10.1c-51.5-8.2-92.8-47.1-104.5-97.4c-1.8-7.6-8-13.4-15.7-14.6c-54.6-8.7-97.7-52-106.2-106.8zM208 144a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM144 336a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm224-64a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},UP={prefix:"fas",iconName:"briefcase",icon:[512,512,[128188],"f0b1","M184 48H328c4.4 0 8 3.6 8 8V96H176V56c0-4.4 3.6-8 8-8zm-56 8V96H64C28.7 96 0 124.7 0 160v96H192 320 512V160c0-35.3-28.7-64-64-64H384V56c0-30.9-25.1-56-56-56H184c-30.9 0-56 25.1-56 56zM512 288H320v32c0 17.7-14.3 32-32 32H224c-17.7 0-32-14.3-32-32V288H0V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V288z"]},VP=n(579);const zP=()=>(0,VP.jsx)("div",{className:" d-flex justify-content-center align-items-center footer",children:"This Site Is Made By: Lakshay Khanagwal"}),qP=()=>{const[e,t]=(0,r.useState)(),n=ee(),i=(0,r.useRef)(),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(bP),c=(0,r.useRef)(),u=(0,r.useRef)(),h=(0,r.useRef)(),d=(0,r.useRef)(),f=(0,r.useRef)(),p=(0,r.useRef)(),m=(0,r.useRef)(),g=(0,r.useRef)(),[y,v]=(0,r.useState)(),[_,w]=(0,r.useState)(),[b,I]=(0,r.useState)();function k(n){t({...e,[n.target.name]:n.target.value})}return(0,VP.jsxs)("div",{children:[(0,VP.jsxs)("div",{className:"signup",children:[(0,VP.jsxs)("div",{className:" Header pe-4 pb-2",children:[(0,VP.jsx)("div",{}),(0,VP.jsx)("h4",{className:" text-center mt-2 ps-5 text-decoration-underline",children:"Create Account"}),(0,VP.jsx)("div",{})]}),(0,VP.jsxs)("div",{className:"container",children:[(0,VP.jsx)("h1",{className:"text-center mt-md-4 mt-3 mb-4 text-decoration-underline",children:"SignUp"}),(0,VP.jsxs)("form",{children:[(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:IP})," Name: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"Name",ref:c,className:"form-control mb-2 mt-1",onChange:k,placeholder:"Enter your Name"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:SP})," Phone: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"number",name:"phone",className:"form-control mt-1 mb-2",ref:u,onChange:function(n){zC.child("users").orderByChild("phone").equalTo(n.target.value).on("value",(function(r){if(r.val()){document.getElementById("signup").setAttribute("disabled","true"),document.getElementById("phone_error").style.display="block",n.target.classList.remove("mb-2");var i=Object.keys(r.val());w(r.val()[i].phone)}else t({...e,[n.target.name]:n.target.value}),n.target.setAttribute("class","form-control mt-1 mb-2"),document.getElementById("phone_error").style.display="none",h.current.value!==y&&m.current.value!==b&&document.getElementById("signup").removeAttribute("disabled")}))},placeholder:"Enter Phone Number"}),(0,VP.jsx)("h6",{id:"phone_error",className:"Error_text mb-2",children:"Phone Number Already Exists"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:NP})," Email: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"mail",name:"email",className:"form-control mb-2 mt-1",ref:h,onChange:function(n){zC.child("users").orderByChild("email").equalTo(n.target.value).on("value",(function(r){if(r.val()){document.getElementById("signup").setAttribute("disabled","true"),document.getElementById("mail_error").style.display="block",n.target.classList.remove("mb-2"),v();var i=Object.keys(r.val());v(r.val()[i].email)}else t({...e,[n.target.name]:n.target.value}),n.target.setAttribute("class","form-control mt-1 mb-2"),document.getElementById("mail_error").style.display="none",u.current.value!==_&&m.current.value!==b&&document.getElementById("signup").removeAttribute("disabled")}))},placeholder:"Enter Your E-Mail"}),(0,VP.jsx)("h6",{id:"mail_error",className:"Error_text mb-2",children:"E-mail Already Used"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:LP})," Address: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("textarea",{name:"address",ref:d,className:"form-control mb-2 mt-1",onChange:k,placeholder:"Enter Adderss"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:UP})," Business Name: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"business_name",ref:f,className:"form-control mb-2 mt-1",onChange:k,placeholder:"Enter Your Business Name"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:xP})," Business Type: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"business_type",ref:p,className:"form-control mb-2 mt-1",onChange:k,placeholder:"Enter Your Business Type"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:IP})," Username: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"uname",className:"form-control mb-2 mt-1",ref:m,onChange:function(n){zC.child("users").orderByChild("uname").equalTo(n.target.value).on("value",(function(r){if(r.val()||"Admin"===m.current.value||"admin"===m.current.value){document.getElementById("signup").setAttribute("disabled","true"),document.getElementById("uname_error").style.display="block",n.target.classList.remove("mb-2");var i=Object.keys(r.val());I(r.val()[i].uname)}else t({...e,[n.target.name]:n.target.value}),n.target.setAttribute("class","form-control mt-1 mb-2"),document.getElementById("uname_error").style.display="none",u.current.value!==_&&h.current.value!==y&&document.getElementById("signup").removeAttribute("disabled")}))},placeholder:"Create UserName"}),(0,VP.jsx)("h6",{id:"uname_error",className:"Error_text mb-2",children:"UserName Already Taken"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:kP})," Password: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"Password",name:"password",className:"pass_input form-control mb-2 mt-1",ref:g,onChange:k,placeholder:"Create Password"}),(0,VP.jsx)("div",{className:"pass_visibility form-control",onClick:function(){!0===s?(g.current.type="text",o(!1),l(EP)):(g.current.type="password",o(!0),l(bP))},children:(0,VP.jsx)(vP,{icon:a})}),(0,VP.jsx)("h6",{ref:i,className:"text-center text-danger text_display",children:"All Fields Are Mandatory"}),(0,VP.jsxs)("div",{className:"text-center pt-3 mb-2",children:[(0,VP.jsx)("button",{className:"btn btn-primary mb-1",id:"signup",onClick:function(t){t.preventDefault(),""!==c.current.value&&""!==u.current.value&&""!==h.current.value&&""!==d.current.value&&""!==f.current.value&&""!==p.current.value&&""!==m.current.value&&""!==g.current.value?zC.child("users").push(e,(e=>{e?alert("Some error occured"):(alert("Account Created wait for admin approval"),n("/"))})):(i.current.style.display="block",setTimeout((()=>{i.current.style.display="none"}),2e3))},children:"SignUp"}),(0,VP.jsx)("br",{}),(0,VP.jsxs)("span",{className:"pb-2",children:["Already Have Account ",(0,VP.jsx)(Te,{to:"/",children:"Click Here"})," "]})]})]})]})]}),(0,VP.jsx)("div",{className:"align-items-baseline",children:(0,VP.jsx)(zP,{})})]})},BP=()=>{const[e,t]=(0,r.useState)(!0),[n,i]=(0,r.useState)(bP),s=(0,r.useRef)(""),o=(0,r.useRef)(""),a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)(),u=ee();return(0,VP.jsxs)("div",{children:[(0,VP.jsxs)("div",{className:"login",children:[(0,VP.jsxs)("div",{className:" Header pe-4 pb-2",children:[(0,VP.jsx)("div",{}),(0,VP.jsx)("h4",{className:" text-center mt-2 ps-5",children:"Transaction Manager"}),(0,VP.jsx)("div",{})]}),(0,VP.jsxs)("div",{className:"container col-12 col-md-5 pannel_login",children:[(0,VP.jsx)("h1",{className:"text-center mt-md-4 mt-3 mb-4 text-decoration-underline",children:"LogIn"}),(0,VP.jsxs)("form",{children:[(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:IP})," Username: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"uname",className:"form-control mb-2 mt-1",ref:s,placeholder:"Enter UserName"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:kP})," Password: ",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"Password",name:"passsword",className:"pass_input form-control mb-2 mt-1",ref:o,placeholder:"Enter Password"}),(0,VP.jsx)("div",{className:"pass_visibility form-control",onClick:function(){!0===e?(o.current.type="text",t(!1),i(EP)):(o.current.type="password",t(!0),i(bP))},children:(0,VP.jsx)(vP,{icon:n})}),(0,VP.jsx)("h6",{ref:a,className:"text-center text-danger text_display",children:"User not Approved, Wait For Approval From Admin."}),(0,VP.jsx)("h6",{ref:l,className:"text-center text-danger text_display",children:"Wrong Username And Password"}),(0,VP.jsx)("h6",{ref:c,className:"text-center text-danger text_display",children:"Mandatory Fields Can't be Empty."}),(0,VP.jsxs)("div",{className:"text-center pt-3",children:[(0,VP.jsx)("button",{onClick:function(e){e.preventDefault();const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";if(""===s.current.value||""===o.current.value)c.current.style.display="block",setTimeout((()=>{c.current.style.display="none"}),3e3);else if("Admin"===s.current.value&&"Admin@123"===o.current.value){const e=Array(8).fill().map((()=>t.charAt(Math.floor(62*Math.random())))).join("");localStorage.setItem("validation",e),u("/Admin/".concat(e))}else zC.child("users").orderByChild("uname").equalTo(s.current.value).on("value",(function(e){if(e.val()){var n=Object.keys(e.val());if(e.val()[n].password===o.current.value)if(e.val()[n].Approval){a.current.style.display="none";const e=Array(8).fill().map((()=>t.charAt(Math.floor(62*Math.random())))).join("");localStorage.setItem("validation",e),u("/Home/".concat(n,"/").concat(e))}else a.current.style.display="block",setTimeout((()=>{a.current.style.display="none"}),3e3);else l.current.style.display="block",setTimeout((()=>{l.current.style.display="none"}),2e3)}else l.current.style.display="block",setTimeout((()=>{l.current.style.display="none"}),2e3)}))},className:"btn btn-primary mb-1",children:"LogIn"}),(0,VP.jsx)("br",{}),(0,VP.jsxs)("span",{className:"pb-2",children:["Need An Account ",(0,VP.jsx)(Te,{to:"/signup",children:"Click Here"})," "]})]})]})]})]}),(0,VP.jsx)("div",{className:"align-items-baseline",children:(0,VP.jsx)(zP,{})})]})},WP=()=>{const{security_key:e}=te(),t=(0,r.useRef)(),[n,i]=(0,r.useState)({}),[s,o]=(0,r.useState)({}),a=ee(),l=(0,r.useRef)(),c=(0,r.useRef)();return(0,r.useEffect)((function(){localStorage.getItem("validation")===e?(t.current.style.display="block",localStorage.removeItem("validation")):a("/")}),[e,a]),(0,r.useEffect)((function(){zC.child("users").on("value",(function(e){i(e.val()),o(e.val())}))}),[]),(0,VP.jsxs)("div",{ref:t,style:{display:"none"},children:[(0,VP.jsxs)("div",{className:"admin",children:[(0,VP.jsxs)("div",{className:" Header pe-4 pb-2",children:[(0,VP.jsx)("div",{}),(0,VP.jsx)("h4",{className:" text-center mt-2",children:"Welcome Admin"}),(0,VP.jsx)("button",{className:" btn btn-danger mt-2",onClick:function(){a("/")},children:"Logout"})]}),(0,VP.jsxs)("div",{className:"container",children:[(0,VP.jsxs)("div",{className:"mb-2 mt-3",children:[(0,VP.jsxs)("select",{className:"select form-control bg-danger-subtle",ref:l,onChange:function(){console.log(l.current.value),"Name"===l.current.value?c.current.placeholder="Search By Name":"Phone"===l.current.value?c.current.placeholder="Search By phone number":"E-mail"===l.current.value&&(c.current.placeholder="Search By E-mail")},children:[(0,VP.jsx)("option",{className:"form-control",value:"Name",children:"Name"}),(0,VP.jsx)("option",{className:"form-control",value:"Phone",children:"Phone"}),(0,VP.jsx)("option",{className:"form-control",value:"E-mail",children:"E-mail"})]}),(0,VP.jsx)("input",{type:"search",ref:c,onChange:function(e){if(""===e.target.value)i(s);else{var t={};Object.keys(s).map((function(e){return"Name"===l.current.value?s[e].Name.match(c.current.value)&&(t[e]=s[e]):"Phone"===l.current.value?s[e].phone.match(c.current.value)&&(t[e]=s[e]):"E-mail"===l.current.value&&s[e].email.match(c.current.value)&&(t[e]=s[e]),!0})),0===Object.keys(t).length?i():i(t)}},className:"search_admin form-control",placeholder:"Search By Name"})]}),(0,VP.jsx)("div",{className:"table_customer",children:(0,VP.jsxs)("table",{className:" table table-striped table-hover table-bordered mt-3",children:[(0,VP.jsx)("thead",{children:(0,VP.jsxs)("tr",{className:"text-center",children:[(0,VP.jsx)("th",{children:"Sr. No."}),(0,VP.jsx)("th",{children:"Name"}),(0,VP.jsx)("th",{children:"Phone"}),(0,VP.jsx)("th",{children:"E-mail"}),(0,VP.jsx)("th",{children:"Business Name"}),(0,VP.jsx)("th",{children:"Business Type"}),(0,VP.jsx)("th",{children:"UserName"}),(0,VP.jsx)("th",{children:"Password"}),(0,VP.jsx)("th",{children:"Status"}),(0,VP.jsx)("th",{children:"Operations"})]})}),(0,VP.jsx)("tbody",{children:n?Object.keys(n).map((function(e,t){return(0,VP.jsxs)("tr",{children:[(0,VP.jsx)("td",{children:t+1}),(0,VP.jsx)("td",{children:n[e].Name}),(0,VP.jsx)("td",{children:n[e].phone}),(0,VP.jsx)("td",{children:n[e].email}),(0,VP.jsx)("td",{children:n[e].business_name}),(0,VP.jsx)("td",{children:n[e].business_type}),(0,VP.jsx)("td",{children:n[e].uname}),(0,VP.jsx)("td",{children:n[e].password}),(0,VP.jsx)("td",{children:n[e].Approval?n[e].Approval:"Not Approved"}),(0,VP.jsx)("td",{children:(0,VP.jsxs)("div",{children:[(0,VP.jsx)("button",{className:n[e].Approval?" btn btn-warning me-1":"btn btn-primary me-1",onClick:()=>{return t=e,void zC.child("users/".concat(t)).once("value",(function(e){"Approved"===e.val().Approval?zC.child("users/".concat(t,"/Approval")).remove((e=>{e?alert("Some Error Occured"):alert("User Un-Approved")})):zC.child("users/".concat(t)).update({Approval:"Approved"},(e=>{e?alert("Some Error Occured"):alert("User Approved")}))}));var t},children:n[e].Approval?"Un-Approve":"Approved"}),(0,VP.jsx)("button",{className:"btn btn-danger",onClick:()=>function(e){window.confirm("are you sure")&&zC.child("users/".concat(e)).remove()}(e),children:"Delete"})]})})]},e)})):(0,VP.jsx)("tr",{children:(0,VP.jsx)("td",{colSpan:9,className:" text-center",children:"No Record found"})})})]})})]})]}),(0,VP.jsx)("div",{className:"align-items-baseline",children:(0,VP.jsx)(zP,{})})]})},HP=()=>{const e=(0,r.useRef)(),{key:t,customerkey:n,security_key:i}=te(),s=ee(),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(),[u,h]=(0,r.useState)();return(0,r.useEffect)((function(){localStorage.getItem("validation")===i?e.current.style.display="block":s("/")}),[i,s]),(0,r.useEffect)((function(){""===o&&zC.child("users/".concat(t,"/customer/").concat(n,"/Transection")).on("value",(function(e){a(e.val())}))}),[t,n,o]),(0,r.useEffect)((function(){o&&c({...o.credit,...o.debit})}),[o]),(0,r.useEffect)((function(){zC.child("users/".concat(t,"/customer/").concat(n)).on("value",(function(e){h(e.val())}))}),[t,n]),(0,VP.jsxs)("div",{ref:e,children:[(0,VP.jsxs)("div",{className:"Transaction",children:[(0,VP.jsxs)("div",{className:" Header ps-3 pe-4 pb-2",children:[(0,VP.jsxs)("button",{className:"btn btn-warning mt-2",onClick:function(){s("/Home/".concat(t,"/").concat(i))},children:[" ",(0,VP.jsx)(vP,{icon:OP})," Back"]}),(0,VP.jsxs)("h4",{className:" text-center mt-2 ps-5",children:["Customer, ",(0,VP.jsx)("span",{className:"text-decoration-underline",children:u?"".concat(u.name,"'s"):""})," Transactions "]}),(0,VP.jsxs)("button",{className:" btn btn-danger mt-2",onClick:function(){localStorage.removeItem("validation"),s("/")},children:[(0,VP.jsx)(vP,{icon:wP})," Logout"]})]}),(0,VP.jsxs)("div",{className:"container",children:[(0,VP.jsxs)("div",{className:"row p-2",children:[(0,VP.jsxs)("div",{className:"col-6",children:[(0,VP.jsx)("span",{children:u?u.name:"Name"}),(0,VP.jsx)("br",{}),(0,VP.jsx)("span",{children:u?u.phone:"Phone Number"}),(0,VP.jsx)("br",{}),(0,VP.jsx)("span",{children:u?u.mail:"E-Mail"}),(0,VP.jsx)("br",{}),(0,VP.jsx)("span",{className:"text_weight",children:"Balance: "}),(0,VP.jsx)("span",{className:"text_weight",children:"\u20b9"}),(0,VP.jsx)("span",{className:"text_weight text-decoration-underline",children:u?u.Balance:"Nil"})]}),(0,VP.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,VP.jsx)("div",{className:"text-end col-md-4 col-sm-9",children:u?u.address:"Address"})})]}),(0,VP.jsx)("div",{className:"table_customer",children:(0,VP.jsxs)("table",{className:"table table-striped table-hover table-bordered",children:[(0,VP.jsx)("thead",{children:(0,VP.jsxs)("tr",{className:"text-center",children:[(0,VP.jsx)("th",{children:"Sr. No."}),(0,VP.jsx)("th",{children:"Item"}),(0,VP.jsx)("th",{children:"Date/Time"}),(0,VP.jsx)("th",{style:{width:"15%"},children:"Quantity"}),(0,VP.jsx)("th",{style:{width:"15%"},children:"Price"}),(0,VP.jsx)("th",{style:{width:"15%"},children:"Paid Amount"}),(0,VP.jsx)("th",{style:{width:"17%"},children:"Total"})]})}),(0,VP.jsx)("tbody",{children:l?Object.keys(l).map((function(e,t){return(0,VP.jsxs)("tr",{children:[(0,VP.jsx)("td",{style:{width:"10%"},className:"text-center",children:t+1}),(0,VP.jsx)("td",{className:l[e].Item?"":"text_weight",children:l[e].Item?l[e].Item:"Payment"}),(0,VP.jsx)("td",{children:l[e].date_time}),(0,VP.jsx)("td",{children:l[e].Quantity?l[e].Quantity:"-"}),(0,VP.jsx)("td",{children:l[e].Item?l[e].Amount:"-"}),(0,VP.jsx)("td",{className:l[e].Item?"":"text_weight",children:l[e].Item?"-":"-".concat(l[e].Amount)}),(0,VP.jsx)("td",{className:l[e].Item?"":"text_weight",children:l[e].Quantity?l[e].Quantity*l[e].Amount:"-".concat(l[e].Amount)})]},e)})):(0,VP.jsx)("tr",{children:(0,VP.jsx)("td",{colSpan:7,className:"text-center",children:"No Record Found"})})})]})})]})]}),(0,VP.jsx)("div",{className:"align-items-baseline",children:(0,VP.jsx)(zP,{})})]})},KP=()=>{const e=(0,r.useRef)(),{security_key:t}=te(),n=(0,r.useRef)(),i=(0,r.useRef)(),s=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)(),u=(0,r.useRef)(),h=(0,r.useRef)(),d=new Date,f="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear()),p=d.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),m="".concat(f,"/").concat(p),g=(0,r.useRef)(),y=(0,r.useRef)(),[v,_]=(0,r.useState)(),[w,b]=(0,r.useState)(""),I=(0,r.useRef)(),k=(0,r.useRef)(""),E=(0,r.useRef)(""),S=(0,r.useRef)(""),[T,C]=(0,r.useState)({}),x=(0,r.useRef)(),N=(0,r.useRef)(),[A,P]=(0,r.useState)(""),[R,D]=(0,r.useState)({}),O=(0,r.useRef)(),L=(0,r.useRef)(""),M=(0,r.useRef)(),F=(0,r.useRef)(),[j,U]=(0,r.useState)({}),[V,z]=(0,r.useState)({}),[q,B]=(0,r.useState)({}),[W,H]=(0,r.useState)({Balance:0}),[K,G]=(0,r.useState)(),[Q,Y]=(0,r.useState)(),J=ee(),{key:$}=te();function X(e){H({...W,[e.target.name]:e.target.value})}function Z(e){return J("/Transections/".concat($,"/").concat(e,"/").concat(t)),(0,VP.jsx)(HP,{cukey:e})}function ne(e){zC.child("users/".concat($,"/customer/").concat(e)).once("value",(function(t){0!==t.val().Balance?alert("First Clear The Balance"):window.confirm("Are you Sure, Once Deleted Never Restored.")&&zC.child("users/".concat($,"/customer/").concat(e)).remove()}))}function re(e){C({...T,[e.target.name]:e.target.value})}return(0,r.useEffect)((function(){C({date_time:m}),D({date_time:m})}),[m]),console.log(R),(0,r.useEffect)((function(){localStorage.getItem("validation")===t?e.current.style.display="block":J("/")}),[t,J]),(0,r.useEffect)((function(){zC.child("users/".concat($)).on("value",(function(e){B(e.val())}))}),[$]),(0,r.useEffect)((function(){zC.child("users/".concat($,"/customer")).on("value",(function(e){G(e.val()),Y(e.val())}))}),[$]),(0,r.useEffect)((function(){""!==w&&zC.child("users/".concat($)).child("customer/".concat(v)).update({Balance:w},(e=>{e?alert("Some Error Occured"):(N.current.style.display="block",b(""),C({}),k.current.value="",E.current.value="",S.current.value="",setTimeout((()=>{N.current.style.display="none"}),2e3))}))}),[w,v,$]),(0,r.useEffect)((function(){""!==A&&zC.child("users/".concat($)).child("customer/".concat(v)).update({Balance:A},(e=>{e?alert("Some Error Occured"):(D({}),P(""),F.current.style.display="block",setTimeout((()=>{F.current.style.display="none"}),2e3))}))}),[A,v,$]),(0,VP.jsxs)("div",{ref:e,children:[(0,VP.jsxs)("div",{className:"home",children:[(0,VP.jsxs)("div",{className:" Header pe-4 pb-2",children:[(0,VP.jsx)("div",{}),(0,VP.jsxs)("h4",{className:" text-center mt-2 ps-5",children:["Welcome, ",q.Name?q.Name:"User"]}),(0,VP.jsxs)("button",{className:" btn btn-danger mt-2",onClick:function(){localStorage.removeItem("validation"),J("/")},children:[(0,VP.jsx)(vP,{icon:wP})," Logout"]})]}),(0,VP.jsxs)("div",{className:"container",children:[(0,VP.jsx)("h1",{className:" text-center mt-3 mb-2",children:"Customer Details"}),(0,VP.jsxs)("form",{children:[(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:IP})," Name:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",className:"form-control mb-2 mt-1",name:"name",ref:n,onChange:X,placeholder:"Enter Customer Name"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:SP})," Phone:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"number",className:"form-control mb-2 mt-1",name:"phone",ref:i,onChange:function(e){zC.child("users/".concat($,"/customer")).orderByChild("phone").equalTo(i.current.value).on("value",(function(t){if(t.val()){h.current.setAttribute("disabled",""),c.current.style.display="block",e.target.classList.remove("mb-2");var n=Object.keys(t.val());z(t.val()[n].phone)}else H({...W,[e.target.name]:e.target.value}),e.target.setAttribute("class","form-control mt-1 mb-2"),c.current.style.display="none",s.current.value!==j&&h.current.removeAttribute("disabled")}))},placeholder:"Enter Customer Phone Number"}),(0,VP.jsx)("h6",{ref:c,className:"Error_text mb-2",children:"Phone Number Already Exists"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:NP})," E-mail:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"mail",className:"form-control mb-2 mt-1",name:"mail",ref:s,onChange:function(e){zC.child("users/".concat($,"/customer")).orderByChild("mail").equalTo(s.current.value).on("value",(function(t){if(t.val()){h.current.setAttribute("disabled",""),u.current.style.display="block",e.target.classList.remove("mb-2");var n=Object.keys(t.val());U(t.val()[n].mail)}else H({...W,[e.target.name]:e.target.value}),e.target.setAttribute("class","form-control mt-1 mb-2"),u.current.style.display="none",i.current.value!==V&&h.current.removeAttribute("disabled")}))},placeholder:"Enter Customer E-mail"}),(0,VP.jsx)("h6",{ref:u,className:"Error_text mb-2",children:"E-mail Already Used"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:LP})," Address:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("textarea",{type:"text",className:"form-control mb-2 mt-1",name:"address",ref:o,onChange:X,placeholder:"Enter Customer Address"}),(0,VP.jsx)("h6",{ref:a,className:"text-danger text_display",children:"All Fields Are Mandatory"}),(0,VP.jsx)("h6",{ref:l,className:"text-success text_display",children:"Customer Added Successfully"}),(0,VP.jsx)("button",{className:"btn btn-primary mt-2",ref:h,onClick:function(e){e.preventDefault(),W.name&&W.phone&&W.mail&&W.address?zC.child("users/".concat($,"/customer")).push(W,(e=>{e?alert("Some Error Occured"):(n.current.value="",i.current.value="",s.current.value="",o.current.value="",U({}),s.current.setAttribute("class","form-control mt-1 mb-2"),u.current.style.display="none",z({}),i.current.setAttribute("class","form-control mt-1 mb-2"),c.current.style.display="none",h.current.removeAttribute("disabled"),H({Balance:0}),l.current.style.display="block",setTimeout((()=>{l.current.style.display="none"}),3e3))})):(a.current.style.display="block",setTimeout((()=>{a.current.style.display="none"}),3e3))},children:"Add Customer"})]})]}),(0,VP.jsxs)("div",{className:"container-fluid mt-3",children:[(0,VP.jsx)("h1",{className:"text-center mb-4 mt-2",children:"Customer Record"}),(0,VP.jsxs)("div",{className:"mb-2",children:[(0,VP.jsxs)("select",{className:"select form-control bg-danger-subtle",ref:g,onChange:function(){console.log(g.current.value),"Name"===g.current.value?y.current.placeholder="Search By Name":"Phone"===g.current.value?y.current.placeholder="Search By phone number":"E-mail"===g.current.value&&(y.current.placeholder="Search By E-mail")},children:[(0,VP.jsx)("option",{className:"form-control",value:"Name",children:"Name"}),(0,VP.jsx)("option",{className:"form-control",value:"Phone",children:"Phone"}),(0,VP.jsx)("option",{className:"form-control",value:"E-mail",children:"E-mail"})]}),(0,VP.jsx)("input",{type:"search",ref:y,onChange:function(e){if(""===e.target.value)G(Q);else{var t={};Object.keys(Q).map((function(e){return"Name"===g.current.value?Q[e].name.match(y.current.value)&&(t[e]=Q[e]):"Phone"===g.current.value?Q[e].phone.match(y.current.value)&&(t[e]=Q[e]):"E-mail"===g.current.value&&Q[e].mail.match(y.current.value)&&(t[e]=Q[e]),!0})),0===Object.keys(t).length?G():G(t)}},className:"search form-control",placeholder:"Search By Name"})]}),(0,VP.jsx)("h6",{className:"text-end pe-3",children:"Help"}),(0,VP.jsx)("div",{className:"table_customer",children:(0,VP.jsxs)("table",{className:" table table-striped table-hover table-bordered",children:[(0,VP.jsx)("thead",{children:(0,VP.jsxs)("tr",{className:"text-center",children:[(0,VP.jsx)("th",{children:"Sr. No."}),(0,VP.jsx)("th",{children:"Name"}),(0,VP.jsx)("th",{children:"Phone"}),(0,VP.jsx)("th",{style:{width:"16%"},children:"E-mail"}),(0,VP.jsx)("th",{style:{width:"25%"},children:"Address"}),(0,VP.jsx)("th",{style:{width:"15%"},children:"Balance Amount"}),(0,VP.jsx)("th",{style:{width:"8%"},children:"Transactions"}),(0,VP.jsx)("th",{children:"Operations"})]})}),(0,VP.jsx)("tbody",{children:K?Object.keys(K).map((function(e,t){return(0,VP.jsxs)("tr",{className:"text-center",children:[(0,VP.jsx)("td",{children:t+1}),(0,VP.jsx)("td",{children:K[e].name}),(0,VP.jsx)("td",{children:K[e].phone}),(0,VP.jsx)("td",{children:K[e].mail}),(0,VP.jsx)("td",{children:K[e].address}),(0,VP.jsx)("td",{children:K[e].Balance}),(0,VP.jsx)("td",{children:(0,VP.jsx)("button",{className:"btn btn-primary",onClick:()=>Z(e),children:"View"})}),(0,VP.jsxs)("td",{children:[(0,VP.jsx)("button",{className:" btn btn-primary me-1",onClick:()=>function(e){I.current.style.display="flex",_(e)}(e),children:(0,VP.jsx)(vP,{icon:FP})}),(0,VP.jsx)("button",{className:" btn btn-warning",onClick:()=>function(e){O.current.style.display="flex",_(e)}(e),children:(0,VP.jsx)(vP,{icon:DP})}),(0,VP.jsx)("button",{className:" btn btn-danger ms-1",onClick:()=>ne(e),children:(0,VP.jsx)(vP,{icon:TP})})]})]},e)})):(0,VP.jsx)("tr",{children:(0,VP.jsx)("td",{colSpan:8,className:"text-center",children:"No Record Found"})})})]})})]}),(0,VP.jsx)("div",{ref:I,className:"add_money",children:(0,VP.jsxs)("div",{className:"bg-white border border-2 border-primary rounded-1 col-md-3 col-9",children:[(0,VP.jsx)("h1",{className:"text-center bg-primary pb-2 text-light",children:"Credit"}),(0,VP.jsxs)("form",{className:"container pb-2",children:[(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:jP})," Item:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"text",name:"Item",ref:k,onChange:re,className:"form-control mt-1 mb-2",placeholder:"Enter Item Name"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:PP})," Amount:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"number",name:"Amount",ref:E,onChange:re,className:"form-control mt-1 mb-2",placeholder:"Enter Item Cost"}),(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:MP})," Quantity:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"number",name:"Quantity",ref:S,onChange:re,className:"form-control mt-1",placeholder:"Enter Quantity of item"}),(0,VP.jsx)("h6",{ref:x,className:"text-danger text_display",children:"All Fields Are Mandatory"}),(0,VP.jsx)("h6",{ref:N,className:"text-success text_display",children:"Transection Saved"}),(0,VP.jsxs)("div",{className:"text-center mt-3",children:[(0,VP.jsx)("button",{className:"btn btn-primary me-1",onClick:function(e){e.preventDefault(),k.current.value&&E.current.value&&S.current.value?zC.child("users/".concat($,"/customer/").concat(v,"/Transection/credit")).push(T,(e=>{e?alert("Some Error Occured"):b(parseInt(K[v].Balance)+T.Amount*T.Quantity)})):(x.current.style.display="block",setTimeout((()=>{x.current.style.display="none"}),2e3))},children:"Add Amount"}),(0,VP.jsx)("button",{className:"btn btn-danger ms-1",onClick:function(e){e.preventDefault(),I.current.style.display="none",b(""),C(),k.current.value="",E.current.value="",S.current.value=""},children:"Close"})]})]})]})}),(0,VP.jsx)("div",{ref:O,className:"add_money",children:(0,VP.jsxs)("div",{className:"bg-white border border-2 border-warning rounded-1 col-md-3 col-9",children:[(0,VP.jsx)("h1",{className:"text-center bg-warning pb-2 text-light",children:"debit"}),(0,VP.jsxs)("form",{className:"container pb-2",children:[(0,VP.jsxs)("label",{children:[(0,VP.jsx)(vP,{icon:PP})," Amount:",(0,VP.jsx)("span",{children:"*"})]}),(0,VP.jsx)("input",{type:"number",name:"Amount",ref:L,onChange:function(e){D({...R,[e.target.name]:e.target.value})},className:"form-control mt-1 mb-2",placeholder:"Enter Amount Paid By Customer"}),(0,VP.jsx)("h6",{ref:M,className:"text-danger text_display",children:"This Field Can't Be Empty"}),(0,VP.jsx)("h6",{ref:F,className:"text-success text_display",children:"Transection Saved"}),(0,VP.jsxs)("div",{className:"text-center mt-3",children:[(0,VP.jsx)("button",{className:"btn btn-warning me-1",onClick:function(e){e.preventDefault(),L.current.value?zC.child("users/".concat($,"/customer/").concat(v,"/Transection/debit")).push(R,(e=>{e?alert("Some Error Occured"):(P(parseInt(K[v].Balance)-R.Amount),L.current.value="")})):(M.current.style.display="block",setTimeout((()=>{M.current.style.display="none"}),2e3))},children:"debit Amount"}),(0,VP.jsx)("button",{className:"btn btn-danger ms-1",onClick:function(e){e.preventDefault(),O.current.style.display="none",L.current.value=""},children:"Close"})]})]})]})})]}),(0,VP.jsx)("div",{className:"align-items-baseline",children:(0,VP.jsx)(zP,{})})]})},GP=()=>{const e=new Date;console.log(e),console.log(e.getDate()),console.log(e.getMonth()),console.log(e.getFullYear());const t="".concat(e.getDate(),"/").concat(e.getMonth(),"/").concat(e.getFullYear());console.log(t);const n=e.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return console.log("".concat(t,", ").concat(n)),(0,VP.jsx)("div",{children:(0,VP.jsx)(vP,{icon:IP})})},QP=()=>(0,VP.jsx)("div",{children:(0,VP.jsx)(ke,{children:(0,VP.jsxs)(ye,{children:[(0,VP.jsx)(me,{path:"/",element:(0,VP.jsx)(BP,{})}),(0,VP.jsx)(me,{path:"/signup",element:(0,VP.jsx)(qP,{})}),(0,VP.jsx)(me,{path:"/Admin/:security_key",element:(0,VP.jsx)(WP,{})}),(0,VP.jsx)(me,{path:"/Home/:key/:security_key",element:(0,VP.jsx)(KP,{})}),(0,VP.jsx)(me,{path:"/Transections/:key/:customerkey/:security_key",element:(0,VP.jsx)(HP,{})}),(0,VP.jsx)(me,{path:"/test",element:(0,VP.jsx)(GP,{})})]})})});s.createRoot(document.getElementById("root")).render((0,VP.jsx)(QP,{}))})()})();
//# sourceMappingURL=main.ea170d9a.js.map